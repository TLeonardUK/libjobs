<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libjobs: jobs::scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libjobs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacejobs.html">jobs</a></li><li class="navelem"><a class="el" href="classjobs_1_1scheduler.html">scheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">jobs::scheduler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjobs_1_1scheduler_1_1fiber__pool.html">fiber_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjobs_1_1scheduler_1_1job__queue.html">job_queue</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler_1_1worker__thread__state.html">worker_thread_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8248741d3e59934dda9d269ca9a2e20a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a8248741d3e59934dda9d269ca9a2e20a">scheduler</a> ()</td></tr>
<tr class="separator:a8248741d3e59934dda9d269ca9a2e20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6698750a42bf62bc917b8477d3d476bb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a6698750a42bf62bc917b8477d3d476bb">~scheduler</a> ()</td></tr>
<tr class="separator:a6698750a42bf62bc917b8477d3d476bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4128488abdfd06ee0340b80fe36cd4ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a4128488abdfd06ee0340b80fe36cd4ce">set_memory_functions</a> (const <a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a> &amp;functions)</td></tr>
<tr class="memdesc:a4128488abdfd06ee0340b80fe36cd4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overrides the default memory allocation functions used by the scheduler.  <a href="#a4128488abdfd06ee0340b80fe36cd4ce">More...</a><br /></td></tr>
<tr class="separator:a4128488abdfd06ee0340b80fe36cd4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32937d615a6bd0d739f609db6abbac62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a32937d615a6bd0d739f609db6abbac62">set_profile_functions</a> (const <a class="el" href="structjobs_1_1profile__functions.html">profile_functions</a> &amp;functions)</td></tr>
<tr class="memdesc:a32937d615a6bd0d739f609db6abbac62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overrides the default profiling functions used by the scheduler.  <a href="#a32937d615a6bd0d739f609db6abbac62">More...</a><br /></td></tr>
<tr class="separator:a32937d615a6bd0d739f609db6abbac62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad98916ce62a44aeab289e9aeebb7b98e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad98916ce62a44aeab289e9aeebb7b98e">set_debug_output</a> (const <a class="el" href="namespacejobs.html#ae733fd1ddde20a364fc1cc85de1c6e22">debug_output_function</a> &amp;function, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a> max_verbosity=<a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>)</td></tr>
<tr class="memdesc:ad98916ce62a44aeab289e9aeebb7b98e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a function which all debug output will be passed.  <a href="#ad98916ce62a44aeab289e9aeebb7b98e">More...</a><br /></td></tr>
<tr class="separator:ad98916ce62a44aeab289e9aeebb7b98e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9721c93b979241fc79aeac7a297f4a28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a9721c93b979241fc79aeac7a297f4a28">set_max_jobs</a> (size_t max_jobs)</td></tr>
<tr class="memdesc:a9721c93b979241fc79aeac7a297f4a28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of jobs.  <a href="#a9721c93b979241fc79aeac7a297f4a28">More...</a><br /></td></tr>
<tr class="separator:a9721c93b979241fc79aeac7a297f4a28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17853664a2795e7ec92eece9d487280f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a17853664a2795e7ec92eece9d487280f">set_max_dependencies</a> (size_t max_dependencies)</td></tr>
<tr class="memdesc:a17853664a2795e7ec92eece9d487280f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of job dependencies.  <a href="#a17853664a2795e7ec92eece9d487280f">More...</a><br /></td></tr>
<tr class="separator:a17853664a2795e7ec92eece9d487280f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e5893c8a97ac79a8e607bec33c3eef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ac1e5893c8a97ac79a8e607bec33c3eef">set_max_profile_scopes</a> (size_t max_scopes)</td></tr>
<tr class="memdesc:ac1e5893c8a97ac79a8e607bec33c3eef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of profile scopes that can be tracked.  <a href="#ac1e5893c8a97ac79a8e607bec33c3eef">More...</a><br /></td></tr>
<tr class="separator:ac1e5893c8a97ac79a8e607bec33c3eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada4871f6c12bfd9157627fdc3435201c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ada4871f6c12bfd9157627fdc3435201c">set_max_counters</a> (size_t max_counters)</td></tr>
<tr class="memdesc:ada4871f6c12bfd9157627fdc3435201c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of counters that can be created and used for syncronization.  <a href="#ada4871f6c12bfd9157627fdc3435201c">More...</a><br /></td></tr>
<tr class="separator:ada4871f6c12bfd9157627fdc3435201c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff3a0a63ee385d3c1f1d3abb1749a41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#afff3a0a63ee385d3c1f1d3abb1749a41">set_max_callbacks</a> (size_t max_callbacks)</td></tr>
<tr class="memdesc:afff3a0a63ee385d3c1f1d3abb1749a41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum number of latent callbacks that can be scheduld and used for syncronization.  <a href="#afff3a0a63ee385d3c1f1d3abb1749a41">More...</a><br /></td></tr>
<tr class="separator:afff3a0a63ee385d3c1f1d3abb1749a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0302314dbce01fbb3566c9ffe742adf7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a0302314dbce01fbb3566c9ffe742adf7">add_thread_pool</a> (size_t thread_count, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a> job_priorities=<a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428daa181a603769c1f98ad927e7367c7aa51">priority::all</a>)</td></tr>
<tr class="memdesc:a0302314dbce01fbb3566c9ffe742adf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new pool of worker threads to the scheduler.  <a href="#a0302314dbce01fbb3566c9ffe742adf7">More...</a><br /></td></tr>
<tr class="separator:a0302314dbce01fbb3566c9ffe742adf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dc5dae47a7903d648cb03172b33c9d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a5dc5dae47a7903d648cb03172b33c9d6">add_fiber_pool</a> (size_t fiber_count, size_t stack_size)</td></tr>
<tr class="memdesc:a5dc5dae47a7903d648cb03172b33c9d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new pool of fibers threads to the scheduler.  <a href="#a5dc5dae47a7903d648cb03172b33c9d6">More...</a><br /></td></tr>
<tr class="separator:a5dc5dae47a7903d648cb03172b33c9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6090dbccd0375e37605cfcb31a6ef39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad6090dbccd0375e37605cfcb31a6ef39">init</a> ()</td></tr>
<tr class="memdesc:ad6090dbccd0375e37605cfcb31a6ef39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes this scheduler so it's ready to accept jobs.  <a href="#ad6090dbccd0375e37605cfcb31a6ef39">More...</a><br /></td></tr>
<tr class="separator:ad6090dbccd0375e37605cfcb31a6ef39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb677b86975a1ce1d9e6cee58669d5e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#adb677b86975a1ce1d9e6cee58669d5e6">create_job</a> (<a class="el" href="classjobs_1_1job__handle.html">job_handle</a> &amp;instance)</td></tr>
<tr class="memdesc:adb677b86975a1ce1d9e6cee58669d5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new job that can later be enqueued for execution.  <a href="#adb677b86975a1ce1d9e6cee58669d5e6">More...</a><br /></td></tr>
<tr class="separator:adb677b86975a1ce1d9e6cee58669d5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a707d218b879eec037670e5cf3bf6e09b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a707d218b879eec037670e5cf3bf6e09b">create_event</a> (<a class="el" href="classjobs_1_1event__handle.html">event_handle</a> &amp;instance, bool auto_reset=false)</td></tr>
<tr class="memdesc:a707d218b879eec037670e5cf3bf6e09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new event that can be used for job syncronization.  <a href="#a707d218b879eec037670e5cf3bf6e09b">More...</a><br /></td></tr>
<tr class="separator:a707d218b879eec037670e5cf3bf6e09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71779aafde74ca64c59956fb3223a562"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a71779aafde74ca64c59956fb3223a562">create_counter</a> (<a class="el" href="classjobs_1_1counter__handle.html">counter_handle</a> &amp;instance)</td></tr>
<tr class="memdesc:a71779aafde74ca64c59956fb3223a562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new counter that can be used for job syncronization.  <a href="#a71779aafde74ca64c59956fb3223a562">More...</a><br /></td></tr>
<tr class="separator:a71779aafde74ca64c59956fb3223a562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f413f28876852e06468815ec6aee8e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a5f413f28876852e06468815ec6aee8e6">dispatch_batch</a> (<a class="el" href="classjobs_1_1job__handle.html">job_handle</a> *job_array, size_t <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a>)</td></tr>
<tr class="memdesc:a5f413f28876852e06468815ec6aee8e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatches multiple jobs for execution in a single go.  <a href="#a5f413f28876852e06468815ec6aee8e6">More...</a><br /></td></tr>
<tr class="separator:a5f413f28876852e06468815ec6aee8e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d4eabd757213f9f3ec4c190ef2257d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a02d4eabd757213f9f3ec4c190ef2257d">wait_until_idle</a> (<a class="el" href="structjobs_1_1timeout.html">timeout</a> wait_timeout=<a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a>)</td></tr>
<tr class="memdesc:a02d4eabd757213f9f3ec4c190ef2257d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until all jobs are complete and the schedulers workers are idle.  <a href="#a02d4eabd757213f9f3ec4c190ef2257d">More...</a><br /></td></tr>
<tr class="separator:a02d4eabd757213f9f3ec4c190ef2257d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad858672d43d286d43fca605c051cb47a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad858672d43d286d43fca605c051cb47a">is_idle</a> () const</td></tr>
<tr class="memdesc:ad858672d43d286d43fca605c051cb47a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if all jobs are complete and the scheduler and it's workers are idle.  <a href="#ad858672d43d286d43fca605c051cb47a">More...</a><br /></td></tr>
<tr class="separator:ad858672d43d286d43fca605c051cb47a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a37598edcaf1f0f0eeb0290a85738d99a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a37598edcaf1f0f0eeb0290a85738d99a">sleep</a> (<a class="el" href="structjobs_1_1timeout.html">timeout</a> duration=<a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a>)</td></tr>
<tr class="memdesc:a37598edcaf1f0f0eeb0290a85738d99a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts the job or thread to sleep for the given amount of time.  <a href="#a37598edcaf1f0f0eeb0290a85738d99a">More...</a><br /></td></tr>
<tr class="separator:a37598edcaf1f0f0eeb0290a85738d99a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3fd26be8aa4bd50710d14dc12605d2d"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ae3fd26be8aa4bd50710d14dc12605d2d">get_logical_core_count</a> ()</td></tr>
<tr class="memdesc:ae3fd26be8aa4bd50710d14dc12605d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of logical cores on the system.  <a href="#ae3fd26be8aa4bd50710d14dc12605d2d">More...</a><br /></td></tr>
<tr class="separator:ae3fd26be8aa4bd50710d14dc12605d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7755d91fb9ecf77a3860d86727af920"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad7755d91fb9ecf77a3860d86727af920">get_worker_job_context</a> ()</td></tr>
<tr class="memdesc:ad7755d91fb9ecf77a3860d86727af920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the context of the worker management fiber running individual jobs.  <a href="#ad7755d91fb9ecf77a3860d86727af920">More...</a><br /></td></tr>
<tr class="separator:ad7755d91fb9ecf77a3860d86727af920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372a2b2959f720c99d75acd96918fb9f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a372a2b2959f720c99d75acd96918fb9f">get_active_job_context</a> ()</td></tr>
<tr class="memdesc:a372a2b2959f720c99d75acd96918fb9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the context of the job currently running on calling thread.  <a href="#a372a2b2959f720c99d75acd96918fb9f">More...</a><br /></td></tr>
<tr class="separator:a372a2b2959f720c99d75acd96918fb9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8da3b9447166b19109ed6891d536eee5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a8da3b9447166b19109ed6891d536eee5">is_profiling_active</a> ()</td></tr>
<tr class="memdesc:a8da3b9447166b19109ed6891d536eee5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets if the active scheduler has profiling enabled.  <a href="#a8da3b9447166b19109ed6891d536eee5">More...</a><br /></td></tr>
<tr class="separator:a8da3b9447166b19109ed6891d536eee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab200b5be7c531ca56635616ffcbdbed8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab200b5be7c531ca56635616ffcbdbed8">get_active_job_definition</a> ()</td></tr>
<tr class="memdesc:ab200b5be7c531ca56635616ffcbdbed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the definition of the job currently running on calling thread.  <a href="#ab200b5be7c531ca56635616ffcbdbed8">More...</a><br /></td></tr>
<tr class="separator:ab200b5be7c531ca56635616ffcbdbed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a72b273ff16629eac984650db03af8314"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a> (size_t index)</td></tr>
<tr class="memdesc:a72b273ff16629eac984650db03af8314"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a job definition by its pool index.  <a href="#a72b273ff16629eac984650db03af8314">More...</a><br /></td></tr>
<tr class="separator:a72b273ff16629eac984650db03af8314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcabed37fd81828cbf21acff4a81b496"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#abcabed37fd81828cbf21acff4a81b496">free_job</a> (size_t index)</td></tr>
<tr class="memdesc:abcabed37fd81828cbf21acff4a81b496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free's a job based on its pool index.  <a href="#abcabed37fd81828cbf21acff4a81b496">More...</a><br /></td></tr>
<tr class="separator:abcabed37fd81828cbf21acff4a81b496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa76d1476f6a079b49613ff487f4fe5fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aa76d1476f6a079b49613ff487f4fe5fc">increase_job_ref_count</a> (size_t index)</td></tr>
<tr class="memdesc:aa76d1476f6a079b49613ff487f4fe5fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the reference count of the job based on it's pool index.  <a href="#aa76d1476f6a079b49613ff487f4fe5fc">More...</a><br /></td></tr>
<tr class="separator:aa76d1476f6a079b49613ff487f4fe5fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4edfdfa7c00e4e3cd2b7f80ef99f4e7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a4edfdfa7c00e4e3cd2b7f80ef99f4e7b">decrease_job_ref_count</a> (size_t index)</td></tr>
<tr class="memdesc:a4edfdfa7c00e4e3cd2b7f80ef99f4e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreases the reference count of the job based on it's pool index.  <a href="#a4edfdfa7c00e4e3cd2b7f80ef99f4e7b">More...</a><br /></td></tr>
<tr class="separator:a4edfdfa7c00e4e3cd2b7f80ef99f4e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bb931be59ebef58a026d292362ad68d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a9bb931be59ebef58a026d292362ad68d">dispatch_job</a> (size_t index)</td></tr>
<tr class="memdesc:a9bb931be59ebef58a026d292362ad68d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatches a job for execution given it's pool index.  <a href="#a9bb931be59ebef58a026d292362ad68d">More...</a><br /></td></tr>
<tr class="separator:a9bb931be59ebef58a026d292362ad68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed591baef6580ec5c3c1e0ba9901b278"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a> (size_t index)</td></tr>
<tr class="memdesc:aed591baef6580ec5c3c1e0ba9901b278"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requeues a job that has previously been picked up for execution.  <a href="#aed591baef6580ec5c3c1e0ba9901b278">More...</a><br /></td></tr>
<tr class="separator:aed591baef6580ec5c3c1e0ba9901b278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05476e808d034d026924970fc9a2552a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a05476e808d034d026924970fc9a2552a">requeue_job_batch</a> (<a class="el" href="classjobs_1_1job__handle.html">job_handle</a> *job_array, size_t <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a>, size_t job_queues)</td></tr>
<tr class="memdesc:a05476e808d034d026924970fc9a2552a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requeues a quantity of jobs that have previously been picked up for execution.  <a href="#a05476e808d034d026924970fc9a2552a">More...</a><br /></td></tr>
<tr class="separator:a05476e808d034d026924970fc9a2552a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41389866549193a8cc88af8ffc059bb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a41389866549193a8cc88af8ffc059bb8">get_next_job</a> (size_t &amp;job_index, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a> priorities, bool can_block)</td></tr>
<tr class="memdesc:a41389866549193a8cc88af8ffc059bb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next available job from the highest priority queue available.  <a href="#a41389866549193a8cc88af8ffc059bb8">More...</a><br /></td></tr>
<tr class="separator:a41389866549193a8cc88af8ffc059bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93b14a0c15312997374d52618d84d2c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ac93b14a0c15312997374d52618d84d2c">get_next_job_from_queue</a> (size_t &amp;job_index, <a class="el" href="structjobs_1_1scheduler_1_1job__queue.html">job_queue</a> &amp;queue, size_t queue_mask)</td></tr>
<tr class="memdesc:ac93b14a0c15312997374d52618d84d2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the next available job a given queue.  <a href="#ac93b14a0c15312997374d52618d84d2c">More...</a><br /></td></tr>
<tr class="separator:ac93b14a0c15312997374d52618d84d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c70f317ba5e0da9bfdce9579fbe1095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a7c70f317ba5e0da9bfdce9579fbe1095">complete_job</a> (size_t job_index)</td></tr>
<tr class="memdesc:a7c70f317ba5e0da9bfdce9579fbe1095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Completes the given job index.  <a href="#a7c70f317ba5e0da9bfdce9579fbe1095">More...</a><br /></td></tr>
<tr class="separator:a7c70f317ba5e0da9bfdce9579fbe1095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51aeb6bd30bfffce5f2dfc1deeb91d47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a51aeb6bd30bfffce5f2dfc1deeb91d47">wait_for_job</a> (<a class="el" href="classjobs_1_1job__handle.html">job_handle</a> <a class="el" href="classjobs_1_1job__handle.html">job_handle</a>, <a class="el" href="structjobs_1_1timeout.html">timeout</a> wait_timeout=<a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a>)</td></tr>
<tr class="memdesc:a51aeb6bd30bfffce5f2dfc1deeb91d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a job to complete.  <a href="#a51aeb6bd30bfffce5f2dfc1deeb91d47">More...</a><br /></td></tr>
<tr class="separator:a51aeb6bd30bfffce5f2dfc1deeb91d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e02624b4ad96ccd0fa251fa8f865d97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a> (<a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a> level, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7">debug_log_group</a> group, const char *<a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">message</a>,...)</td></tr>
<tr class="memdesc:a4e02624b4ad96ccd0fa251fa8f865d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a log message to sink provided by set_debug_output.  <a href="#a4e02624b4ad96ccd0fa251fa8f865d97">More...</a><br /></td></tr>
<tr class="separator:a4e02624b4ad96ccd0fa251fa8f865d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f238503831b8b525189ef84420dc5a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a7f238503831b8b525189ef84420dc5a5">clear_job_dependencies</a> (size_t job_index)</td></tr>
<tr class="memdesc:a7f238503831b8b525189ef84420dc5a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears all the dependencies assigned to the given job index.  <a href="#a7f238503831b8b525189ef84420dc5a5">More...</a><br /></td></tr>
<tr class="separator:a7f238503831b8b525189ef84420dc5a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10f32c7b4e57166acfb7d6a1c89c7e7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a10f32c7b4e57166acfb7d6a1c89c7e7c">add_job_dependency</a> (size_t successor, size_t predecessor)</td></tr>
<tr class="memdesc:a10f32c7b4e57166acfb7d6a1c89c7e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a given dependency between two jobs.  <a href="#a10f32c7b4e57166acfb7d6a1c89c7e7c">More...</a><br /></td></tr>
<tr class="separator:a10f32c7b4e57166acfb7d6a1c89c7e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37680eb51d7cfbe475b77567b90a50a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a37680eb51d7cfbe475b77567b90a50a5">allocate_fiber</a> (size_t required_stack_size, size_t &amp;fiber_index, size_t &amp;fiber_pool_index)</td></tr>
<tr class="memdesc:a37680eb51d7cfbe475b77567b90a50a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to allocate a fiber out of the available fiber pools with the required stack size.  <a href="#a37680eb51d7cfbe475b77567b90a50a5">More...</a><br /></td></tr>
<tr class="separator:a37680eb51d7cfbe475b77567b90a50a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ea9be8de4c2ca7a07547dd133760c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a19ea9be8de4c2ca7a07547dd133760c1">free_fiber</a> (size_t fiber_index, size_t fiber_pool_index)</td></tr>
<tr class="memdesc:a19ea9be8de4c2ca7a07547dd133760c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a fiber allocated with <a class="el" href="classjobs_1_1scheduler.html#a37680eb51d7cfbe475b77567b90a50a5">allocate_fiber</a>, so it can be recycled later.  <a href="#a19ea9be8de4c2ca7a07547dd133760c1">More...</a><br /></td></tr>
<tr class="separator:a19ea9be8de4c2ca7a07547dd133760c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2df77fa18d7b459408579671d5ec17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a8c2df77fa18d7b459408579671d5ec17">leave_context</a> (<a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;old_context)</td></tr>
<tr class="memdesc:a8c2df77fa18d7b459408579671d5ec17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leaves the given job execution context in preperation for entering another.  <a href="#a8c2df77fa18d7b459408579671d5ec17">More...</a><br /></td></tr>
<tr class="separator:a8c2df77fa18d7b459408579671d5ec17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7e3db0510cdfd55bcf9b0169ed69495"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab7e3db0510cdfd55bcf9b0169ed69495">enter_context</a> (<a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;new_context)</td></tr>
<tr class="memdesc:ab7e3db0510cdfd55bcf9b0169ed69495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enters the given job execution context.  <a href="#ab7e3db0510cdfd55bcf9b0169ed69495">More...</a><br /></td></tr>
<tr class="separator:ab7e3db0510cdfd55bcf9b0169ed69495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f392116598e66d59d254ab5557591a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">switch_context</a> (<a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;new_context)</td></tr>
<tr class="memdesc:a74f392116598e66d59d254ab5557591a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switches from current job execution context to a new one.  <a href="#a74f392116598e66d59d254ab5557591a">More...</a><br /></td></tr>
<tr class="separator:a74f392116598e66d59d254ab5557591a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a52c9076dce044e82d0588c9ed744a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#af1a52c9076dce044e82d0588c9ed744a">return_to_worker</a> (<a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;new_context, bool supress_requeue)</td></tr>
<tr class="memdesc:af1a52c9076dce044e82d0588c9ed744a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns execution from the current fiber to the worker thread.  <a href="#af1a52c9076dce044e82d0588c9ed744a">More...</a><br /></td></tr>
<tr class="separator:af1a52c9076dce044e82d0588c9ed744a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c16bd88c8060aadf243e918c8297ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ae7c16bd88c8060aadf243e918c8297ea">alloc_scope</a> (<a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a> *&amp;output)</td></tr>
<tr class="memdesc:ae7c16bd88c8060aadf243e918c8297ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a profile scope from the pool.  <a href="#ae7c16bd88c8060aadf243e918c8297ea">More...</a><br /></td></tr>
<tr class="separator:ae7c16bd88c8060aadf243e918c8297ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c346600181c08f8cce63fe63c2e6326"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a8c346600181c08f8cce63fe63c2e6326">free_scope</a> (<a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a> *scope)</td></tr>
<tr class="memdesc:a8c346600181c08f8cce63fe63c2e6326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a profile scope previously allocated with <a class="el" href="classjobs_1_1scheduler.html#ae7c16bd88c8060aadf243e918c8297ea">alloc_scope</a>.  <a href="#a8c346600181c08f8cce63fe63c2e6326">More...</a><br /></td></tr>
<tr class="separator:a8c346600181c08f8cce63fe63c2e6326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a96ca2d832abfbf75b1b4b6ec856344"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjobs_1_1internal_1_1counter__definition.html">internal::counter_definition</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">get_counter_definition</a> (size_t index)</td></tr>
<tr class="memdesc:a1a96ca2d832abfbf75b1b4b6ec856344"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a counter definition by its pool index.  <a href="#a1a96ca2d832abfbf75b1b4b6ec856344">More...</a><br /></td></tr>
<tr class="separator:a1a96ca2d832abfbf75b1b4b6ec856344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d1c0b09977654670571314c5e99004"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad7d1c0b09977654670571314c5e99004">free_counter</a> (size_t index)</td></tr>
<tr class="memdesc:ad7d1c0b09977654670571314c5e99004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free's a counter based on its pool index.  <a href="#ad7d1c0b09977654670571314c5e99004">More...</a><br /></td></tr>
<tr class="separator:ad7d1c0b09977654670571314c5e99004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250b156b15dab8b7eae33d8660c51054"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a250b156b15dab8b7eae33d8660c51054">increase_counter_ref_count</a> (size_t index)</td></tr>
<tr class="memdesc:a250b156b15dab8b7eae33d8660c51054"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the reference count of the counter based on it's pool index.  <a href="#a250b156b15dab8b7eae33d8660c51054">More...</a><br /></td></tr>
<tr class="separator:a250b156b15dab8b7eae33d8660c51054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc9091b54da263ea494744a967fbdef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aadc9091b54da263ea494744a967fbdef">decrease_counter_ref_count</a> (size_t index)</td></tr>
<tr class="memdesc:aadc9091b54da263ea494744a967fbdef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreases the reference count of the counter based on it's pool index.  <a href="#aadc9091b54da263ea494744a967fbdef">More...</a><br /></td></tr>
<tr class="separator:aadc9091b54da263ea494744a967fbdef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39cd8441c302062ec01b617cfadb1770"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a> (size_t job_count=1)</td></tr>
<tr class="memdesc:a39cd8441c302062ec01b617cfadb1770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies any workers that a given number of jobs are available for processing.  <a href="#a39cd8441c302062ec01b617cfadb1770">More...</a><br /></td></tr>
<tr class="separator:a39cd8441c302062ec01b617cfadb1770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c826abba451b6559659a38c1770780"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#af0c826abba451b6559659a38c1770780">notify_job_complete</a> ()</td></tr>
<tr class="memdesc:af0c826abba451b6559659a38c1770780"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies any waiting workers that a job has completed.  <a href="#af0c826abba451b6559659a38c1770780">More...</a><br /></td></tr>
<tr class="separator:af0c826abba451b6559659a38c1770780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9665ce530ee3e20e3c14c5419df588"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#acf9665ce530ee3e20e3c14c5419df588">wait_for_job_available</a> ()</td></tr>
<tr class="memdesc:acf9665ce530ee3e20e3c14c5419df588"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until a new job has been singled as being available by <a class="el" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a>.  <a href="#acf9665ce530ee3e20e3c14c5419df588">More...</a><br /></td></tr>
<tr class="separator:acf9665ce530ee3e20e3c14c5419df588"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a063d0a773bb784fd0d9f819af7fd3007"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a063d0a773bb784fd0d9f819af7fd3007">worker_entry_point</a> (size_t pool_index, size_t worker_index, const <a class="el" href="classjobs_1_1internal_1_1thread.html">internal::thread</a> &amp;this_thread, const <a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a> &amp;<a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a>)</td></tr>
<tr class="separator:a063d0a773bb784fd0d9f819af7fd3007"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea0eaf65b9cc9ea8891c4181d73a9bb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aea0eaf65b9cc9ea8891c4181d73a9bb8">worker_fiber_entry_point</a> (size_t pool_index, size_t worker_index)</td></tr>
<tr class="separator:aea0eaf65b9cc9ea8891c4181d73a9bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896ca20cc0db225552c82ee665e16884"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">execute_next_job</a> (<a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a> job_priorities, bool can_block)</td></tr>
<tr class="separator:a896ca20cc0db225552c82ee665e16884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeacf23cc37e1d0f7612942dd63b192ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aeacf23cc37e1d0f7612942dd63b192ba">execute_fiber_job</a> ()</td></tr>
<tr class="memdesc:aeacf23cc37e1d0f7612942dd63b192ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the job assinged to the fiber we are running within.  <a href="#aeacf23cc37e1d0f7612942dd63b192ba">More...</a><br /></td></tr>
<tr class="separator:aeacf23cc37e1d0f7612942dd63b192ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a58f9ff98d6d4e2c3c24647d61048cd2c"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a58f9ff98d6d4e2c3c24647d61048cd2c">default_alloc</a> (size_t size, size_t alignment)</td></tr>
<tr class="separator:a58f9ff98d6d4e2c3c24647d61048cd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ace198fd7b6353e7a9d456f3eab514"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a47ace198fd7b6353e7a9d456f3eab514">default_free</a> (void *ptr)</td></tr>
<tr class="separator:a47ace198fd7b6353e7a9d456f3eab514"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a81fcb4d5296cf957f04a0b6183aff355"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">m_max_jobs</a> = 100</td></tr>
<tr class="separator:a81fcb4d5296cf957f04a0b6183aff355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872a3a68f1f0789b9d199339cf8fc316"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">m_max_dependencies</a> = 100</td></tr>
<tr class="separator:a872a3a68f1f0789b9d199339cf8fc316"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330f25064c543a2f874279d944f9b86f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">m_max_profile_scopes</a> = 1000</td></tr>
<tr class="separator:a330f25064c543a2f874279d944f9b86f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5f8633baac99fbf9e7921bc43fcfcdd"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">m_max_counters</a> = 100</td></tr>
<tr class="separator:ab5f8633baac99fbf9e7921bc43fcfcdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bfc26e1fdfb2e65d55ce9cd000660c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">m_max_callbacks</a> = 100</td></tr>
<tr class="separator:ab8bfc26e1fdfb2e65d55ce9cd000660c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a642e47b6aef2df10a788896907040"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a></td></tr>
<tr class="separator:ac3a642e47b6aef2df10a788896907040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0545f3e1f3cf2dddf58692e6c88d223f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a></td></tr>
<tr class="separator:a0545f3e1f3cf2dddf58692e6c88d223f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6d26a6b0aac897cddb91a72b856ac7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1profile__functions.html">profile_functions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a></td></tr>
<tr class="separator:a5b6d26a6b0aac897cddb91a72b856ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a50fc4288defd2978190d9fb134d96"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a> = 0</td></tr>
<tr class="separator:a22a50fc4288defd2978190d9fb134d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a181c426f090c60646c62b8b5e17bcaed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a> [<a class="el" href="classjobs_1_1scheduler.html#a76c9405d41a3db64ee77ae8a984a5b07">max_thread_pools</a>]</td></tr>
<tr class="separator:a181c426f090c60646c62b8b5e17bcaed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37f417d1a0a5b55e83a9c7013b32d5e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">m_worker_count</a> = 0</td></tr>
<tr class="separator:af37f417d1a0a5b55e83a9c7013b32d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e51d505239e5e75f648dec52f9d2270"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a> = 0</td></tr>
<tr class="separator:a2e51d505239e5e75f648dec52f9d2270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13571318d1a560b9f531bbe974d17431"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1scheduler_1_1fiber__pool.html">fiber_pool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">m_fiber_pools</a> [<a class="el" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a>]</td></tr>
<tr class="separator:a13571318d1a560b9f531bbe974d17431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a1251420c4885c16a08401f540132c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1scheduler_1_1fiber__pool.html">fiber_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a> [<a class="el" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a>]</td></tr>
<tr class="separator:aa6a1251420c4885c16a08401f540132c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace955128ea7c9136f4257283c07b8a02"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a> = false</td></tr>
<tr class="separator:ace955128ea7c9136f4257283c07b8a02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab259d6c0c4495c7a69668ee0e7233b60"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a> = false</td></tr>
<tr class="separator:ab259d6c0c4495c7a69668ee0e7233b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc4e59afcd2021681b8d54e00af263b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">m_platform_fiber_aware</a> = false</td></tr>
<tr class="separator:acdc4e59afcd2021681b8d54e00af263b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a179f88401ebc4aaae6ae13e995af2c2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt; <a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">m_job_pool</a></td></tr>
<tr class="separator:a179f88401ebc4aaae6ae13e995af2c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7909659437dc34269db59f247b05bb8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#ae733fd1ddde20a364fc1cc85de1c6e22">debug_output_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">m_debug_output_function</a> = nullptr</td></tr>
<tr class="separator:aa7909659437dc34269db59f247b05bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6af0e4252b5a99b5172d9123f56bed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aab6af0e4252b5a99b5172d9123f56bed">m_debug_output_max_verbosity</a></td></tr>
<tr class="separator:aab6af0e4252b5a99b5172d9123f56bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad813c5647668bc154072569fb777bd5"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aad813c5647668bc154072569fb777bd5">m_log_format_buffer</a> [<a class="el" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>]</td></tr>
<tr class="separator:aad813c5647668bc154072569fb777bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce557ba6b6073d06b60ee26bb72b38a"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a7ce557ba6b6073d06b60ee26bb72b38a">m_log_buffer</a> [<a class="el" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>]</td></tr>
<tr class="separator:a7ce557ba6b6073d06b60ee26bb72b38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b22587499159b2b807251fc508c26bf"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a1b22587499159b2b807251fc508c26bf">m_log_mutex</a></td></tr>
<tr class="separator:a1b22587499159b2b807251fc508c26bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace011926f543b0610e0de12bb5990f32"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ace011926f543b0610e0de12bb5990f32">m_total_memory_allocated</a> { 0 }</td></tr>
<tr class="separator:ace011926f543b0610e0de12bb5990f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f46380b3692d3b684d4ca2307cf116f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1scheduler_1_1job__queue.html">job_queue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">m_pending_job_queues</a> [(int) <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>]</td></tr>
<tr class="separator:a2f46380b3692d3b684d4ca2307cf116f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae370400b5cfc326c5463042cdefb8c0d"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ae370400b5cfc326c5463042cdefb8c0d">m_task_available_mutex</a></td></tr>
<tr class="separator:ae370400b5cfc326c5463042cdefb8c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3c08cc7b40bdbdb1a7e179b13f739e"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">m_task_available_cvar</a></td></tr>
<tr class="separator:abb3c08cc7b40bdbdb1a7e179b13f739e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b65d121529aeb09d63cc13eb7e2a5e"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a84b65d121529aeb09d63cc13eb7e2a5e">m_task_complete_mutex</a></td></tr>
<tr class="separator:a84b65d121529aeb09d63cc13eb7e2a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cbce0967cbfde909d7fe58945eed62c"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a></td></tr>
<tr class="separator:a7cbce0967cbfde909d7fe58945eed62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85dc67f000622f2d799f94bbaf4725f"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">m_active_job_count</a> { 0 }</td></tr>
<tr class="separator:ae85dc67f000622f2d799f94bbaf4725f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed066fd392f486a19b49d066b5c569b"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">m_available_jobs</a> { 0 }</td></tr>
<tr class="separator:a8ed066fd392f486a19b49d066b5c569b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17aac31dcee25d3e85f8e27676fe6a29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt; <a class="el" href="classjobs_1_1internal_1_1job__dependency.html">internal::job_dependency</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a></td></tr>
<tr class="separator:a17aac31dcee25d3e85f8e27676fe6a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982466ec5c08e893fad09dc717cfca08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt; <a class="el" href="classjobs_1_1internal_1_1counter__definition.html">internal::counter_definition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">m_counter_pool</a></td></tr>
<tr class="separator:a982466ec5c08e893fad09dc717cfca08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b6da662ffe7c4ad231f2d7f3828aa9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjobs_1_1internal_1_1callback__scheduler.html">internal::callback_scheduler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">m_callback_scheduler</a></td></tr>
<tr class="separator:a28b6da662ffe7c4ad231f2d7f3828aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c7666016a7ea672c7dd7983fb7ac2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt; <a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">m_profile_scope_pool</a></td></tr>
<tr class="separator:ad3c7666016a7ea672c7dd7983fb7ac2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacea70ee5e77f2bd04f0339e8e07f129"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classjobs_1_1scheduler_1_1worker__thread__state.html">worker_thread_state</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> = nullptr</td></tr>
<tr class="separator:aacea70ee5e77f2bd04f0339e8e07f129"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a76c9405d41a3db64ee77ae8a984a5b07"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a76c9405d41a3db64ee77ae8a984a5b07">max_thread_pools</a> = 16</td></tr>
<tr class="separator:a76c9405d41a3db64ee77ae8a984a5b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110208ac83f679925bed37dd0f142588"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a> = 16</td></tr>
<tr class="separator:a110208ac83f679925bed37dd0f142588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc191da2d59a7551329f6d1b1f2ba32e"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a> = 256</td></tr>
<tr class="separator:afc191da2d59a7551329f6d1b1f2ba32e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13cff32415ff21626fb1892045591923"><td class="memItemLeft" align="right" valign="top">static thread_local <a class="el" href="classjobs_1_1scheduler.html">scheduler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">m_worker_thread_scheduler</a> {nullptr}</td></tr>
<tr class="separator:a13cff32415ff21626fb1892045591923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90147019f7a194156fb559dd0e5fff0b"><td class="memItemLeft" align="right" valign="top">static thread_local <a class="el" href="classjobs_1_1scheduler_1_1worker__thread__state.html">worker_thread_state</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a90147019f7a194156fb559dd0e5fff0b">m_worker_thread_state</a> {nullptr}</td></tr>
<tr class="separator:a90147019f7a194156fb559dd0e5fff0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49be458491da0ac65c72411aeae881f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ae49be458491da0ac65c72411aeae881f">m_profiling_active</a> = false</td></tr>
<tr class="separator:ae49be458491da0ac65c72411aeae881f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ab2abca9d802342d2f25b08cdb7072b5b"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">job_handle</a></td></tr>
<tr class="separator:ab2abca9d802342d2f25b08cdb7072b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8c75f067ddc5dcca903ffd376761ca"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#adc8c75f067ddc5dcca903ffd376761ca">event_handle</a></td></tr>
<tr class="separator:adc8c75f067ddc5dcca903ffd376761ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b991fc8e13eaf018863c325802748de"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a3b991fc8e13eaf018863c325802748de">counter_handle</a></td></tr>
<tr class="separator:a3b991fc8e13eaf018863c325802748de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d95542317e215cbea1d7b5018bf6011"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a2d95542317e215cbea1d7b5018bf6011">internal::job_context</a></td></tr>
<tr class="separator:a2d95542317e215cbea1d7b5018bf6011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5ba96b6f4196a0b3e93dc0ec0ead37"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#abb5ba96b6f4196a0b3e93dc0ec0ead37">internal::callback_scheduler</a></td></tr>
<tr class="separator:abb5ba96b6f4196a0b3e93dc0ec0ead37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f579c645adc3ffa0ba3dc97993de5f1"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjobs_1_1scheduler.html#a7f579c645adc3ffa0ba3dc97993de5f1">internal::profile_scope_internal</a></td></tr>
<tr class="separator:a7f579c645adc3ffa0ba3dc97993de5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The scheduler is the heart of the library. Its responsible for managing the creation and execution of all threads, fibers and jobs. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00100">100</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8248741d3e59934dda9d269ca9a2e20a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8248741d3e59934dda9d269ca9a2e20a">&#9670;&nbsp;</a></span>scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jobs::scheduler::scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default constructor. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00081">81</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00142">default_alloc()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00152">default_free()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00092">jobs::profile_functions::enter_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00093">jobs::profile_functions::leave_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00767">m_profile_functions</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00761">m_raw_memory_functions</a>, <a class="el" href="jobs__memory_8h_source.html#l00066">jobs::memory_functions::user_alloc</a>, and <a class="el" href="jobs__memory_8h_source.html#l00069">jobs::memory_functions::user_free</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">user_alloc</a> = <a class="code" href="classjobs_1_1scheduler.html#a58f9ff98d6d4e2c3c24647d61048cd2c">default_alloc</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">user_free</a> = <a class="code" href="classjobs_1_1scheduler.html#a47ace198fd7b6353e7a9d456f3eab514">default_free</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a2f6d986b96daed8c73b373d7f8486f8a">enter_scope</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a7f59be8380117272f5b35c7cd3f1f489">leave_scope</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div><div class="ttc" id="structjobs_1_1profile__functions_html_a7f59be8380117272f5b35c7cd3f1f489"><div class="ttname"><a href="structjobs_1_1profile__functions.html#a7f59be8380117272f5b35c7cd3f1f489">jobs::profile_functions::leave_scope</a></div><div class="ttdeci">profile_leave_scope_function leave_scope</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00093">jobs_scheduler.h:93</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a58f9ff98d6d4e2c3c24647d61048cd2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a58f9ff98d6d4e2c3c24647d61048cd2c">jobs::scheduler::default_alloc</a></div><div class="ttdeci">static void * default_alloc(size_t size, size_t alignment)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00142">jobs_scheduler.cpp:142</a></div></div>
<div class="ttc" id="structjobs_1_1profile__functions_html_a2f6d986b96daed8c73b373d7f8486f8a"><div class="ttname"><a href="structjobs_1_1profile__functions.html#a2f6d986b96daed8c73b373d7f8486f8a">jobs::profile_functions::enter_scope</a></div><div class="ttdeci">profile_enter_scope_function enter_scope</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00092">jobs_scheduler.h:92</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a47ace198fd7b6353e7a9d456f3eab514"><div class="ttname"><a href="classjobs_1_1scheduler.html#a47ace198fd7b6353e7a9d456f3eab514">jobs::scheduler::default_free</a></div><div class="ttdeci">static void default_free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00152">jobs_scheduler.cpp:152</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ac3a642e47b6aef2df10a788896907040"><div class="ttname"><a href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">jobs::scheduler::m_raw_memory_functions</a></div><div class="ttdeci">memory_functions m_raw_memory_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00761">jobs_scheduler.h:761</a></div></div>
<div class="ttc" id="structjobs_1_1memory__functions_html_a420a7809544147e4ec1d72b23dc00d21"><div class="ttname"><a href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">jobs::memory_functions::user_alloc</a></div><div class="ttdeci">memory_alloc_function user_alloc</div><div class="ttdef"><b>Definition:</b> <a href="jobs__memory_8h_source.html#l00066">jobs_memory.h:66</a></div></div>
<div class="ttc" id="structjobs_1_1memory__functions_html_a5487fb130e8321e13b38f29dbbbb5908"><div class="ttname"><a href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">jobs::memory_functions::user_free</a></div><div class="ttdeci">memory_free_function user_free</div><div class="ttdef"><b>Definition:</b> <a href="jobs__memory_8h_source.html#l00069">jobs_memory.h:69</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a5b6d26a6b0aac897cddb91a72b856ac7"><div class="ttname"><a href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">jobs::scheduler::m_profile_functions</a></div><div class="ttdeci">profile_functions m_profile_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00767">jobs_scheduler.h:767</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6698750a42bf62bc917b8477d3d476bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6698750a42bf62bc917b8477d3d476bb">&#9670;&nbsp;</a></span>~scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">jobs::scheduler::~scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">90</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::error</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00791">m_destroying</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00779">m_fiber_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00782">m_fiber_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00764">m_memory_functions</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00770">m_thread_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00773">m_thread_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00860">m_worker_thread_states</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00384">jobs::scheduler::thread_pool::pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::scheduler</a>, <a class="el" href="jobs__memory_8h_source.html#l00069">jobs::memory_functions::user_free</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// Wake up all threads.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a>(0xFFFF);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Join all threads.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a>; i++)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        thread_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a>[i];</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; pool.pool.capacity(); j++)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            pool.<a class="code" href="structjobs_1_1scheduler_1_1thread__pool.html#a4b3f9a14e60855a04664cf60ce3f37bc">pool</a>.get_index(j)-&gt;join();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Destroy all fibers</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Allocate fibers.</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a>; i++)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        fiber_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">m_fiber_pools</a>[i];</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; pool.pool.capacity(); j++)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            pool.<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">pool</a>.get_index(j)-&gt;destroy();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// Destroy all worker states.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">user_free</a>(<a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// Platform destruction.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#if defined(JOBS_PLATFORM_PS4)</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// Ensure fiber prx is loaded.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (m_owns_scesysmodule_fiber)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">if</span> (sceSysmoduleUnloadModule(SCE_SYSMODULE_FIBER) != SCE_OK)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">debug_log_verbosity::error</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;failed to unload SCE_SYSMODULE_FIBER&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        m_owns_scesysmodule_fiber = <span class="keyword">false</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a22a50fc4288defd2978190d9fb134d96"><div class="ttname"><a href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">jobs::scheduler::m_thread_pool_count</a></div><div class="ttdeci">size_t m_thread_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00770">jobs_scheduler.h:770</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a39cd8441c302062ec01b617cfadb1770"><div class="ttname"><a href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">jobs::scheduler::notify_job_available</a></div><div class="ttdeci">void notify_job_available(size_t job_count=1)</div><div class="ttdoc">Notifies any workers that a given number of jobs are available for processing. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01640">jobs_scheduler.cpp:1640</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab259d6c0c4495c7a69668ee0e7233b60"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">jobs::scheduler::m_destroying</a></div><div class="ttdeci">bool m_destroying</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00791">jobs_scheduler.h:791</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a13571318d1a560b9f531bbe974d17431"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">jobs::scheduler::m_fiber_pools</a></div><div class="ttdeci">fiber_pool m_fiber_pools[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00782">jobs_scheduler.h:782</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a181c426f090c60646c62b8b5e17bcaed"><div class="ttname"><a href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">jobs::scheduler::m_thread_pools</a></div><div class="ttdeci">thread_pool m_thread_pools[max_thread_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00773">jobs_scheduler.h:773</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1thread__pool_html_a4b3f9a14e60855a04664cf60ce3f37bc"><div class="ttname"><a href="structjobs_1_1scheduler_1_1thread__pool.html#a4b3f9a14e60855a04664cf60ce3f37bc">jobs::scheduler::thread_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::thread &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00384">jobs_scheduler.h:384</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_af9ad963a75aa7621e90ee5b2cc64a113"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">jobs::scheduler::fiber_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::fiber &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00397">jobs_scheduler.h:397</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::debug_log_verbosity::error</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2e51d505239e5e75f648dec52f9d2270"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">jobs::scheduler::m_fiber_pool_count</a></div><div class="ttdeci">size_t m_fiber_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00779">jobs_scheduler.h:779</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::debug_log_group::scheduler</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a0545f3e1f3cf2dddf58692e6c88d223f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">jobs::scheduler::m_memory_functions</a></div><div class="ttdeci">memory_functions m_memory_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00764">jobs_scheduler.h:764</a></div></div>
<div class="ttc" id="structjobs_1_1memory__functions_html_a5487fb130e8321e13b38f29dbbbb5908"><div class="ttname"><a href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">jobs::memory_functions::user_free</a></div><div class="ttdeci">memory_free_function user_free</div><div class="ttdef"><b>Definition:</b> <a href="jobs__memory_8h_source.html#l00069">jobs_memory.h:69</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aacea70ee5e77f2bd04f0339e8e07f129"><div class="ttname"><a href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">jobs::scheduler::m_worker_thread_states</a></div><div class="ttdeci">worker_thread_state * m_worker_thread_states</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00860">jobs_scheduler.h:860</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5dc5dae47a7903d648cb03172b33c9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dc5dae47a7903d648cb03172b33c9d6">&#9670;&nbsp;</a></span>add_fiber_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::add_fiber_pool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fiber_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stack_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new pool of fibers threads to the scheduler. </p>
<p>This creates a new pool of fibers that are used to hold the state of currently executing jobs.</p>
<p>Fibers hold the state of a currently executing job, the maximum concurrently running/sleeping/waiting jobs is equal to that of the number of fibers.</p>
<p>New jobs will always allocate a fiber from the pool with the smallest stack size that fulfills its requested stack size.</p>
<p>Multiple pools with different granularities of stack sizes should be created to reduce the memory overhead. Creating a single large pool with a large stack size will result in unnecessarily high memory usage (as the memory allocated is equal to fiber_count * stack_size).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fiber_count</td><td>Number of fibers to create in the new pool. </td></tr>
    <tr><td class="paramname">stack_size</td><td>Size of the stack each fiber is allocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00277">277</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00394">jobs::scheduler::fiber_pool::fiber_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00779">m_fiber_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00782">m_fiber_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00738">max_fiber_pools</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::maximum_exceeded</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00391">jobs::scheduler::fiber_pool::stack_size</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;{</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a> == <a class="code" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">result::maximum_exceeded</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    fiber_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">m_fiber_pools</a>[<a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a>++];</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    pool.<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#a758609d8a86ce68207e405016d30572a">stack_size</a> = stack_size;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    pool.fiber_count = fiber_count;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a13571318d1a560b9f531bbe974d17431"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">jobs::scheduler::m_fiber_pools</a></div><div class="ttdeci">fiber_pool m_fiber_pools[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00782">jobs_scheduler.h:782</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::result::maximum_exceeded</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a110208ac83f679925bed37dd0f142588"><div class="ttname"><a href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">jobs::scheduler::max_fiber_pools</a></div><div class="ttdeci">static const size_t max_fiber_pools</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00738">jobs_scheduler.h:738</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2e51d505239e5e75f648dec52f9d2270"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">jobs::scheduler::m_fiber_pool_count</a></div><div class="ttdeci">size_t m_fiber_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00779">jobs_scheduler.h:779</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_a758609d8a86ce68207e405016d30572a"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#a758609d8a86ce68207e405016d30572a">jobs::scheduler::fiber_pool::stack_size</a></div><div class="ttdeci">size_t stack_size</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00391">jobs_scheduler.h:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a10f32c7b4e57166acfb7d6a1c89c7e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10f32c7b4e57166acfb7d6a1c89c7e7c">&#9670;&nbsp;</a></span>add_job_dependency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::add_job_dependency </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>successor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>predecessor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a given dependency between two jobs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">successor</td><td>Index of job that should complete last. </td></tr>
    <tr><td class="paramname">predecessor</td><td>Index of job that should complete first.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00717">717</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__job_8h_source.html#l00460">jobs::internal::job_definition::first_predecessor</a>, <a class="el" href="jobs__job_8h_source.html#l00463">jobs::internal::job_definition::first_successor</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__job_8h_source.html#l00509">jobs::internal::job_dependency::job</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00409">job_handle</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00839">m_job_dependency_pool</a>, <a class="el" href="jobs__job_8h_source.html#l00512">jobs::internal::job_dependency::next</a>, <a class="el" href="jobs__job_8h_source.html#l00466">jobs::internal::job_definition::pending_predecessors</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00359">jobs::job_handle::add_predecessor()</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00381">jobs::job_handle::add_successor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    internal::job_definition&amp; successor_def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(successor);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    internal::job_definition&amp; predecessor_def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(predecessor);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordtype">size_t</span> successor_dep_index;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordtype">size_t</span> predecessor_dep_index;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res1 = <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.alloc(successor_dep_index);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res2 = <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.alloc(predecessor_dep_index);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (res1 != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a> || res2 != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;attempt to add job dependency, but dependency pool is empty, if unhandled may cause incorrect job ordering behaviour. Try increasing scheduler::set_max_dependencies.&quot;</span>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">return</span> res1;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    internal::job_dependency* successor_dep = <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.get_index(successor_dep_index);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    successor_dep-&gt;job = <a class="code" href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">job_handle</a>(<span class="keyword">this</span>, successor);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    successor_dep-&gt;next = predecessor_def.first_successor;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    internal::job_dependency* predecessor_dep = <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.get_index(predecessor_dep_index);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    predecessor_dep-&gt;job = <a class="code" href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">job_handle</a>(<span class="keyword">this</span>, predecessor);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    predecessor_dep-&gt;next = successor_def.first_predecessor;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    successor_def.first_predecessor = predecessor_dep;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    predecessor_def.first_successor = successor_dep;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    successor_def.pending_predecessors++;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab2abca9d802342d2f25b08cdb7072b5b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">jobs::scheduler::job_handle</a></div><div class="ttdeci">friend class job_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00409">jobs_scheduler.h:409</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a17aac31dcee25d3e85f8e27676fe6a29"><div class="ttname"><a href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">jobs::scheduler::m_job_dependency_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_dependency &gt; m_job_dependency_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00839">jobs_scheduler.h:839</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0302314dbce01fbb3566c9ffe742adf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0302314dbce01fbb3566c9ffe742adf7">&#9670;&nbsp;</a></span>add_thread_pool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::add_thread_pool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>thread_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a>&#160;</td>
          <td class="paramname"><em>job_priorities</em> = <code><a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428daa181a603769c1f98ad927e7367c7aa51">priority::all</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a new pool of worker threads to the scheduler. </p>
<p>This creates a new pool of worker threads that can execute jobs queued on this scheduler. Thread pools can be assigned multiple job priorities, and will only execute jobs queued with one of these priorities. This can be used to segregate long-running and time-critical work onto different threads.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread_count</td><td>Number of threads to create in the new pool. </td></tr>
    <tr><td class="paramname">job_priorities</td><td>Bitmask of all the job priorities this thread pool will execute.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00259">259</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00378">jobs::scheduler::thread_pool::job_priorities</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00770">m_thread_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00773">m_thread_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00735">max_thread_pools</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::maximum_exceeded</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, and <a class="el" href="jobs__scheduler_8h_source.html#l00381">jobs::scheduler::thread_pool::thread_count</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a> == <a class="code" href="classjobs_1_1scheduler.html#a76c9405d41a3db64ee77ae8a984a5b07">max_thread_pools</a>)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">result::maximum_exceeded</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    thread_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a>[<a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a>++];</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    pool.<a class="code" href="structjobs_1_1scheduler_1_1thread__pool.html#af960aae114a84f70108d593e5f1b2134">job_priorities</a> = job_priorities;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    pool.thread_count = thread_count;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a76c9405d41a3db64ee77ae8a984a5b07"><div class="ttname"><a href="classjobs_1_1scheduler.html#a76c9405d41a3db64ee77ae8a984a5b07">jobs::scheduler::max_thread_pools</a></div><div class="ttdeci">static const size_t max_thread_pools</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00735">jobs_scheduler.h:735</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a22a50fc4288defd2978190d9fb134d96"><div class="ttname"><a href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">jobs::scheduler::m_thread_pool_count</a></div><div class="ttdeci">size_t m_thread_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00770">jobs_scheduler.h:770</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a181c426f090c60646c62b8b5e17bcaed"><div class="ttname"><a href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">jobs::scheduler::m_thread_pools</a></div><div class="ttdeci">thread_pool m_thread_pools[max_thread_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00773">jobs_scheduler.h:773</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::result::maximum_exceeded</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1thread__pool_html_af960aae114a84f70108d593e5f1b2134"><div class="ttname"><a href="structjobs_1_1scheduler_1_1thread__pool.html#af960aae114a84f70108d593e5f1b2134">jobs::scheduler::thread_pool::job_priorities</a></div><div class="ttdeci">priority job_priorities</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00378">jobs_scheduler.h:378</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7c16bd88c8060aadf243e918c8297ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c16bd88c8060aadf243e918c8297ea">&#9670;&nbsp;</a></span>alloc_scope()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::alloc_scope </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a> *&amp;&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocates a profile scope from the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>Reference to storage location of allocated scope.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01504">1504</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00848">m_profile_scope_pool</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00051">jobs::internal::job_context::enter_scope()</a>.</p>
<div class="fragment"><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;{</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="comment">// We maintain a small thread-local list for speedy allocations.</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.profile_scope_cache.pop(output);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <span class="comment">// Otherwise fall back to the main synchronized pool.</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordtype">size_t</span> index = 0;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    res = <a class="code" href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">m_profile_scope_pool</a>.alloc(index);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    output = <a class="code" href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">m_profile_scope_pool</a>.get_index(index);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ad3c7666016a7ea672c7dd7983fb7ac2b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">jobs::scheduler::m_profile_scope_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::profile_scope_definition &gt; m_profile_scope_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00848">jobs_scheduler.h:848</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37680eb51d7cfbe475b77567b90a50a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37680eb51d7cfbe475b77567b90a50a5">&#9670;&nbsp;</a></span>allocate_fiber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::allocate_fiber </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>required_stack_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>fiber_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>fiber_pool_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to allocate a fiber out of the available fiber pools with the required stack size. </p>
<p>Allocation will always be attempted from pools with the smallest stack size first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">required_stack_size</td><td>Minimum stack size required for allocated fiber. </td></tr>
    <tr><td class="paramname">fiber_index</td><td>Reference to store index of allocated fiber. </td></tr>
    <tr><td class="paramname">fiber_pool_index</td><td>Reference to store pool index of allocated fiber.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01278">1278</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::error</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00779">m_fiber_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00785">m_fiber_pools_sorted_by_stack</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::maximum_exceeded</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a45f163e8c4d156fe04532a926a3e4a23">jobs::out_of_fibers</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00391">jobs::scheduler::fiber_pool::stack_size</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordtype">bool</span> any_suitable_pools = <span class="keyword">false</span>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a>; i++)</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        fiber_pool&amp; pool = *<a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[i];</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span> (pool.stack_size &gt;= required_stack_size)</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            any_suitable_pools = <span class="keyword">true</span>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = pool.pool.alloc(fiber_index);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;fiber allocated, pool=%zi index=%zi&quot;</span>, i, fiber_index);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                fiber_pool_index = i;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">if</span> (!any_suitable_pools)</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">debug_log_verbosity::error</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;no fiber pools have large enough stack size to fulfil request for of %zi. job will never complete.&quot;</span>, required_stack_size);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">result::maximum_exceeded</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    }</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a45f163e8c4d156fe04532a926a3e4a23">result::out_of_fibers</a>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;}</div><div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aede5537ddd1b6e284dae602552c4995a">jobs::result::maximum_exceeded</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa6a1251420c4885c16a08401f540132c"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">jobs::scheduler::m_fiber_pools_sorted_by_stack</a></div><div class="ttdeci">fiber_pool * m_fiber_pools_sorted_by_stack[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00785">jobs_scheduler.h:785</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::debug_log_verbosity::error</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a45f163e8c4d156fe04532a926a3e4a23"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a45f163e8c4d156fe04532a926a3e4a23">jobs::result::out_of_fibers</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2e51d505239e5e75f648dec52f9d2270"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">jobs::scheduler::m_fiber_pool_count</a></div><div class="ttdeci">size_t m_fiber_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00779">jobs_scheduler.h:779</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f238503831b8b525189ef84420dc5a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f238503831b8b525189ef84420dc5a5">&#9670;&nbsp;</a></span>clear_job_dependencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::clear_job_dependencies </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>job_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears all the dependencies assigned to the given job index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_index</td><td>Job index to clear dependencies for. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00678">678</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__job_8h_source.html#l00460">jobs::internal::job_definition::first_predecessor</a>, <a class="el" href="jobs__job_8h_source.html#l00463">jobs::internal::job_definition::first_successor</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00839">m_job_dependency_pool</a>, <a class="el" href="jobs__job_8h_source.html#l00512">jobs::internal::job_dependency::next</a>, <a class="el" href="jobs__job_8h_source.html#l00506">jobs::internal::job_dependency::pool_index</a>, and <a class="el" href="jobs__job_8h_source.html#l00498">jobs::internal::job_dependency::reset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00343">jobs::job_handle::clear_dependencies()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">free_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(job_index);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">// Clear up predecessors.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        internal::job_dependency* dep = def.first_predecessor;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">while</span> (dep != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordtype">size_t</span> pool_index = dep-&gt;pool_index;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            internal::job_dependency* next = dep-&gt;next;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            dep-&gt;reset();</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.free(pool_index);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            dep = next;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        def.first_predecessor = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// Clear up successors.</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        internal::job_dependency* dep = def.first_successor;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">while</span> (dep != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordtype">size_t</span> pool_index = dep-&gt;pool_index;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            internal::job_dependency* next = dep-&gt;next;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            dep-&gt;reset();</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.free(pool_index);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            dep = next;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        def.first_successor = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a17aac31dcee25d3e85f8e27676fe6a29"><div class="ttname"><a href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">jobs::scheduler::m_job_dependency_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_dependency &gt; m_job_dependency_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00839">jobs_scheduler.h:839</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c70f317ba5e0da9bfdce9579fbe1095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c70f317ba5e0da9bfdce9579fbe1095">&#9670;&nbsp;</a></span>complete_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::complete_job </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>job_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Completes the given job index. </p>
<p>When called this will perform any completion processing required by the job, this includes waking up successors, incrementing counters and so on.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_index</td><td>Job index to complete. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">1129</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__counter_8cpp_source.html#l00371">jobs::counter_handle::add()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00678">clear_job_dependencies()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::completed</a>, <a class="el" href="jobs__job_8h_source.html#l00420">jobs::internal::job_definition::completion_counter</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00668">decrease_job_ref_count()</a>, <a class="el" href="jobs__job_8h_source.html#l00076">jobs::internal::job_context::fiber_index</a>, <a class="el" href="jobs__job_8h_source.html#l00079">jobs::internal::job_context::fiber_pool_index</a>, <a class="el" href="jobs__job_8h_source.html#l00463">jobs::internal::job_definition::first_successor</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01313">free_fiber()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__job_8h_source.html#l00070">jobs::internal::job_context::has_fiber</a>, <a class="el" href="jobs__job_8h_source.html#l00405">jobs::internal::job_definition::index</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::initialized</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00085">jobs::counter_handle::is_valid()</a>, <a class="el" href="jobs__job_8h_source.html#l00509">jobs::internal::job_dependency::job</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__defines_8h_source.html#l00084">JOBS_YIELD</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00833">m_active_job_count</a>, <a class="el" href="jobs__job_8h_source.html#l00378">jobs::job_handle::m_index</a>, <a class="el" href="jobs__job_8h_source.html#l00512">jobs::internal::job_dependency::next</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01659">notify_job_complete()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__job_8h_source.html#l00466">jobs::internal::job_definition::pending_predecessors</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::running</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="jobs__utils_8h_source.html#l00327">jobs::internal::multiple_writer_single_reader_list&lt; data_type &gt;::iterator::value()</a>, <a class="el" href="jobs__job_8h_source.html#l00453">jobs::internal::job_definition::wait_list</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::waiting_on_job</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;{</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::complete_job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(job_index);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordtype">bool</span> needs_to_wake_up_successors = <span class="keyword">false</span>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    </div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    assert(def.status == <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">internal::job_status::running</a>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    def.status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">internal::job_status::completed</a>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="comment">// For each job waiting on this one, set it back to pending and requeue it.</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        internal::multiple_writer_single_reader_list&lt;internal::job_definition*&gt;::iterator iter;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">for</span> (def.wait_list.iterate(iter); iter; iter++)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            internal::job_definition* wait_def = iter.value();</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> expected = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">internal::job_status::waiting_on_job</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <span class="keywordflow">if</span> (wait_def-&gt;status.compare_exchange_strong(expected, <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>))</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(wait_def-&gt;index);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        }        </div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// For each successor, reduce its pending predecessor count.</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    internal::job_dependency* dep = def.first_successor;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">while</span> (dep != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        internal::job_definition&amp; successor_def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(dep-&gt;job.m_index);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordtype">size_t</span> num = --successor_def.pending_predecessors;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">if</span> (num &lt;= 0)</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="comment">// Successor is still waiting on dispatch. We can&#39;t enqueue it until its </span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">// initial setup has completed.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;            <span class="keywordflow">while</span> (successor_def.status == <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">internal::job_status::initialized</a>)</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <span class="comment">// Note: if this is showing up in your profiles, you&#39;ve fucked up somewhere and not dispatched a dependent job.</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <a class="code" href="jobs__defines_8h.html#ad25490b9710e5968c1734ec11a88abc6">JOBS_YIELD</a>();</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(successor_def.index);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            needs_to_wake_up_successors = <span class="keyword">true</span>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        dep = dep-&gt;next;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="comment">// Clear up the fiber now, even if our handle is going to hang around for a while.</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">if</span> (def.context.has_fiber)</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a19ea9be8de4c2ca7a07547dd133760c1">free_fiber</a>(def.context.fiber_index, def.context.fiber_pool_index);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        def.context.has_fiber = <span class="keyword">false</span>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="comment">// Clean up dependencies, we no longer need them at this point.</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a7f238503831b8b525189ef84420dc5a5">clear_job_dependencies</a>(job_index);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="comment">// Increase the completion counter.</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">if</span> (def.completion_counter.is_valid())</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        def.completion_counter.add(1);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="comment">// Remove the ref count we added on dispatch.</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4edfdfa7c00e4e3cd2b7f80ef99f4e7b">decrease_job_ref_count</a>(job_index);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="comment">// Keep track of number of active jobs for idle monitoring. </span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">m_active_job_count</a>--;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// Wake up anyone waiting for tasks to complete.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#af0c826abba451b6559659a38c1770780">notify_job_complete</a>();</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::job_status::initialized</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a19ea9be8de4c2ca7a07547dd133760c1"><div class="ttname"><a href="classjobs_1_1scheduler.html#a19ea9be8de4c2ca7a07547dd133760c1">jobs::scheduler::free_fiber</a></div><div class="ttdeci">result free_fiber(size_t fiber_index, size_t fiber_pool_index)</div><div class="ttdoc">Frees a fiber allocated with allocate_fiber, so it can be recycled later. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01313">jobs_scheduler.cpp:1313</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aed591baef6580ec5c3c1e0ba9901b278"><div class="ttname"><a href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">jobs::scheduler::requeue_job</a></div><div class="ttdeci">result requeue_job(size_t index)</div><div class="ttdoc">Requeues a job that has previously been picked up for execution. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01016">jobs_scheduler.cpp:1016</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae85dc67f000622f2d799f94bbaf4725f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">jobs::scheduler::m_active_job_count</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_active_job_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00833">jobs_scheduler.h:833</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::job_status::running</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::job_status::completed</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4edfdfa7c00e4e3cd2b7f80ef99f4e7b"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4edfdfa7c00e4e3cd2b7f80ef99f4e7b">jobs::scheduler::decrease_job_ref_count</a></div><div class="ttdeci">void decrease_job_ref_count(size_t index)</div><div class="ttdoc">Decreases the reference count of the job based on it&amp;#39;s pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00668">jobs_scheduler.cpp:668</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::job_status::waiting_on_job</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_af0c826abba451b6559659a38c1770780"><div class="ttname"><a href="classjobs_1_1scheduler.html#af0c826abba451b6559659a38c1770780">jobs::scheduler::notify_job_complete</a></div><div class="ttdeci">void notify_job_complete()</div><div class="ttdoc">Notifies any waiting workers that a job has completed. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01659">jobs_scheduler.cpp:1659</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_ad25490b9710e5968c1734ec11a88abc6"><div class="ttname"><a href="jobs__defines_8h.html#ad25490b9710e5968c1734ec11a88abc6">JOBS_YIELD</a></div><div class="ttdeci">#define JOBS_YIELD()</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00084">jobs_defines.h:84</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a7f238503831b8b525189ef84420dc5a5"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7f238503831b8b525189ef84420dc5a5">jobs::scheduler::clear_job_dependencies</a></div><div class="ttdeci">void clear_job_dependencies(size_t job_index)</div><div class="ttdoc">Clears all the dependencies assigned to the given job index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00678">jobs_scheduler.cpp:678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71779aafde74ca64c59956fb3223a562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71779aafde74ca64c59956fb3223a562">&#9670;&nbsp;</a></span>create_counter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::create_counter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1counter__handle.html">counter_handle</a> &amp;&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new counter that can be used for job syncronization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>On success the created counter will be stored here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">569</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00411">counter_handle</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00650">get_counter_definition()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00842">m_counter_pool</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::scheduler</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00555">create_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;{</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordtype">size_t</span> index = 0;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">m_counter_pool</a>.alloc(index);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;attempt to create counter, but counter pool is empty. Try increasing scheduler::set_max_counters.&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    internal::counter_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">get_counter_definition</a>(index);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    instance = <a class="code" href="classjobs_1_1scheduler.html#a3b991fc8e13eaf018863c325802748de">counter_handle</a>(<span class="keyword">this</span>, index);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a1a96ca2d832abfbf75b1b4b6ec856344"><div class="ttname"><a href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">jobs::scheduler::get_counter_definition</a></div><div class="ttdeci">internal::counter_definition &amp; get_counter_definition(size_t index)</div><div class="ttdoc">Gets a counter definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00650">jobs_scheduler.h:650</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a982466ec5c08e893fad09dc717cfca08"><div class="ttname"><a href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">jobs::scheduler::m_counter_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::counter_definition &gt; m_counter_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00842">jobs_scheduler.h:842</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a3b991fc8e13eaf018863c325802748de"><div class="ttname"><a href="classjobs_1_1scheduler.html#a3b991fc8e13eaf018863c325802748de">jobs::scheduler::counter_handle</a></div><div class="ttdeci">friend class counter_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00411">jobs_scheduler.h:411</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::debug_log_group::scheduler</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a707d218b879eec037670e5cf3bf6e09b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a707d218b879eec037670e5cf3bf6e09b">&#9670;&nbsp;</a></span>create_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::create_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1event__handle.html">event_handle</a> &amp;&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>auto_reset</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new event that can be used for job syncronization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>On success the created event will be stored here. </td></tr>
    <tr><td class="paramname">auto_reset</td><td>If the event automatically resets after being signalled, or needs to be manually reset.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00555">555</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">create_counter()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00410">event_handle</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a3b991fc8e13eaf018863c325802748de">counter_handle</a> counter;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a71779aafde74ca64c59956fb3223a562">create_counter</a>(counter);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    instance = <a class="code" href="classjobs_1_1scheduler.html#adc8c75f067ddc5dcca903ffd376761ca">event_handle</a>(<span class="keyword">this</span>, counter, auto_reset);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a71779aafde74ca64c59956fb3223a562"><div class="ttname"><a href="classjobs_1_1scheduler.html#a71779aafde74ca64c59956fb3223a562">jobs::scheduler::create_counter</a></div><div class="ttdeci">result create_counter(counter_handle &amp;instance)</div><div class="ttdoc">Creates a new counter that can be used for job syncronization. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00569">jobs_scheduler.cpp:569</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a3b991fc8e13eaf018863c325802748de"><div class="ttname"><a href="classjobs_1_1scheduler.html#a3b991fc8e13eaf018863c325802748de">jobs::scheduler::counter_handle</a></div><div class="ttdeci">friend class counter_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00411">jobs_scheduler.h:411</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_adc8c75f067ddc5dcca903ffd376761ca"><div class="ttname"><a href="classjobs_1_1scheduler.html#adc8c75f067ddc5dcca903ffd376761ca">jobs::scheduler::event_handle</a></div><div class="ttdeci">friend class event_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00410">jobs_scheduler.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb677b86975a1ce1d9e6cee58669d5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb677b86975a1ce1d9e6cee58669d5e6">&#9670;&nbsp;</a></span>create_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::create_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1job__handle.html">job_handle</a> &amp;&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new job that can later be enqueued for execution. </p>
<p>Ones a job is fully created and setup, it can be queued for execution by calling queue_job.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>On success the created job will be stored here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00524">524</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00409">job_handle</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00797">m_job_pool</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::scheduler</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordtype">size_t</span> index = 0;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">m_job_pool</a>.alloc(index);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;attempt to create job, but job pool is empty. Try increasing scheduler::set_max_jobs.&quot;</span>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    instance = <a class="code" href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">job_handle</a>(<span class="keyword">this</span>, index);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;}</div><div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::debug_log_group::scheduler</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab2abca9d802342d2f25b08cdb7072b5b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">jobs::scheduler::job_handle</a></div><div class="ttdeci">friend class job_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00409">jobs_scheduler.h:409</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a179f88401ebc4aaae6ae13e995af2c2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">jobs::scheduler::m_job_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_definition &gt; m_job_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00797">jobs_scheduler.h:797</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aadc9091b54da263ea494744a967fbdef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadc9091b54da263ea494744a967fbdef">&#9670;&nbsp;</a></span>decrease_counter_ref_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::decrease_counter_ref_count </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreases the reference count of the counter based on it's pool index. </p>
<p>If the reference count goes to 0 the counter will be automatically freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of counter to decrement ref count of. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00600">600</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00586">free_counter()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00650">get_counter_definition()</a>, and <a class="el" href="jobs__counter_8h_source.html#l00064">jobs::internal::counter_definition::ref_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00098">jobs::counter_handle::decrease_ref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    internal::counter_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">get_counter_definition</a>(index);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordtype">size_t</span> new_ref_count = --def.ref_count;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (new_ref_count == 0)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#ad7d1c0b09977654670571314c5e99004">free_counter</a>(index);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a1a96ca2d832abfbf75b1b4b6ec856344"><div class="ttname"><a href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">jobs::scheduler::get_counter_definition</a></div><div class="ttdeci">internal::counter_definition &amp; get_counter_definition(size_t index)</div><div class="ttdoc">Gets a counter definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00650">jobs_scheduler.h:650</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ad7d1c0b09977654670571314c5e99004"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad7d1c0b09977654670571314c5e99004">jobs::scheduler::free_counter</a></div><div class="ttdeci">void free_counter(size_t index)</div><div class="ttdoc">Free&amp;#39;s a counter based on its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00586">jobs_scheduler.cpp:586</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4edfdfa7c00e4e3cd2b7f80ef99f4e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4edfdfa7c00e4e3cd2b7f80ef99f4e7b">&#9670;&nbsp;</a></span>decrease_job_ref_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::decrease_job_ref_count </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreases the reference count of the job based on it's pool index. </p>
<p>If the reference count goes to 0 the job will be automatically freed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of counter to decrement ref count of. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00668">668</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">free_job()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, and <a class="el" href="jobs__job_8h_source.html#l00408">jobs::internal::job_definition::ref_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00247">jobs::job_handle::decrease_ref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">size_t</span> new_ref_count = def.ref_count.fetch_sub(1, std::memory_order_relaxed) - 1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (new_ref_count == 0)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#abcabed37fd81828cbf21acff4a81b496">free_job</a>(index);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_abcabed37fd81828cbf21acff4a81b496"><div class="ttname"><a href="classjobs_1_1scheduler.html#abcabed37fd81828cbf21acff4a81b496">jobs::scheduler::free_job</a></div><div class="ttdeci">void free_job(size_t index)</div><div class="ttdoc">Free&amp;#39;s a job based on its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00541">jobs_scheduler.cpp:541</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58f9ff98d6d4e2c3c24647d61048cd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f9ff98d6d4e2c3c24647d61048cd2c">&#9670;&nbsp;</a></span>default_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * jobs::scheduler::default_alloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default memory allocation function </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00142">142</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00081">scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#if defined(JOBS_PLATFORM_WINDOWS) || defined(JOBS_PLATFORM_XBOX_ONE)</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">void</span>* ptr = _aligned_malloc(size, alignment);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">void</span>* ptr = memalign(alignment, size);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> ptr;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a47ace198fd7b6353e7a9d456f3eab514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47ace198fd7b6353e7a9d456f3eab514">&#9670;&nbsp;</a></span>default_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::default_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default memory deallocation function </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00152">152</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00081">scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">#if defined(JOBS_PLATFORM_WINDOWS) || defined(JOBS_PLATFORM_XBOX_ONE)</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    _aligned_free(ptr);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    free(ptr);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a5f413f28876852e06468815ec6aee8e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f413f28876852e06468815ec6aee8e6">&#9670;&nbsp;</a></span>dispatch_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::dispatch_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1job__handle.html">job_handle</a> *&#160;</td>
          <td class="paramname"><em>job_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dispatches multiple jobs for execution in a single go. </p>
<p>This function combines the overhead for dispatching jobs, reducing the overall cost to a minimum.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_array</td><td>Pointer to array of jobs to dispatch. </td></tr>
    <tr><td class="paramname">count</td><td>Number of jobs in array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">902</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">jobs::already_dispatched</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::completed</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00662">increase_job_ref_count()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::initialized</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__job_8h_source.html#l00100">jobs::internal::job_context::job_def</a>, <a class="el" href="jobs__job_8h_source.html#l00417">jobs::internal::job_definition::job_priority</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00833">m_active_job_count</a>, <a class="el" href="jobs__job_8h_source.html#l00378">jobs::job_handle::m_index</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__job_8h_source.html#l00085">jobs::internal::job_context::queues_contained_in</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00939">requeue_job_batch()</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::dispatch_batch&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordtype">size_t</span> job_queues = 0;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// Jobs always get an extra ref count until they are complete so they don&#39;t get freed while running.</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a>; i++)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordtype">size_t</span> index = job_array[i].m_index;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> status = def.status.load(std::memory_order_relaxed);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="keywordflow">if</span> (status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">internal::job_status::initialized</a> &amp;&amp;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">internal::job_status::completed</a>)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;attempt to dispatch job that is still running, index=%zi&quot;</span>, index);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">result::already_dispatched</a>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#aa76d1476f6a079b49613ff487f4fe5fc">increase_job_ref_count</a>(index);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        def.status.store(<a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>, std::memory_order_relaxed);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        def.context.queues_contained_in = 0;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        def.context.job_def = &amp;def;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        job_queues |= (size_t)def.job_priority;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="comment">// Keep track of number of active jobs for idle monitoring. </span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">m_active_job_count</a>.fetch_add(count);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Dispatch valid jobs.</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a05476e808d034d026924970fc9a2552a">requeue_job_batch</a>(job_array, count, job_queues);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a05476e808d034d026924970fc9a2552a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a05476e808d034d026924970fc9a2552a">jobs::scheduler::requeue_job_batch</a></div><div class="ttdeci">result requeue_job_batch(job_handle *job_array, size_t count, size_t job_queues)</div><div class="ttdoc">Requeues a quantity of jobs that have previously been picked up for execution. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00939">jobs_scheduler.cpp:939</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::job_status::initialized</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae85dc67f000622f2d799f94bbaf4725f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">jobs::scheduler::m_active_job_count</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_active_job_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00833">jobs_scheduler.h:833</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa76d1476f6a079b49613ff487f4fe5fc"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa76d1476f6a079b49613ff487f4fe5fc">jobs::scheduler::increase_job_ref_count</a></div><div class="ttdeci">void increase_job_ref_count(size_t index)</div><div class="ttdoc">Increases the reference count of the job based on it&amp;#39;s pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00662">jobs_scheduler.cpp:662</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::job_status::completed</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">jobs::result::already_dispatched</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9bb931be59ebef58a026d292362ad68d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bb931be59ebef58a026d292362ad68d">&#9670;&nbsp;</a></span>dispatch_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::dispatch_job </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dispatches a job for execution given it's pool index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of job to dispatch.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">865</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">jobs::already_dispatched</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::completed</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00662">increase_job_ref_count()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::initialized</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__job_8h_source.html#l00100">jobs::internal::job_context::job_def</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00833">m_active_job_count</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__job_8h_source.html#l00466">jobs::internal::job_definition::pending_predecessors</a>, <a class="el" href="jobs__job_8h_source.html#l00085">jobs::internal::job_context::queues_contained_in</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00464">jobs::job_handle::dispatch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::dispatch_job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> status = def.status.load(std::memory_order_relaxed);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">internal::job_status::initialized</a> &amp;&amp;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">internal::job_status::completed</a>)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;attempt to dispatch job that is still running, index=%zi&quot;</span>, index);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">result::already_dispatched</a>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;dispatching job, index=%zi&quot;</span>, index);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="comment">// Jobs always get an extra ref count until they are complete so they don&#39;t get freed while running.</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#aa76d1476f6a079b49613ff487f4fe5fc">increase_job_ref_count</a>(index);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    def.status.store(<a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>, std::memory_order_relaxed);</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    def.context.queues_contained_in = 0;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    def.context.job_def = &amp;def;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">// Keep track of number of active jobs for idle monitoring. </span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">m_active_job_count</a>++;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// If not dependent on anything, enqueue into queues right now.</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// Put job into a job queue for each priority it holds (not sure why you would want multiple priorities, but might as well support it ...).</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (def.pending_predecessors == 0)</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(index);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div><div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a84d10a1ed612e61dbf6880f6e3ee533a">jobs::internal::job_status::initialized</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aed591baef6580ec5c3c1e0ba9901b278"><div class="ttname"><a href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">jobs::scheduler::requeue_job</a></div><div class="ttdeci">result requeue_job(size_t index)</div><div class="ttdoc">Requeues a job that has previously been picked up for execution. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01016">jobs_scheduler.cpp:1016</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae85dc67f000622f2d799f94bbaf4725f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">jobs::scheduler::m_active_job_count</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_active_job_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00833">jobs_scheduler.h:833</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa76d1476f6a079b49613ff487f4fe5fc"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa76d1476f6a079b49613ff487f4fe5fc">jobs::scheduler::increase_job_ref_count</a></div><div class="ttdeci">void increase_job_ref_count(size_t index)</div><div class="ttdoc">Increases the reference count of the job based on it&amp;#39;s pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00662">jobs_scheduler.cpp:662</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::job_status::completed</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aaa9517947464c473d7ee99ec0af21484">jobs::result::already_dispatched</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab7e3db0510cdfd55bcf9b0169ed69495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7e3db0510cdfd55bcf9b0169ed69495">&#9670;&nbsp;</a></span>enter_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::enter_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;&#160;</td>
          <td class="paramname"><em>new_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enters the given job execution context. </p>
<p>Entering a context performs various bits of cleanup worker, such as pushing profiler markers onto the thread stack and resuming from where the context fiber left of.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_context</td><td>Context to enter. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00622">622</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00092">jobs::profile_functions::enter_scope</a>, <a class="el" href="jobs__job_8h_source.html#l00076">jobs::internal::job_context::fiber_index</a>, <a class="el" href="jobs__job_8h_source.html#l00079">jobs::internal::job_context::fiber_pool_index</a>, <a class="el" href="jobs__job_8h_source.html#l00073">jobs::internal::job_context::is_fiber_raw</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00785">m_fiber_pools_sorted_by_stack</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00794">m_platform_fiber_aware</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00767">m_profile_functions</a>, <a class="el" href="jobs__job_8h_source.html#l00534">jobs::internal::profile_scope_definition::next</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, <a class="el" href="jobs__job_8h_source.html#l00091">jobs::internal::job_context::profile_stack_head</a>, <a class="el" href="jobs__job_8h_source.html#l00082">jobs::internal::job_context::raw_fiber</a>, <a class="el" href="jobs__fiber_8cpp_source.html#l00188">jobs::internal::fiber::switch_to()</a>, <a class="el" href="jobs__job_8h_source.html#l00531">jobs::internal::profile_scope_definition::tag</a>, <a class="el" href="jobs__job_8h_source.html#l00525">jobs::internal::profile_scope_definition::type</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    internal::fiber* job_fiber = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">if</span> (context.is_fiber_raw)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        job_fiber = &amp;context.raw_fiber;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }   </div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        job_fiber = <a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[context.fiber_pool_index]-&gt;<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">pool</a>.get_index(context.fiber_index);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="comment">// Recreate the profile scope stack.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a2f6d986b96daed8c73b373d7f8486f8a">enter_scope</a> != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code" href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">m_platform_fiber_aware</a>)</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        internal::profile_scope_definition* scope = context.profile_stack_head;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">while</span> (scope != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a2f6d986b96daed8c73b373d7f8486f8a">enter_scope</a>(scope-&gt;type, scope-&gt;tag);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            scope = scope-&gt;next;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.active_job_context = &amp;context;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    job_fiber-&gt;switch_to();</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="ttc" id="structjobs_1_1profile__functions_html_a2f6d986b96daed8c73b373d7f8486f8a"><div class="ttname"><a href="structjobs_1_1profile__functions.html#a2f6d986b96daed8c73b373d7f8486f8a">jobs::profile_functions::enter_scope</a></div><div class="ttdeci">profile_enter_scope_function enter_scope</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00092">jobs_scheduler.h:92</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa6a1251420c4885c16a08401f540132c"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">jobs::scheduler::m_fiber_pools_sorted_by_stack</a></div><div class="ttdeci">fiber_pool * m_fiber_pools_sorted_by_stack[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00785">jobs_scheduler.h:785</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_af9ad963a75aa7621e90ee5b2cc64a113"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">jobs::scheduler::fiber_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::fiber &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00397">jobs_scheduler.h:397</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_acdc4e59afcd2021681b8d54e00af263b"><div class="ttname"><a href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">jobs::scheduler::m_platform_fiber_aware</a></div><div class="ttdeci">bool m_platform_fiber_aware</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00794">jobs_scheduler.h:794</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a5b6d26a6b0aac897cddb91a72b856ac7"><div class="ttname"><a href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">jobs::scheduler::m_profile_functions</a></div><div class="ttdeci">profile_functions m_profile_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00767">jobs_scheduler.h:767</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeacf23cc37e1d0f7612942dd63b192ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeacf23cc37e1d0f7612942dd63b192ba">&#9670;&nbsp;</a></span>execute_fiber_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::execute_fiber_job </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes the job assinged to the fiber we are running within. </p>
<p>Warning: This is set to force no-inlne to ensure thread_local variables read inside it are not cached on the stack between invocation, which can be problematic with fibers which may return/re-enter at unknown points, which can cause the compiler to cache variables for incorrect lifetimes. This is not needed on windows as we use the /GT flag to enable fiber-safe optimizations. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00840">840</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00075">jobs::scheduler::worker_thread_state::active_job_context</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00063">jobs::scheduler::worker_thread_state::cloned_job_index</a>, <a class="el" href="jobs__job_8cpp_source.html#l00051">jobs::internal::job_context::enter_scope()</a>, <a class="el" href="namespacejobs.html#afdb0e672913d957f6e6bd08cbd8c5888ad4f02db936f820f977dfde0eb98aa03b">jobs::fiber</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00066">jobs::scheduler::worker_thread_state::job_completed</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00060">jobs::scheduler::worker_thread_state::job_index</a>, <a class="el" href="jobs__job_8cpp_source.html#l00101">jobs::internal::job_context::leave_scope()</a>, <a class="el" href="jobs__job_8h_source.html#l00475">jobs::internal::job_definition::tag</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="jobs__job_8h_source.html#l00411">jobs::internal::job_definition::work</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00824">worker_fiber_entry_point()</a>.</p>
<div class="fragment"><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;{</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    worker_thread_state&amp; state = <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(state.job_index);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="comment">// Execute the job assigned to this thread.</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;executing job, state=%p index=%zi/%zi&quot;</span>, &amp;state, state.job_index, state.cloned_job_index.load());</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    state.active_job_context-&gt;enter_scope(<a class="code" href="namespacejobs.html#afdb0e672913d957f6e6bd08cbd8c5888ad4f02db936f820f977dfde0eb98aa03b">profile_scope_type::fiber</a>, <span class="keyword">true</span>, def.tag);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    def.work();</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// Execute the job assigned to this thread.</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;finished executing job, state=%p index=%zi/%zi&quot;</span>, &amp;state, state.job_index, state.cloned_job_index.load());</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    state.job_completed = <span class="keyword">true</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    state.active_job_context-&gt;leave_scope();</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div><div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="namespacejobs_html_afdb0e672913d957f6e6bd08cbd8c5888ad4f02db936f820f977dfde0eb98aa03b"><div class="ttname"><a href="namespacejobs.html#afdb0e672913d957f6e6bd08cbd8c5888ad4f02db936f820f977dfde0eb98aa03b">jobs::profile_scope_type::fiber</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a896ca20cc0db225552c82ee665e16884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896ca20cc0db225552c82ee665e16884">&#9670;&nbsp;</a></span>execute_next_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::execute_next_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a>&#160;</td>
          <td class="paramname"><em>job_priorities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Executes the next job in the work queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_priorities</td><td>Bitmask of priorities that can be executed. </td></tr>
    <tr><td class="paramname">can_block</td><td>True if the function can block until a job is available to execute.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a job was executed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">1206</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l01278">allocate_fiber()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="jobs__job_8h_source.html#l00076">jobs::internal::job_context::fiber_index</a>, <a class="el" href="jobs__job_8h_source.html#l00079">jobs::internal::job_context::fiber_pool_index</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">get_next_job()</a>, <a class="el" href="jobs__job_8h_source.html#l00070">jobs::internal::job_context::has_fiber</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00060">jobs::scheduler::worker_thread_state::job_index</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00785">m_fiber_pools_sorted_by_stack</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="jobs__job_8h_source.html#l00414">jobs::internal::job_definition::stack_size</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::warning</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">wait_until_idle()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00793">worker_entry_point()</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keyword">auto</span>&amp; thread_state = <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Grab next job to run.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordtype">size_t</span> job_index;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a41389866549193a8cc88af8ffc059bb8">get_next_job</a>(job_index, job_priorities, can_block))</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    {</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(job_index);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="comment">// If job does not have a fiber allocated, grab a fiber to run job on.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">if</span> (!def.context.has_fiber)</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a37680eb51d7cfbe475b77567b90a50a5">allocate_fiber</a>(def.stack_size, def.context.fiber_index, def.context.fiber_pool_index);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="keywordflow">if</span> (res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                def.context.has_fiber = <span class="keyword">true</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">debug_log_verbosity::warning</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;requeuing job as no fibers available, index=%zi&quot;</span>, job_index);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                <span class="comment">// @todo: don&#39;t requeue, this results in churn, put it in a queue to be requeued on job-completion.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                <span class="comment">// No fiber available? Back into the queue you go.</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(job_index);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                <span class="comment">// There is further work to do so return true here.</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// Perform the old switcharoo to fiber land.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        thread_state.job_index = job_index;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        thread_state.cloned_job_index = job_index;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        thread_state.job_completed = <span class="keyword">false</span>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        thread_state.job_supress_requeue = <span class="keyword">false</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        internal::fiber* job_fiber = <a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[def.context.fiber_pool_index]-&gt;<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">pool</a>.get_index(def.context.fiber_index);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;switching state=%p job=%zi/%zi fiber=%zi:%zi&quot;</span>, &amp;thread_state, thread_state.job_index, thread_state.cloned_job_index.load(), def.context.fiber_pool_index, def.context.fiber_index);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">switch_context</a>(def.context);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;returning from state=%p job=%zi/%zi fiber=%zi:%zi completed=%s&quot;</span>, &amp;thread_state, thread_state.job_index, thread_state.cloned_job_index.load(), def.context.fiber_pool_index, def.context.fiber_index, thread_state.job_completed ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="comment">// If not complete yet, requeue, we probably have some sync point/dependencies to deal with.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <span class="keywordflow">if</span> (!thread_state.job_completed)</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">if</span> (!thread_state.job_supress_requeue)</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                <span class="comment">// No fiber available? Back into the queue you go.</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(thread_state.job_index);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="comment">// There is further work to do so return true here.</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;        </div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="comment">// Else mark as completed.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        {</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a7c70f317ba5e0da9bfdce9579fbe1095">complete_job</a>(thread_state.job_index);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        </div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_aed591baef6580ec5c3c1e0ba9901b278"><div class="ttname"><a href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">jobs::scheduler::requeue_job</a></div><div class="ttdeci">result requeue_job(size_t index)</div><div class="ttdoc">Requeues a job that has previously been picked up for execution. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01016">jobs_scheduler.cpp:1016</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a7c70f317ba5e0da9bfdce9579fbe1095"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7c70f317ba5e0da9bfdce9579fbe1095">jobs::scheduler::complete_job</a></div><div class="ttdeci">void complete_job(size_t job_index)</div><div class="ttdoc">Completes the given job index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01129">jobs_scheduler.cpp:1129</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a41389866549193a8cc88af8ffc059bb8"><div class="ttname"><a href="classjobs_1_1scheduler.html#a41389866549193a8cc88af8ffc059bb8">jobs::scheduler::get_next_job</a></div><div class="ttdeci">bool get_next_job(size_t &amp;job_index, priority priorities, bool can_block)</div><div class="ttdoc">Gets the next available job from the highest priority queue available. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01093">jobs_scheduler.cpp:1093</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa6a1251420c4885c16a08401f540132c"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">jobs::scheduler::m_fiber_pools_sorted_by_stack</a></div><div class="ttdeci">fiber_pool * m_fiber_pools_sorted_by_stack[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00785">jobs_scheduler.h:785</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_af9ad963a75aa7621e90ee5b2cc64a113"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">jobs::scheduler::fiber_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::fiber &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00397">jobs_scheduler.h:397</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a37680eb51d7cfbe475b77567b90a50a5"><div class="ttname"><a href="classjobs_1_1scheduler.html#a37680eb51d7cfbe475b77567b90a50a5">jobs::scheduler::allocate_fiber</a></div><div class="ttdeci">result allocate_fiber(size_t required_stack_size, size_t &amp;fiber_index, size_t &amp;fiber_pool_index)</div><div class="ttdoc">Attempts to allocate a fiber out of the available fiber pools with the required stack size...</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01278">jobs_scheduler.cpp:1278</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a74f392116598e66d59d254ab5557591a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">jobs::scheduler::switch_context</a></div><div class="ttdeci">void switch_context(internal::job_context &amp;new_context)</div><div class="ttdoc">Switches from current job execution context to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00650">jobs_scheduler.cpp:650</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa7b83d3f08fa392b79e3f553b585971cd">jobs::debug_log_verbosity::warning</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7d1c0b09977654670571314c5e99004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7d1c0b09977654670571314c5e99004">&#9670;&nbsp;</a></span>free_counter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::free_counter </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free's a counter based on its pool index. </p>
<p>The counter will be recycled later.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of counter to free. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00586">586</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00650">get_counter_definition()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00842">m_counter_pool</a>, and <a class="el" href="jobs__counter_8cpp_source.html#l00041">jobs::internal::counter_definition::reset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00600">decrease_counter_ref_count()</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;{</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    internal::counter_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">get_counter_definition</a>(index);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    def.reset();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">m_counter_pool</a>.free(index);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a1a96ca2d832abfbf75b1b4b6ec856344"><div class="ttname"><a href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">jobs::scheduler::get_counter_definition</a></div><div class="ttdeci">internal::counter_definition &amp; get_counter_definition(size_t index)</div><div class="ttdoc">Gets a counter definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00650">jobs_scheduler.h:650</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a982466ec5c08e893fad09dc717cfca08"><div class="ttname"><a href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">jobs::scheduler::m_counter_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::counter_definition &gt; m_counter_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00842">jobs_scheduler.h:842</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19ea9be8de4c2ca7a07547dd133760c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ea9be8de4c2ca7a07547dd133760c1">&#9670;&nbsp;</a></span>free_fiber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::free_fiber </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fiber_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fiber_pool_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees a fiber allocated with <a class="el" href="classjobs_1_1scheduler.html#a37680eb51d7cfbe475b77567b90a50a5">allocate_fiber</a>, so it can be recycled later. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fiber_index</td><td>Index of allocated fiber. </td></tr>
    <tr><td class="paramname">fiber_pool_index</td><td>Pool index of allocated fiber.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01313">1313</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00785">m_fiber_pools_sorted_by_stack</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">free_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;{</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    fiber_pool&amp; pool = *<a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[fiber_pool_index];</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    pool.<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">pool</a>.free(fiber_index);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_aa6a1251420c4885c16a08401f540132c"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">jobs::scheduler::m_fiber_pools_sorted_by_stack</a></div><div class="ttdeci">fiber_pool * m_fiber_pools_sorted_by_stack[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00785">jobs_scheduler.h:785</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_af9ad963a75aa7621e90ee5b2cc64a113"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">jobs::scheduler::fiber_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::fiber &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00397">jobs_scheduler.h:397</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abcabed37fd81828cbf21acff4a81b496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcabed37fd81828cbf21acff4a81b496">&#9670;&nbsp;</a></span>free_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::free_job </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free's a job based on its pool index. </p>
<p>The job will bre recycled later.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of job to free. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">541</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00678">clear_job_dependencies()</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="jobs__job_8h_source.html#l00076">jobs::internal::job_context::fiber_index</a>, <a class="el" href="jobs__job_8h_source.html#l00079">jobs::internal::job_context::fiber_pool_index</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01313">free_fiber()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__job_8h_source.html#l00070">jobs::internal::job_context::has_fiber</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00797">m_job_pool</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00134">jobs::internal::job_definition::reset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00668">decrease_job_ref_count()</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (def.context.has_fiber)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a19ea9be8de4c2ca7a07547dd133760c1">free_fiber</a>(def.context.fiber_index, def.context.fiber_pool_index);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        def.context.has_fiber = <span class="keyword">false</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a7f238503831b8b525189ef84420dc5a5">clear_job_dependencies</a>(index);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    def.reset();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">m_job_pool</a>.free(index);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a19ea9be8de4c2ca7a07547dd133760c1"><div class="ttname"><a href="classjobs_1_1scheduler.html#a19ea9be8de4c2ca7a07547dd133760c1">jobs::scheduler::free_fiber</a></div><div class="ttdeci">result free_fiber(size_t fiber_index, size_t fiber_pool_index)</div><div class="ttdoc">Frees a fiber allocated with allocate_fiber, so it can be recycled later. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01313">jobs_scheduler.cpp:1313</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a179f88401ebc4aaae6ae13e995af2c2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">jobs::scheduler::m_job_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_definition &gt; m_job_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00797">jobs_scheduler.h:797</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a7f238503831b8b525189ef84420dc5a5"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7f238503831b8b525189ef84420dc5a5">jobs::scheduler::clear_job_dependencies</a></div><div class="ttdeci">void clear_job_dependencies(size_t job_index)</div><div class="ttdoc">Clears all the dependencies assigned to the given job index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00678">jobs_scheduler.cpp:678</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c346600181c08f8cce63fe63c2e6326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c346600181c08f8cce63fe63c2e6326">&#9670;&nbsp;</a></span>free_scope()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::free_scope </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a> *&#160;</td>
          <td class="paramname"><em>scope</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees a profile scope previously allocated with <a class="el" href="classjobs_1_1scheduler.html#ae7c16bd88c8060aadf243e918c8297ea">alloc_scope</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scope</td><td>Scope to free.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01525">1525</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00848">m_profile_scope_pool</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00101">jobs::internal::job_context::leave_scope()</a>.</p>
<div class="fragment"><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;{</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// Free to the small thread-local list for speedy allocations</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.profile_scope_cache.push(scope);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">if</span> (res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="comment">// Return to main synchronized pool.</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">m_profile_scope_pool</a>.free(scope);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ad3c7666016a7ea672c7dd7983fb7ac2b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">jobs::scheduler::m_profile_scope_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::profile_scope_definition &gt; m_profile_scope_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00848">jobs_scheduler.h:848</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a372a2b2959f720c99d75acd96918fb9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372a2b2959f720c99d75acd96918fb9f">&#9670;&nbsp;</a></span>get_active_job_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> * jobs::scheduler::get_active_job_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the context of the job currently running on calling thread. </p>
<p>Generally this should not need to be called by user-code. Rather the wrappers that interface with the context (profile_scope, <a class="el" href="classjobs_1_1job__handle.html" title="Represents an instance of a job that has been created by the scheduler. ">job_handle</a>, etc) should be preferred.</p>
<dl class="section return"><dt>Returns</dt><dd>Context of the currently running job, or nullptr if no job is running on this thread. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01601">1601</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00863">m_worker_thread_scheduler</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00157">jobs::internal::profile_scope_internal::profile_scope_internal()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00178">jobs::internal::profile_scope_internal::~profile_scope_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;{</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">m_worker_thread_scheduler</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    {</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.active_job_context;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a13cff32415ff21626fb1892045591923"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">jobs::scheduler::m_worker_thread_scheduler</a></div><div class="ttdeci">static thread_local scheduler * m_worker_thread_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00863">jobs_scheduler.h:863</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab200b5be7c531ca56635616ffcbdbed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab200b5be7c531ca56635616ffcbdbed8">&#9670;&nbsp;</a></span>get_active_job_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a> * jobs::scheduler::get_active_job_definition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the definition of the job currently running on calling thread. </p>
<p>Generally this should not need to be called by user-code. Rather the wrappers that interface with the context (profile_scope, <a class="el" href="classjobs_1_1job__handle.html" title="Represents an instance of a job that has been created by the scheduler. ">job_handle</a>, etc) should be preferred. Its public on the off chance that user-code wants finer-grain control over things like profiling scope.</p>
<dl class="section return"><dt>Returns</dt><dd>Definition of the currently running job, or nullptr if no job is running on this thread. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01624">1624</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00863">m_worker_thread_scheduler</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01538">sleep()</a>.</p>
<div class="fragment"><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;{</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">m_worker_thread_scheduler</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    {</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    }</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.active_job_context != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.active_job_context-&gt;job_def;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a13cff32415ff21626fb1892045591923"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">jobs::scheduler::m_worker_thread_scheduler</a></div><div class="ttdeci">static thread_local scheduler * m_worker_thread_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00863">jobs_scheduler.h:863</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a96ca2d832abfbf75b1b4b6ec856344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a96ca2d832abfbf75b1b4b6ec856344">&#9670;&nbsp;</a></span>get_counter_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1counter__definition.html">internal::counter_definition</a>&amp; jobs::scheduler::get_counter_definition </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a counter definition by its pool index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index into the counter pool of definition to retrieve.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Counter definition at the given index. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00650">650</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">References <a class="el" href="jobs__defines_8h_source.html#l00077">JOBS_FORCE_NO_INLINE</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00422">jobs::counter_handle::add_to_wait_list()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">create_counter()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00600">decrease_counter_ref_count()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00586">free_counter()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00360">jobs::counter_handle::get()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00594">increase_counter_ref_count()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00383">jobs::counter_handle::modify_value()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00473">jobs::counter_handle::notify_value_changed()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00464">jobs::counter_handle::remove_from_wait_list()</a>, and <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">m_counter_pool</a>.get_index(index);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="ttc" id="classjobs_1_1scheduler_html_a982466ec5c08e893fad09dc717cfca08"><div class="ttname"><a href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">jobs::scheduler::m_counter_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::counter_definition &gt; m_counter_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00842">jobs_scheduler.h:842</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72b273ff16629eac984650db03af8314"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72b273ff16629eac984650db03af8314">&#9670;&nbsp;</a></span>get_job_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a>&amp; jobs::scheduler::get_job_definition </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a job definition by its pool index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index into the job pool of definition to retrieve.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Job definition at the given index. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00423">423</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">References <a class="el" href="jobs__utils_8h_source.html#l01119">jobs::timeout::infinite</a>, <a class="el" href="jobs__defines_8h_source.html#l00076">JOBS_FORCE_INLINE</a>, and <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">jobs::message</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00717">add_job_dependency()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00678">clear_job_dependencies()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00524">create_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00668">decrease_job_ref_count()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">dispatch_batch()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">dispatch_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00840">execute_fiber_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">free_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01051">get_next_job_from_queue()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00662">increase_job_ref_count()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00425">jobs::job_handle::is_complete()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00436">jobs::job_handle::is_mutable()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00403">jobs::job_handle::is_pending()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00414">jobs::job_handle::is_running()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00939">requeue_job_batch()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00326">jobs::job_handle::set_completion_counter()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00309">jobs::job_handle::set_priority()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00292">jobs::job_handle::set_stack_size()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00272">jobs::job_handle::set_tag()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00255">jobs::job_handle::set_work()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">m_job_pool</a>.get_index(index);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="ttc" id="classjobs_1_1scheduler_html_a179f88401ebc4aaae6ae13e995af2c2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">jobs::scheduler::m_job_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_definition &gt; m_job_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00797">jobs_scheduler.h:797</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3fd26be8aa4bd50710d14dc12605d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3fd26be8aa4bd50710d14dc12605d2d">&#9670;&nbsp;</a></span>get_logical_core_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::get_logical_core_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of logical cores on the system. </p>
<p>This is provided to given a rough idea of the amount of worker threads that should be spawned by the scheduler to provide maximum utilization of system resources.</p>
<dl class="section return"><dt>Returns</dt><dd>Number of logical cores on the system. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01680">1680</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;{</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="preprocessor">#if defined(JOBS_PLATFORM_PS4)</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">return</span> 6; <span class="comment">// Using the 7th core for workers can cause sync problems if a mutex gets held when its timesliced back to the OS.</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> std::thread::hardware_concurrency();</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a41389866549193a8cc88af8ffc059bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41389866549193a8cc88af8ffc059bb8">&#9670;&nbsp;</a></span>get_next_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::get_next_job </td>
          <td>(</td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>job_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428d">priority</a>&#160;</td>
          <td class="paramname"><em>priorities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>can_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the next available job from the highest priority queue available. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_index</td><td>Reference to store retrieved job index in. </td></tr>
    <tr><td class="paramname">priorities</td><td>Priority queues to look for jobs in. </td></tr>
    <tr><td class="paramname">can_block</td><td>If true the function will block until a job is available. Otherwise the return value can be used to determine if a job was found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a job was retrieved. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">1093</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01051">get_next_job_from_queue()</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00791">m_destroying</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00818">m_pending_job_queues</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">wait_for_job_available()</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::get_next_job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a>)</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;dequeue job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="comment">// Look for work in each priority queue we can execute.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; (int)<a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>; i++)</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                <span class="keywordtype">int</span> mask = 1 &lt;&lt; i;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="keywordflow">if</span> (((<span class="keywordtype">size_t</span>)priorities &amp; mask) != 0)</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ac93b14a0c15312997374d52618d84d2c">get_next_job_from_queue</a>(job_index, <a class="code" href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">m_pending_job_queues</a>[i], mask))</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                    {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <span class="keywordflow">if</span> (!can_block)</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        }</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="comment">// Wait for next job.</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#acf9665ce530ee3e20e3c14c5419df588">wait_for_job_available</a>();</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    } </div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ac93b14a0c15312997374d52618d84d2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#ac93b14a0c15312997374d52618d84d2c">jobs::scheduler::get_next_job_from_queue</a></div><div class="ttdeci">bool get_next_job_from_queue(size_t &amp;job_index, job_queue &amp;queue, size_t queue_mask)</div><div class="ttdoc">Gets the next available job a given queue. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01051">jobs_scheduler.cpp:1051</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab259d6c0c4495c7a69668ee0e7233b60"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">jobs::scheduler::m_destroying</a></div><div class="ttdeci">bool m_destroying</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00791">jobs_scheduler.h:791</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2f46380b3692d3b684d4ca2307cf116f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">jobs::scheduler::m_pending_job_queues</a></div><div class="ttdeci">job_queue m_pending_job_queues[(int) priority::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00818">jobs_scheduler.h:818</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_acf9665ce530ee3e20e3c14c5419df588"><div class="ttname"><a href="classjobs_1_1scheduler.html#acf9665ce530ee3e20e3c14c5419df588">jobs::scheduler::wait_for_job_available</a></div><div class="ttdeci">void wait_for_job_available()</div><div class="ttdoc">Blocks until a new job has been singled as being available by notify_job_available. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01666">jobs_scheduler.cpp:1666</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac93b14a0c15312997374d52618d84d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93b14a0c15312997374d52618d84d2c">&#9670;&nbsp;</a></span>get_next_job_from_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::get_next_job_from_queue </td>
          <td>(</td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>job_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjobs_1_1scheduler_1_1job__queue.html">job_queue</a> &amp;&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>queue_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the next available job a given queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_index</td><td>Reference to store retrieved job index in. </td></tr>
    <tr><td class="paramname">queue</td><td>Queue to retrieve job from. </td></tr>
    <tr><td class="paramname">queue_mask</td><td>Priority mask of queue.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if a job was retrieved. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01051">1051</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="jobs__utils_8h_source.html#l00750">jobs::internal::atomic_queue&lt; data_type &gt;::count()</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa2e4822a98337283e39f7b60acf85ec9">jobs::empty</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00060">jobs::scheduler::worker_thread_state::job_index</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00836">m_available_jobs</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00404">jobs::scheduler::job_queue::pending_job_indicies</a>, <a class="el" href="jobs__job_8h_source.html#l00466">jobs::internal::job_definition::pending_predecessors</a>, <a class="el" href="jobs__utils_8h_source.html#l00615">jobs::internal::atomic_queue&lt; data_type &gt;::pop()</a>, <a class="el" href="jobs__job_8h_source.html#l00085">jobs::internal::job_context::queues_contained_in</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::running</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">get_next_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordtype">bool</span> shifted_last_iteration = <span class="keyword">false</span>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::get_next_job_from_queue&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a> = queue.pending_job_indicies.count();</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a>; i++)</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordtype">size_t</span> job_index;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = queue.pending_job_indicies.pop(job_index);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keywordflow">if</span> (res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa2e4822a98337283e39f7b60acf85ec9">result::empty</a>)</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(job_index);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">// If job hasn&#39;t already started running (because its been picked up from another queue),</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="comment">// the mark it as running and return it.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> expected = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">if</span> (def.status.compare_exchange_strong(expected, <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">internal::job_status::running</a>))</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            def.context.queues_contained_in &amp;= ~queue_mask;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            assert(def.pending_predecessors == 0);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">debug_log_group::worker</a>, <span class="stringliteral">&quot;Picked up %zi from queue %i&quot;</span>, job_index, queue_mask);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <span class="keywordtype">size_t</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> = --<a class="code" href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">m_available_jobs</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            output_job_index = job_index;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div><div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aa2e4822a98337283e39f7b60acf85ec9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa2e4822a98337283e39f7b60acf85ec9">jobs::result::empty</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::job_status::running</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a8ed066fd392f486a19b49d066b5c569b"><div class="ttname"><a href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">jobs::scheduler::m_available_jobs</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_available_jobs</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00836">jobs_scheduler.h:836</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7755d91fb9ecf77a3860d86727af920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7755d91fb9ecf77a3860d86727af920">&#9670;&nbsp;</a></span>get_worker_job_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> * jobs::scheduler::get_worker_job_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the context of the worker management fiber running individual jobs. </p>
<p>Generally this should not need to be called by user-code. Rather the wrappers that interface with the context (profile_scope, <a class="el" href="classjobs_1_1job__handle.html" title="Represents an instance of a job that has been created by the scheduler. ">job_handle</a>, etc) should be preferred.</p>
<dl class="section return"><dt>Returns</dt><dd>Context of the current threads worker fiber, or nullptr if not called on a worker thread. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01615">1615</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00863">m_worker_thread_scheduler</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;{</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">m_worker_thread_scheduler</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    }</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_context;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a13cff32415ff21626fb1892045591923"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13cff32415ff21626fb1892045591923">jobs::scheduler::m_worker_thread_scheduler</a></div><div class="ttdeci">static thread_local scheduler * m_worker_thread_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00863">jobs_scheduler.h:863</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a250b156b15dab8b7eae33d8660c51054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250b156b15dab8b7eae33d8660c51054">&#9670;&nbsp;</a></span>increase_counter_ref_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::increase_counter_ref_count </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the reference count of the counter based on it's pool index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of counter to increment ref count of. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00594">594</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00650">get_counter_definition()</a>, and <a class="el" href="jobs__counter_8h_source.html#l00064">jobs::internal::counter_definition::ref_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00090">jobs::counter_handle::increase_ref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    internal::counter_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">get_counter_definition</a>(index);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordtype">size_t</span> new_ref_count = ++def.ref_count;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a1a96ca2d832abfbf75b1b4b6ec856344"><div class="ttname"><a href="classjobs_1_1scheduler.html#a1a96ca2d832abfbf75b1b4b6ec856344">jobs::scheduler::get_counter_definition</a></div><div class="ttdeci">internal::counter_definition &amp; get_counter_definition(size_t index)</div><div class="ttdoc">Gets a counter definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00650">jobs_scheduler.h:650</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa76d1476f6a079b49613ff487f4fe5fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa76d1476f6a079b49613ff487f4fe5fc">&#9670;&nbsp;</a></span>increase_job_ref_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::increase_job_ref_count </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the reference count of the job based on it's pool index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of counter to increment ref count of. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00662">662</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, and <a class="el" href="jobs__job_8h_source.html#l00408">jobs::internal::job_definition::ref_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">dispatch_batch()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">dispatch_job()</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00239">jobs::job_handle::increase_ref()</a>.</p>
<div class="fragment"><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;{</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    def.ref_count.fetch_add(1, std::memory_order_relaxed);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6090dbccd0375e37605cfcb31a6ef39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6090dbccd0375e37605cfcb31a6ef39">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes this scheduler so it's ready to accept jobs. </p>
<p>Initializes this scheduler so it's ready to accept jobs. All allocation of memory is done up-front during the execution of this function.</p>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">295</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::error</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00394">jobs::scheduler::fiber_pool::fiber_count</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01680">get_logical_core_count()</a>, <a class="el" href="jobs__callback__scheduler_8cpp_source.html#l00052">jobs::internal::callback_scheduler::init()</a>, <a class="el" href="jobs__utils_8h_source.html#l00590">jobs::internal::atomic_queue&lt; data_type &gt;::init()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00378">jobs::scheduler::thread_pool::job_priorities</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00845">m_callback_scheduler</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00842">m_counter_pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00779">m_fiber_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00782">m_fiber_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00785">m_fiber_pools_sorted_by_stack</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00839">m_job_dependency_pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00797">m_job_pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00756">m_max_callbacks</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00753">m_max_counters</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00747">m_max_dependencies</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00744">m_max_jobs</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00750">m_max_profile_scopes</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00764">m_memory_functions</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00818">m_pending_job_queues</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00794">m_platform_fiber_aware</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00848">m_profile_scope_pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00761">m_raw_memory_functions</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00770">m_thread_pool_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00773">m_thread_pools</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00815">m_total_memory_allocated</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00776">m_worker_count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00860">m_worker_thread_states</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7acd69b4957f06cd818d7bf3d61980e291">jobs::memory</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">jobs::message</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a518eb0747106379de2829c298068e5f6">jobs::no_fiber_pools</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa22089239ec0e819c1cfe19d5c3a33b1">jobs::no_thread_pools</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a5ea42cc8dbd653d9afd96c1d2fd147e2">jobs::out_of_memory</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00404">jobs::scheduler::job_queue::pending_job_indicies</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ae047bbcb33ebea1394563174974960d1">jobs::platform_error</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00384">jobs::scheduler::thread_pool::pool</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00397">jobs::scheduler::fiber_pool::pool</a>, <a class="el" href="jobs__job_8h_source.html#l00097">jobs::internal::job_context::scheduler</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::scheduler</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00391">jobs::scheduler::fiber_pool::stack_size</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00381">jobs::scheduler::thread_pool::thread_count</a>, <a class="el" href="jobs__memory_8h_source.html#l00066">jobs::memory_functions::user_alloc</a>, <a class="el" href="jobs__memory_8h_source.html#l00069">jobs::memory_functions::user_free</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a> == 0)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa22089239ec0e819c1cfe19d5c3a33b1">result::no_thread_pools</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a> == 0)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a518eb0747106379de2829c298068e5f6">result::no_fiber_pools</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">// Trampoline the memory functions so we can log allocations.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">user_alloc</a> = [=](<span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> alignment) -&gt; <span class="keywordtype">void</span>* {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordtype">void</span>* ptr = <a class="code" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">user_alloc</a>(size, alignment);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#ace011926f543b0610e0de12bb5990f32">m_total_memory_allocated</a> += size;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7acd69b4957f06cd818d7bf3d61980e291">debug_log_group::memory</a>, <span class="stringliteral">&quot;allocated memory block, size=%zi ptr=0x%08p total=%zi&quot;</span>, size, ptr, <a class="code" href="classjobs_1_1scheduler.html#ace011926f543b0610e0de12bb5990f32">m_total_memory_allocated</a>.load());</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(ptr);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    };</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">user_free</a> = [=](<span class="keywordtype">void</span>* ptr) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">user_free</a>(ptr);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    };</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Platform initialization.</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#if defined(JOBS_PLATFORM_PS4)</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// Ensure fiber prx is loaded.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (sceSysmoduleIsLoaded(SCE_SYSMODULE_FIBER))</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">if</span> (sceSysmoduleLoadModule(SCE_SYSMODULE_FIBER) != SCE_OK)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">debug_log_verbosity::error</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;failed to load SCE_SYSMODULE_FIBER&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ae047bbcb33ebea1394563174974960d1">result::platform_error</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            m_owns_scesysmodule_fiber = <span class="keyword">true</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">m_platform_fiber_aware</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// Allocate jobs.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> = <a class="code" href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">m_job_pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, <a class="code" href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">m_max_jobs</a>, [<span class="keyword">this</span>](internal::job_definition* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keyword">new</span>(instance) internal::job_definition(index);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        instance-&gt;context.scheduler = <span class="keyword">this</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    });</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// Allocate job dependencies.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    result = <a class="code" href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">m_job_dependency_pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, <a class="code" href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">m_max_dependencies</a>, [](internal::job_dependency* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keyword">new</span>(instance) internal::job_dependency(index);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    });</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// Allocate counters.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    result = <a class="code" href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">m_counter_pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, <a class="code" href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">m_max_counters</a>, [](internal::counter_definition* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">new</span>(instance) internal::counter_definition();</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    });</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// Allocate profile scopes.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    result = <a class="code" href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">m_profile_scope_pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, <a class="code" href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">m_max_profile_scopes</a>, [](internal::profile_scope_definition* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keyword">new</span>(instance) internal::profile_scope_definition();</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    });</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// Allocate callbacks.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    result = <a class="code" href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">m_callback_scheduler</a>.<a class="code" href="classjobs_1_1internal_1_1callback__scheduler.html#abc3a20ea1285d301160539a306bb98e4">init</a>(<span class="keyword">this</span>, <a class="code" href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">m_max_callbacks</a>, <a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Allocate task queues.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; (int)<a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>; i++)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        result = <a class="code" href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">m_pending_job_queues</a>[i].<a class="code" href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">pending_job_indicies</a>.<a class="code" href="structjobs_1_1internal_1_1atomic__queue.html#a27edc43217d56ad87c51e9d0898cce09">init</a>(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, <a class="code" href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">m_max_jobs</a>);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// Allocate fibers.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a>; i++)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        fiber_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">m_fiber_pools</a>[i];</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[i] = &amp;pool;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        result = pool.<a class="code" href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, pool.fiber_count, [&amp;](internal::fiber* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            new(instance) internal::fiber(m_memory_functions);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            char buffer[64];</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            memset(buffer, 0, sizeof(buffer));</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            sprintf(buffer, <span class="stringliteral">&quot;Job (Pool=%zi Index=%zi)&quot;</span>, i, index);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            return instance-&gt;init(pool.stack_size, [this, i, index]()</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                worker_fiber_entry_point(i, index);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            }, buffer);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        });</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// Sort fiber pools by stack size, smallest to largest, saves</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// redundent iteration when looking for smallest fitting stack size.</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">auto</span> fiber_sort_predicate = [](<span class="keyword">const</span> scheduler::fiber_pool* lhs, <span class="keyword">const</span> scheduler::fiber_pool* rhs)</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> lhs-&gt;stack_size &lt; rhs-&gt;stack_size;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    };</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    std::sort(<a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>, <a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a> + m_fiber_pool_count, fiber_sort_predicate);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="comment">// Allocate worker states.</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a>; i++)</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        thread_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a>[i];</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">m_worker_count</a> += pool.thread_count;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> = (worker_thread_state*)<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>.<a class="code" href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">user_alloc</a>(<span class="keyword">sizeof</span>(worker_thread_state) * <a class="code" href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">m_worker_count</a>, <span class="keyword">alignof</span>(worker_thread_state));</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a5ea42cc8dbd653d9afd96c1d2fd147e2">result::out_of_memory</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">m_worker_count</a>; i++)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keyword">new</span>(<a class="code" href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">m_worker_thread_states</a> + i) worker_thread_state();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Allocate threads.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordtype">size_t</span> thread_index = 0;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">size_t</span> logical_cores = <a class="code" href="classjobs_1_1scheduler.html#ae3fd26be8aa4bd50710d14dc12605d2d">get_logical_core_count</a>();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a>; i++)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        thread_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a>[i];</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        result = pool.<a class="code" href="structjobs_1_1scheduler_1_1thread__pool.html#a4b3f9a14e60855a04664cf60ce3f37bc">pool</a>.init(<a class="code" href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">m_memory_functions</a>, pool.thread_count, [&amp;](internal::thread* instance, <span class="keywordtype">size_t</span> index)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            new(instance) internal::thread(m_memory_functions);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            size_t core_affinity = ((size_t)1 &lt;&lt; (thread_index % logical_cores));</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            thread_index++;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            char buffer[64];</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            memset(buffer, 0, sizeof(buffer));</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            sprintf(buffer, <span class="stringliteral">&quot;Worker (Pool=%zi:%zi Affinity=%zi)&quot;</span>, i, index, core_affinity);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            return instance-&gt;init([&amp;, i, index, thread_index]()</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            {</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                m_worker_thread_scheduler = this;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                m_worker_thread_state = (m_worker_thread_states + (thread_index  - 1));</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                worker_entry_point(i, index, *instance, pool);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            }, buffer, core_affinity);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        });</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> (result != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Dump out some general logs describing the scheduler setup.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;scheduler initialized&quot;</span>);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%zi bytes allocated&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#ace011926f543b0610e0de12bb5990f32">m_total_memory_allocated</a>.load());</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i max jobs&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">m_max_jobs</a>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i max dependencies&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">m_max_dependencies</a>);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i max profile scopes&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">m_max_profile_scopes</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i max counters&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">m_max_counters</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i max callbacks&quot;</span>, <a class="code" href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">m_max_callbacks</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i thread pools&quot;</span>, m_thread_pool_count);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">m_thread_pool_count</a>; i++)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        thread_pool&amp; pool = <a class="code" href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">m_thread_pools</a>[i];</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t\t[%i] workers=%i priorities=0x%08x&quot;</span>, i, pool.thread_count, pool.job_priorities);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t%i fiber pools&quot;</span>, m_fiber_pool_count);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">m_fiber_pool_count</a>; i++)</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        fiber_pool&amp; pool = *<a class="code" href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">m_fiber_pools_sorted_by_stack</a>[i];</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">debug_log_group::scheduler</a>, <span class="stringliteral">&quot;\t\t[%i] fibers=%i stack_size=%i&quot;</span>, i, pool.fiber_count, pool.stack_size);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a28b6da662ffe7c4ad231f2d7f3828aa9"><div class="ttname"><a href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">jobs::scheduler::m_callback_scheduler</a></div><div class="ttdeci">internal::callback_scheduler m_callback_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00845">jobs_scheduler.h:845</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ae047bbcb33ebea1394563174974960d1"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ae047bbcb33ebea1394563174974960d1">jobs::result::platform_error</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae3fd26be8aa4bd50710d14dc12605d2d"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae3fd26be8aa4bd50710d14dc12605d2d">jobs::scheduler::get_logical_core_count</a></div><div class="ttdeci">static size_t get_logical_core_count()</div><div class="ttdoc">Returns the number of logical cores on the system. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01680">jobs_scheduler.cpp:1680</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a518eb0747106379de2829c298068e5f6"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a518eb0747106379de2829c298068e5f6">jobs::result::no_fiber_pools</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a22a50fc4288defd2978190d9fb134d96"><div class="ttname"><a href="classjobs_1_1scheduler.html#a22a50fc4288defd2978190d9fb134d96">jobs::scheduler::m_thread_pool_count</a></div><div class="ttdeci">size_t m_thread_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00770">jobs_scheduler.h:770</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_af37f417d1a0a5b55e83a9c7013b32d5e"><div class="ttname"><a href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">jobs::scheduler::m_worker_count</a></div><div class="ttdeci">size_t m_worker_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00776">jobs_scheduler.h:776</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076aa22089239ec0e819c1cfe19d5c3a33b1"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076aa22089239ec0e819c1cfe19d5c3a33b1">jobs::result::no_thread_pools</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a81fcb4d5296cf957f04a0b6183aff355"><div class="ttname"><a href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">jobs::scheduler::m_max_jobs</a></div><div class="ttdeci">size_t m_max_jobs</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00744">jobs_scheduler.h:744</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a330f25064c543a2f874279d944f9b86f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">jobs::scheduler::m_max_profile_scopes</a></div><div class="ttdeci">size_t m_max_profile_scopes</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00750">jobs_scheduler.h:750</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ad3c7666016a7ea672c7dd7983fb7ac2b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad3c7666016a7ea672c7dd7983fb7ac2b">jobs::scheduler::m_profile_scope_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::profile_scope_definition &gt; m_profile_scope_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00848">jobs_scheduler.h:848</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab5f8633baac99fbf9e7921bc43fcfcdd"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">jobs::scheduler::m_max_counters</a></div><div class="ttdeci">size_t m_max_counters</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00753">jobs_scheduler.h:753</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a13571318d1a560b9f531bbe974d17431"><div class="ttname"><a href="classjobs_1_1scheduler.html#a13571318d1a560b9f531bbe974d17431">jobs::scheduler::m_fiber_pools</a></div><div class="ttdeci">fiber_pool m_fiber_pools[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00782">jobs_scheduler.h:782</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a982466ec5c08e893fad09dc717cfca08"><div class="ttname"><a href="classjobs_1_1scheduler.html#a982466ec5c08e893fad09dc717cfca08">jobs::scheduler::m_counter_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::counter_definition &gt; m_counter_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00842">jobs_scheduler.h:842</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">jobs::debug_log_verbosity::message</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a181c426f090c60646c62b8b5e17bcaed"><div class="ttname"><a href="classjobs_1_1scheduler.html#a181c426f090c60646c62b8b5e17bcaed">jobs::scheduler::m_thread_pools</a></div><div class="ttdeci">thread_pool m_thread_pools[max_thread_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00773">jobs_scheduler.h:773</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a872a3a68f1f0789b9d199339cf8fc316"><div class="ttname"><a href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">jobs::scheduler::m_max_dependencies</a></div><div class="ttdeci">size_t m_max_dependencies</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00747">jobs_scheduler.h:747</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1thread__pool_html_a4b3f9a14e60855a04664cf60ce3f37bc"><div class="ttname"><a href="structjobs_1_1scheduler_1_1thread__pool.html#a4b3f9a14e60855a04664cf60ce3f37bc">jobs::scheduler::thread_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::thread &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00384">jobs_scheduler.h:384</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa6a1251420c4885c16a08401f540132c"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa6a1251420c4885c16a08401f540132c">jobs::scheduler::m_fiber_pools_sorted_by_stack</a></div><div class="ttdeci">fiber_pool * m_fiber_pools_sorted_by_stack[max_fiber_pools]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00785">jobs_scheduler.h:785</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1fiber__pool_html_af9ad963a75aa7621e90ee5b2cc64a113"><div class="ttname"><a href="structjobs_1_1scheduler_1_1fiber__pool.html#af9ad963a75aa7621e90ee5b2cc64a113">jobs::scheduler::fiber_pool::pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::fiber &gt; pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00397">jobs_scheduler.h:397</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6facb5e100e5a9a3e7f6d1fd97512215282">jobs::debug_log_verbosity::error</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab8bfc26e1fdfb2e65d55ce9cd000660c"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">jobs::scheduler::m_max_callbacks</a></div><div class="ttdeci">size_t m_max_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00756">jobs_scheduler.h:756</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7acd69b4957f06cd818d7bf3d61980e291"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7acd69b4957f06cd818d7bf3d61980e291">jobs::debug_log_group::memory</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2e51d505239e5e75f648dec52f9d2270"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2e51d505239e5e75f648dec52f9d2270">jobs::scheduler::m_fiber_pool_count</a></div><div class="ttdeci">size_t m_fiber_pool_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00779">jobs_scheduler.h:779</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ac3a642e47b6aef2df10a788896907040"><div class="ttname"><a href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">jobs::scheduler::m_raw_memory_functions</a></div><div class="ttdeci">memory_functions m_raw_memory_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00761">jobs_scheduler.h:761</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_acdc4e59afcd2021681b8d54e00af263b"><div class="ttname"><a href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">jobs::scheduler::m_platform_fiber_aware</a></div><div class="ttdeci">bool m_platform_fiber_aware</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00794">jobs_scheduler.h:794</a></div></div>
<div class="ttc" id="structjobs_1_1memory__functions_html_a420a7809544147e4ec1d72b23dc00d21"><div class="ttname"><a href="structjobs_1_1memory__functions.html#a420a7809544147e4ec1d72b23dc00d21">jobs::memory_functions::user_alloc</a></div><div class="ttdeci">memory_alloc_function user_alloc</div><div class="ttdef"><b>Definition:</b> <a href="jobs__memory_8h_source.html#l00066">jobs_memory.h:66</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a499f31e79c00c9e8f61bdaadc5e82f45">jobs::debug_log_group::scheduler</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a0545f3e1f3cf2dddf58692e6c88d223f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a0545f3e1f3cf2dddf58692e6c88d223f">jobs::scheduler::m_memory_functions</a></div><div class="ttdeci">memory_functions m_memory_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00764">jobs_scheduler.h:764</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2f46380b3692d3b684d4ca2307cf116f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">jobs::scheduler::m_pending_job_queues</a></div><div class="ttdeci">job_queue m_pending_job_queues[(int) priority::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00818">jobs_scheduler.h:818</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1job__queue_html_a2c0305ba297327e9995be7be522b2df3"><div class="ttname"><a href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">jobs::scheduler::job_queue::pending_job_indicies</a></div><div class="ttdeci">internal::atomic_queue&lt; size_t &gt; pending_job_indicies</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00404">jobs_scheduler.h:404</a></div></div>
<div class="ttc" id="structjobs_1_1internal_1_1atomic__queue_html_a27edc43217d56ad87c51e9d0898cce09"><div class="ttname"><a href="structjobs_1_1internal_1_1atomic__queue.html#a27edc43217d56ad87c51e9d0898cce09">jobs::internal::atomic_queue::init</a></div><div class="ttdeci">result init(const memory_functions &amp;memory_functions, int64_t capacity)</div><div class="ttdoc">Initializes this queue to the given capacity. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__utils_8h_source.html#l00590">jobs_utils.h:590</a></div></div>
<div class="ttc" id="structjobs_1_1memory__functions_html_a5487fb130e8321e13b38f29dbbbb5908"><div class="ttname"><a href="structjobs_1_1memory__functions.html#a5487fb130e8321e13b38f29dbbbb5908">jobs::memory_functions::user_free</a></div><div class="ttdeci">memory_free_function user_free</div><div class="ttdef"><b>Definition:</b> <a href="jobs__memory_8h_source.html#l00069">jobs_memory.h:69</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aacea70ee5e77f2bd04f0339e8e07f129"><div class="ttname"><a href="classjobs_1_1scheduler.html#aacea70ee5e77f2bd04f0339e8e07f129">jobs::scheduler::m_worker_thread_states</a></div><div class="ttdeci">worker_thread_state * m_worker_thread_states</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00860">jobs_scheduler.h:860</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a179f88401ebc4aaae6ae13e995af2c2c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a179f88401ebc4aaae6ae13e995af2c2c">jobs::scheduler::m_job_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_definition &gt; m_job_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00797">jobs_scheduler.h:797</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace011926f543b0610e0de12bb5990f32"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace011926f543b0610e0de12bb5990f32">jobs::scheduler::m_total_memory_allocated</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_total_memory_allocated</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00815">jobs_scheduler.h:815</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a17aac31dcee25d3e85f8e27676fe6a29"><div class="ttname"><a href="classjobs_1_1scheduler.html#a17aac31dcee25d3e85f8e27676fe6a29">jobs::scheduler::m_job_dependency_pool</a></div><div class="ttdeci">internal::fixed_pool&lt; internal::job_dependency &gt; m_job_dependency_pool</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00839">jobs_scheduler.h:839</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a5ea42cc8dbd653d9afd96c1d2fd147e2"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a5ea42cc8dbd653d9afd96c1d2fd147e2">jobs::result::out_of_memory</a></div></div>
<div class="ttc" id="classjobs_1_1internal_1_1callback__scheduler_html_abc3a20ea1285d301160539a306bb98e4"><div class="ttname"><a href="classjobs_1_1internal_1_1callback__scheduler.html#abc3a20ea1285d301160539a306bb98e4">jobs::internal::callback_scheduler::init</a></div><div class="ttdeci">result init(jobs::scheduler *scheduler, size_t max_callbacks, const jobs::memory_functions &amp;memory_functions)</div><div class="ttdoc">Initializes this scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__callback__scheduler_8cpp_source.html#l00052">jobs_callback_scheduler.cpp:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad858672d43d286d43fca605c051cb47a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad858672d43d286d43fca605c051cb47a">&#9670;&nbsp;</a></span>is_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::is_idle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if all jobs are complete and the scheduler and it's workers are idle. </p>
<dl class="section return"><dt>Returns</dt><dd>True if idle. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01499">1499</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00833">m_active_job_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">wait_until_idle()</a>.</p>
<div class="fragment"><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;{</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">m_active_job_count</a>.load() == 0);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ae85dc67f000622f2d799f94bbaf4725f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae85dc67f000622f2d799f94bbaf4725f">jobs::scheduler::m_active_job_count</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_active_job_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00833">jobs_scheduler.h:833</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8da3b9447166b19109ed6891d536eee5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8da3b9447166b19109ed6891d536eee5">&#9670;&nbsp;</a></span>is_profiling_active()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::is_profiling_active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets if the active scheduler has profiling enabled. </p>
<p>Used to early-out of various bits of profiling code.</p>
<dl class="section return"><dt>Returns</dt><dd>True if profiling is active. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01610">1610</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00869">m_profiling_active</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00157">jobs::internal::profile_scope_internal::profile_scope_internal()</a>, and <a class="el" href="jobs__job_8cpp_source.html#l00178">jobs::internal::profile_scope_internal::~profile_scope_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classjobs_1_1scheduler.html#ae49be458491da0ac65c72411aeae881f">m_profiling_active</a>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ae49be458491da0ac65c72411aeae881f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae49be458491da0ac65c72411aeae881f">jobs::scheduler::m_profiling_active</a></div><div class="ttdeci">static bool m_profiling_active</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00869">jobs_scheduler.h:869</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c2df77fa18d7b459408579671d5ec17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2df77fa18d7b459408579671d5ec17">&#9670;&nbsp;</a></span>leave_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::leave_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;&#160;</td>
          <td class="paramname"><em>old_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Leaves the given job execution context in preperation for entering another. </p>
<p>Leaving a context performs various bits of cleanup worker, such as poping profiler markers off the threads stack, in preperation for a new context being entered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_context</td><td>Context to leave. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00610">610</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8h_source.html#l00093">jobs::profile_functions::leave_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00794">m_platform_fiber_aware</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00767">m_profile_functions</a>, and <a class="el" href="jobs__job_8h_source.html#l00088">jobs::internal::job_context::profile_scope_depth</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Remove everything from the profile scope stack.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a7f59be8380117272f5b35c7cd3f1f489">leave_scope</a> != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code" href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">m_platform_fiber_aware</a>)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; context.profile_scope_depth; i++)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a>.<a class="code" href="structjobs_1_1profile__functions.html#a7f59be8380117272f5b35c7cd3f1f489">leave_scope</a>();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="ttc" id="structjobs_1_1profile__functions_html_a7f59be8380117272f5b35c7cd3f1f489"><div class="ttname"><a href="structjobs_1_1profile__functions.html#a7f59be8380117272f5b35c7cd3f1f489">jobs::profile_functions::leave_scope</a></div><div class="ttdeci">profile_leave_scope_function leave_scope</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00093">jobs_scheduler.h:93</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_acdc4e59afcd2021681b8d54e00af263b"><div class="ttname"><a href="classjobs_1_1scheduler.html#acdc4e59afcd2021681b8d54e00af263b">jobs::scheduler::m_platform_fiber_aware</a></div><div class="ttdeci">bool m_platform_fiber_aware</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00794">jobs_scheduler.h:794</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a5b6d26a6b0aac897cddb91a72b856ac7"><div class="ttname"><a href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">jobs::scheduler::m_profile_functions</a></div><div class="ttdeci">profile_functions m_profile_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00767">jobs_scheduler.h:767</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a39cd8441c302062ec01b617cfadb1770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39cd8441c302062ec01b617cfadb1770">&#9670;&nbsp;</a></span>notify_job_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::notify_job_available </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>job_count</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies any workers that a given number of jobs are available for processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_count</td><td>Number of jobs that are newly available. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">1640</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00836">m_available_jobs</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00824">m_task_available_cvar</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00776">m_worker_count</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00473">jobs::counter_handle::notify_value_changed()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00939">requeue_job_batch()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;{</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::notify_job_available&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> = (<a class="code" href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">m_available_jobs</a> += job_count);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    </div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span> (job_count &gt; <a class="code" href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">m_worker_count</a>)</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">m_task_available_cvar</a>.notify_all();</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    }</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    {</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; job_count; i++)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">m_task_available_cvar</a>.notify_one();</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    }</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_abb3c08cc7b40bdbdb1a7e179b13f739e"><div class="ttname"><a href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">jobs::scheduler::m_task_available_cvar</a></div><div class="ttdeci">std::condition_variable m_task_available_cvar</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00824">jobs_scheduler.h:824</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_af37f417d1a0a5b55e83a9c7013b32d5e"><div class="ttname"><a href="classjobs_1_1scheduler.html#af37f417d1a0a5b55e83a9c7013b32d5e">jobs::scheduler::m_worker_count</a></div><div class="ttdeci">size_t m_worker_count</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00776">jobs_scheduler.h:776</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a8ed066fd392f486a19b49d066b5c569b"><div class="ttname"><a href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">jobs::scheduler::m_available_jobs</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_available_jobs</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00836">jobs_scheduler.h:836</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af0c826abba451b6559659a38c1770780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c826abba451b6559659a38c1770780">&#9670;&nbsp;</a></span>notify_job_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::notify_job_complete </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notifies any waiting workers that a job has completed. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01659">1659</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00830">m_task_complete_cvar</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;{</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::notify_job_complete&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a>.notify_all();</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a7cbce0967cbfde909d7fe58945eed62c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">jobs::scheduler::m_task_complete_cvar</a></div><div class="ttdeci">std::condition_variable m_task_complete_cvar</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00830">jobs_scheduler.h:830</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed591baef6580ec5c3c1e0ba9901b278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed591baef6580ec5c3c1e0ba9901b278">&#9670;&nbsp;</a></span>requeue_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::requeue_job </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requeues a job that has previously been picked up for execution. </p>
<p>This is primarily used when requeueing a job following it being readied by a condition it is waiting on being fulfilled (counter getting to value, job completing, etc).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>Index of job to requeue.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">1016</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__job_8h_source.html#l00417">jobs::internal::job_definition::job_priority</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00818">m_pending_job_queues</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00404">jobs::scheduler::job_queue::pending_job_indicies</a>, <a class="el" href="jobs__utils_8h_source.html#l00659">jobs::internal::atomic_queue&lt; data_type &gt;::push()</a>, <a class="el" href="jobs__job_8h_source.html#l00085">jobs::internal::job_context::queues_contained_in</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">jobs::internal::sleeping</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a16ec7c5046dc06c5cbab049d0d8cb3e9">jobs::internal::waiting_on_counter</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::waiting_on_job</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">dispatch_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00473">jobs::counter_handle::notify_value_changed()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::requeue_job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// Reset the status to pending if its anything else.</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">// @todo: is this neccessary? Most requeues will set the status themselves.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> status = def.status.load(std::memory_order_relaxed);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">internal::job_status::sleeping</a> &amp;&amp;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">internal::job_status::waiting_on_job</a> &amp;&amp;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        status != <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a16ec7c5046dc06c5cbab049d0d8cb3e9">internal::job_status::waiting_on_counter</a>)</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        def.status.store(<a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>, std::memory_order_relaxed);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="comment">// Put job into a job queue for each priority it holds (not sure why you would want multiple priorities, but might as well support it ...).</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; (int)<a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>; i++)</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordtype">int</span> mask = 1 &lt;&lt; i;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="keywordflow">if</span> (((<span class="keywordtype">size_t</span>)def.job_priority &amp; mask) != 0 &amp;&amp; (def.context.queues_contained_in &amp; mask) == 0)</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            def.context.queues_contained_in |= mask;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">m_pending_job_queues</a>[i].<a class="code" href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">pending_job_indicies</a>.<a class="code" href="structjobs_1_1internal_1_1atomic__queue.html#a1940c63f8a3484f2f2dd8d76294a5bf4">push</a>(index);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            assert(res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a>(1);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;}</div><div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a16ec7c5046dc06c5cbab049d0d8cb3e9"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a16ec7c5046dc06c5cbab049d0d8cb3e9">jobs::internal::job_status::waiting_on_counter</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a39cd8441c302062ec01b617cfadb1770"><div class="ttname"><a href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">jobs::scheduler::notify_job_available</a></div><div class="ttdeci">void notify_job_available(size_t job_count=1)</div><div class="ttdoc">Notifies any workers that a given number of jobs are available for processing. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01640">jobs_scheduler.cpp:1640</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::job_status::waiting_on_job</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">jobs::internal::job_status::sleeping</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2f46380b3692d3b684d4ca2307cf116f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">jobs::scheduler::m_pending_job_queues</a></div><div class="ttdeci">job_queue m_pending_job_queues[(int) priority::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00818">jobs_scheduler.h:818</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1job__queue_html_a2c0305ba297327e9995be7be522b2df3"><div class="ttname"><a href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">jobs::scheduler::job_queue::pending_job_indicies</a></div><div class="ttdeci">internal::atomic_queue&lt; size_t &gt; pending_job_indicies</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00404">jobs_scheduler.h:404</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="structjobs_1_1internal_1_1atomic__queue_html_a1940c63f8a3484f2f2dd8d76294a5bf4"><div class="ttname"><a href="structjobs_1_1internal_1_1atomic__queue.html#a1940c63f8a3484f2f2dd8d76294a5bf4">jobs::internal::atomic_queue::push</a></div><div class="ttdeci">result push(data_type value, bool can_block=true)</div><div class="ttdoc">Pushes a new value into the queue. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__utils_8h_source.html#l00659">jobs_utils.h:659</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05476e808d034d026924970fc9a2552a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05476e808d034d026924970fc9a2552a">&#9670;&nbsp;</a></span>requeue_job_batch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::requeue_job_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1job__handle.html">job_handle</a> *&#160;</td>
          <td class="paramname"><em>job_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>job_queues</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requeues a quantity of jobs that have previously been picked up for execution. </p>
<p>This works the same as <a class="el" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a> except it combines a lot of the overhead to reduce the overall execution time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job_array</td><td>Array of job handles to requeue. </td></tr>
    <tr><td class="paramname">count</td><td>Number of job handles in job_array. </td></tr>
    <tr><td class="paramname">job_queues</td><td>Bitmaks of queues that jobs should be enqueued in (only if their priority mask also contains the queue).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00939">939</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__job_8h_source.html#l00469">jobs::internal::job_definition::context</a>, <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::count</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__job_8h_source.html#l00417">jobs::internal::job_definition::job_priority</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__job_8h_source.html#l00378">jobs::job_handle::m_index</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00818">m_pending_job_queues</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00404">jobs::scheduler::job_queue::pending_job_indicies</a>, <a class="el" href="jobs__job_8h_source.html#l00466">jobs::internal::job_definition::pending_predecessors</a>, <a class="el" href="jobs__utils_8h_source.html#l00705">jobs::internal::atomic_queue&lt; data_type &gt;::push_batch()</a>, <a class="el" href="jobs__job_8h_source.html#l00085">jobs::internal::job_context::queues_contained_in</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">dispatch_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::requeue_job_batch&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordtype">size_t</span> queued_job_count = 0;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordtype">bool</span> first_iteration = <span class="keyword">true</span>;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="comment">// Generate a list of jobs for each priority and queue them at once.</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; (int)<a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>; i++)</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordtype">int</span> mask = 1 &lt;&lt; i;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="comment">// After first iteration we know what queues jobs exists for</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">// any we don&#39;t care about.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        <span class="keywordflow">if</span> (((<span class="keywordtype">size_t</span>)job_queues &amp; mask) == 0)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;sort by priority&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="comment">// Do an in-place sort.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordtype">size_t</span> number_with_priority = 0;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordtype">size_t</span> write_index = 0;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; <a class="code" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">count</a>; j++)</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordtype">size_t</span> index = job_array[j].m_index;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            internal::job_definition&amp; def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(index);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <span class="keywordflow">if</span> (def.pending_predecessors != 0)</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            {</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <span class="comment">// Store number of valid jobs and a mask of all queues jobs exist in.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">if</span> (first_iteration)</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                queued_job_count++;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">if</span> (((<span class="keywordtype">size_t</span>)def.job_priority &amp; mask) != 0 &amp;&amp; (def.context.queues_contained_in &amp; mask) == 0)</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                def.context.queues_contained_in |= mask;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                number_with_priority++;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                <span class="keywordflow">if</span> (i != write_index)</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    <span class="keywordtype">size_t</span> tmp = job_array[write_index].m_index;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    job_array[write_index].m_index = job_array[j].m_index;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    job_array[j].m_index = tmp;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                write_index++;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">if</span> (number_with_priority &gt; 0)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;batch enqueue&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">m_pending_job_queues</a>[i].<a class="code" href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">pending_job_indicies</a>.<a class="code" href="structjobs_1_1internal_1_1atomic__queue.html#a8d1b6bdec572f8cce3d5e94d448fd397">push_batch</a>(</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                &amp;job_array[0].m_index, </div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                reinterpret_cast&lt;size_t&gt;(&amp;job_array[1].m_index) - reinterpret_cast&lt;size_t&gt;(&amp;job_array[0].m_index), </div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                number_with_priority);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            assert(res == <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        first_iteration = <span class="keyword">false</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a>(queued_job_count);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div><div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a39cd8441c302062ec01b617cfadb1770"><div class="ttname"><a href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">jobs::scheduler::notify_job_available</a></div><div class="ttdeci">void notify_job_available(size_t job_count=1)</div><div class="ttdoc">Notifies any workers that a given number of jobs are available for processing. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01640">jobs_scheduler.cpp:1640</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="structjobs_1_1internal_1_1atomic__queue_html_a8d1b6bdec572f8cce3d5e94d448fd397"><div class="ttname"><a href="structjobs_1_1internal_1_1atomic__queue.html#a8d1b6bdec572f8cce3d5e94d448fd397">jobs::internal::atomic_queue::push_batch</a></div><div class="ttdeci">result push_batch(data_type *buffer, size_t stride, size_t count, bool can_block=true)</div><div class="ttdoc">Pushes a number of items into the queue in a single operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__utils_8h_source.html#l00705">jobs_utils.h:705</a></div></div>
<div class="ttc" id="namespacejobs_html_a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353"><div class="ttname"><a href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">jobs::priority::count</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2f46380b3692d3b684d4ca2307cf116f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2f46380b3692d3b684d4ca2307cf116f">jobs::scheduler::m_pending_job_queues</a></div><div class="ttdeci">job_queue m_pending_job_queues[(int) priority::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00818">jobs_scheduler.h:818</a></div></div>
<div class="ttc" id="structjobs_1_1scheduler_1_1job__queue_html_a2c0305ba297327e9995be7be522b2df3"><div class="ttname"><a href="structjobs_1_1scheduler_1_1job__queue.html#a2c0305ba297327e9995be7be522b2df3">jobs::scheduler::job_queue::pending_job_indicies</a></div><div class="ttdeci">internal::atomic_queue&lt; size_t &gt; pending_job_indicies</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00404">jobs_scheduler.h:404</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1a52c9076dce044e82d0588c9ed744a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a52c9076dce044e82d0588c9ed744a">&#9670;&nbsp;</a></span>return_to_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::return_to_worker </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;&#160;</td>
          <td class="paramname"><em>new_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>supress_requeue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns execution from the current fiber to the worker thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_context</td><td>Context of worker thread to return to. </td></tr>
    <tr><td class="paramname">supress_requeue</td><td>If true the worker will not requeue the job when it's switched to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00656">656</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, and <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>.</p>
<div class="fragment"><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_supress_requeue = supress_requeue;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">switch_context</a>(new_context);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div><div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a74f392116598e66d59d254ab5557591a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">jobs::scheduler::switch_context</a></div><div class="ttdeci">void switch_context(internal::job_context &amp;new_context)</div><div class="ttdoc">Switches from current job execution context to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00650">jobs_scheduler.cpp:650</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad98916ce62a44aeab289e9aeebb7b98e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98916ce62a44aeab289e9aeebb7b98e">&#9670;&nbsp;</a></span>set_debug_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_debug_output </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacejobs.html#ae733fd1ddde20a364fc1cc85de1c6e22">debug_output_function</a> &amp;&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a>&#160;</td>
          <td class="paramname"><em>max_verbosity</em> = <code><a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">debug_log_verbosity::message</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides a function which all debug output will be passed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>Function to pass all debug output. </td></tr>
    <tr><td class="paramname">max_verbosity</td><td>Any debug output more verbose than this will be dropped. Saves perf formatting the logs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00186">186</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00800">m_debug_output_function</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00803">m_debug_output_max_verbosity</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">m_debug_output_function</a> = <span class="keyword">function</span>;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#aab6af0e4252b5a99b5172d9123f56bed">m_debug_output_max_verbosity</a> = max_verbosity;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_aab6af0e4252b5a99b5172d9123f56bed"><div class="ttname"><a href="classjobs_1_1scheduler.html#aab6af0e4252b5a99b5172d9123f56bed">jobs::scheduler::m_debug_output_max_verbosity</a></div><div class="ttdeci">debug_log_verbosity m_debug_output_max_verbosity</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00803">jobs_scheduler.h:803</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa7909659437dc34269db59f247b05bb8"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">jobs::scheduler::m_debug_output_function</a></div><div class="ttdeci">debug_output_function m_debug_output_function</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00800">jobs_scheduler.h:800</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afff3a0a63ee385d3c1f1d3abb1749a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff3a0a63ee385d3c1f1d3abb1749a41">&#9670;&nbsp;</a></span>set_max_callbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_max_callbacks </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_callbacks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum number of latent callbacks that can be scheduld and used for syncronization. </p>
<p>A latent callback is created for each wait/sleep call that is provided with a timeout value. This has a direct effect on the quantity of memory allocated by the scheduler when initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_callbacks</td><td>New maximum number of callbacks.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00247">247</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00756">m_max_callbacks</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">m_max_callbacks</a> = max_callbacks;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab8bfc26e1fdfb2e65d55ce9cd000660c"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab8bfc26e1fdfb2e65d55ce9cd000660c">jobs::scheduler::m_max_callbacks</a></div><div class="ttdeci">size_t m_max_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00756">jobs_scheduler.h:756</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada4871f6c12bfd9157627fdc3435201c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada4871f6c12bfd9157627fdc3435201c">&#9670;&nbsp;</a></span>set_max_counters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_max_counters </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_counters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum number of counters that can be created and used for syncronization. </p>
<p>This capacity is used for both raw counters and events. This has a direct effect on the quantity of memory allocated by the scheduler when initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_counters</td><td>New maximum number of counters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00235">235</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00753">m_max_counters</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">m_max_counters</a> = max_counters;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ab5f8633baac99fbf9e7921bc43fcfcdd"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab5f8633baac99fbf9e7921bc43fcfcdd">jobs::scheduler::m_max_counters</a></div><div class="ttdeci">size_t m_max_counters</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00753">jobs_scheduler.h:753</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a17853664a2795e7ec92eece9d487280f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17853664a2795e7ec92eece9d487280f">&#9670;&nbsp;</a></span>set_max_dependencies()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_max_dependencies </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_dependencies</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum number of job dependencies. </p>
<p>Sets the maximum number of jobs dependencies shared between all jobs at a given time. This has a direct effect on the quantity of memory allocated by the scheduler when initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_dependencies</td><td>New maximum number of job dependencies.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00211">211</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00747">m_max_dependencies</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">m_max_dependencies</a> = max_dependencies;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a872a3a68f1f0789b9d199339cf8fc316"><div class="ttname"><a href="classjobs_1_1scheduler.html#a872a3a68f1f0789b9d199339cf8fc316">jobs::scheduler::m_max_dependencies</a></div><div class="ttdeci">size_t m_max_dependencies</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00747">jobs_scheduler.h:747</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9721c93b979241fc79aeac7a297f4a28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9721c93b979241fc79aeac7a297f4a28">&#9670;&nbsp;</a></span>set_max_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_max_jobs </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_jobs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum number of jobs. </p>
<p>Sets the maximum number of jobs that can be concurrently managed by the scheduler. This has a direct effect on the quantity of memory allocated by the scheduler when initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_jobs</td><td>New maximum number of jobs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00199">199</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00744">m_max_jobs</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">m_max_jobs</a> = max_jobs;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a81fcb4d5296cf957f04a0b6183aff355"><div class="ttname"><a href="classjobs_1_1scheduler.html#a81fcb4d5296cf957f04a0b6183aff355">jobs::scheduler::m_max_jobs</a></div><div class="ttdeci">size_t m_max_jobs</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00744">jobs_scheduler.h:744</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1e5893c8a97ac79a8e607bec33c3eef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1e5893c8a97ac79a8e607bec33c3eef">&#9670;&nbsp;</a></span>set_max_profile_scopes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_max_profile_scopes </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_scopes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum number of profile scopes that can be tracked. </p>
<p>If you have heavily nested profile scope call graphs, you should increase this value. This has a direct effect on the quantity of memory allocated by the scheduler when initialized.</p>
<p>This value is per worker thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max_scopes</td><td>New maximum number of profile scopes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00223">223</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00750">m_max_profile_scopes</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">m_max_profile_scopes</a> = max_scopes;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a330f25064c543a2f874279d944f9b86f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a330f25064c543a2f874279d944f9b86f">jobs::scheduler::m_max_profile_scopes</a></div><div class="ttdeci">size_t m_max_profile_scopes</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00750">jobs_scheduler.h:750</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4128488abdfd06ee0340b80fe36cd4ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4128488abdfd06ee0340b80fe36cd4ce">&#9670;&nbsp;</a></span>set_memory_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_memory_functions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a> &amp;&#160;</td>
          <td class="paramname"><em>functions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overrides the default memory allocation functions used by the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">functions</td><td>Struct containing all the memory allocation functions to override.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00161">161</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00761">m_raw_memory_functions</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">m_raw_memory_functions</a> = functions;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ac3a642e47b6aef2df10a788896907040"><div class="ttname"><a href="classjobs_1_1scheduler.html#ac3a642e47b6aef2df10a788896907040">jobs::scheduler::m_raw_memory_functions</a></div><div class="ttdeci">memory_functions m_raw_memory_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00761">jobs_scheduler.h:761</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32937d615a6bd0d739f609db6abbac62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32937d615a6bd0d739f609db6abbac62">&#9670;&nbsp;</a></span>set_profile_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::set_profile_functions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structjobs_1_1profile__functions.html">profile_functions</a> &amp;&#160;</td>
          <td class="paramname"><em>functions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overrides the default profiling functions used by the scheduler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">functions</td><td>Struct containing all the profiling functions to override.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00173">173</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::already_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00092">jobs::profile_functions::enter_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00093">jobs::profile_functions::leave_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00788">m_initialized</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00767">m_profile_functions</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00869">m_profiling_active</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">m_initialized</a>)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">result::already_initialized</a>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">m_profile_functions</a> = functions;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ae49be458491da0ac65c72411aeae881f">m_profiling_active</a> = (functions.enter_scope != <span class="keyword">nullptr</span> &amp;&amp; functions.leave_scope != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_ace955128ea7c9136f4257283c07b8a02"><div class="ttname"><a href="classjobs_1_1scheduler.html#ace955128ea7c9136f4257283c07b8a02">jobs::scheduler::m_initialized</a></div><div class="ttdeci">bool m_initialized</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00788">jobs_scheduler.h:788</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076ac400a9425da634214ac0fdf0a61d41e9">jobs::result::already_initialized</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae49be458491da0ac65c72411aeae881f"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae49be458491da0ac65c72411aeae881f">jobs::scheduler::m_profiling_active</a></div><div class="ttdeci">static bool m_profiling_active</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00869">jobs_scheduler.h:869</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a5b6d26a6b0aac897cddb91a72b856ac7"><div class="ttname"><a href="classjobs_1_1scheduler.html#a5b6d26a6b0aac897cddb91a72b856ac7">jobs::scheduler::m_profile_functions</a></div><div class="ttdeci">profile_functions m_profile_functions</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00767">jobs_scheduler.h:767</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37598edcaf1f0f0eeb0290a85738d99a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37598edcaf1f0f0eeb0290a85738d99a">&#9670;&nbsp;</a></span>sleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjobs_1_1timeout.html">timeout</a>&#160;</td>
          <td class="paramname"><em>duration</em> = <code><a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Puts the job or thread to sleep for the given amount of time. </p>
<p>If called from a job this is non-blocking, and will queue the job for execution after the time period has elapsed. If called from any other place, it will block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration</td><td>The length of time before this function returns.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01538">1538</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__utils_8h_source.html#l01088">jobs::timeout::duration</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01624">get_active_job_definition()</a>, <a class="el" href="jobs__utils_8h_source.html#l01113">jobs::timeout::is_infinite()</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::job</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">jobs::internal::sleeping</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::timeout</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>
<div class="fragment"><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="comment">// I hope this isn&#39;t intentional ...</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    assert(!duration.is_infinite());</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    internal::job_definition* definition = <a class="code" href="classjobs_1_1scheduler.html#ab200b5be7c531ca56635616ffcbdbed8">get_active_job_definition</a>();</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">// If we have a job context, put it to sleep.</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">if</span> (definition != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keyword">volatile</span> <span class="keywordtype">bool</span> timeout_called = <span class="keyword">false</span>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        definition-&gt;context.scheduler-&gt;write_log(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;sleeping fiber=%zi:%zi&quot;</span>, definition-&gt;context.fiber_pool_index, definition-&gt;context.fiber_index);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="comment">// Put job to sleep.</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        definition-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">internal::job_status::sleeping</a>;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        <span class="comment">// Queue a wakeup.</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;        <span class="keywordtype">size_t</span> schedule_handle;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = definition-&gt;context.scheduler-&gt;m_callback_scheduler.schedule(duration, schedule_handle, [&amp;]() {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            definition-&gt;context.scheduler-&gt;write_log(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">debug_log_group::job</a>, <span class="stringliteral">&quot;wakeup fiber=%zi:%zi&quot;</span>, definition-&gt;context.fiber_pool_index, definition-&gt;context.fiber_index);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            timeout_called = <span class="keyword">true</span>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;            definition-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            definition-&gt;context.scheduler-&gt;requeue_job(definition-&gt;index);</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        });</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <span class="comment">// Failed to schedule a wakeup? Abort.</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        {</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            definition-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        }</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="comment">// Supress requeueing the job, we will do this when the callback returns.</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_supress_requeue = <span class="keyword">true</span>;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">// Switch back to worker which will requeue fiber for execution later.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        definition-&gt;context.scheduler-&gt;switch_context(<a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_context);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="comment">// We shouldn&#39;t be able to get back here without a timeout.</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        assert(timeout_called);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// No job context? Blocking sleep then I guess?</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="comment">// Not really sure why you would want this ... But better to support all situations I guess.</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        std::this_thread::sleep_for(std::chrono::milliseconds(duration.duration));</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div><div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7a9dddd5ce1b1375bc497feeb871842d4b">jobs::debug_log_group::job</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8ad98cb5df35fc9e0f42fb883d794ad12f">jobs::internal::job_status::sleeping</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab200b5be7c531ca56635616ffcbdbed8"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab200b5be7c531ca56635616ffcbdbed8">jobs::scheduler::get_active_job_definition</a></div><div class="ttdeci">static internal::job_definition * get_active_job_definition()</div><div class="ttdoc">Gets the definition of the job currently running on calling thread. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01624">jobs_scheduler.cpp:1624</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::result::timeout</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74f392116598e66d59d254ab5557591a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f392116598e66d59d254ab5557591a">&#9670;&nbsp;</a></span>switch_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::switch_context </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a> &amp;&#160;</td>
          <td class="paramname"><em>new_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Switches from current job execution context to a new one. </p>
<p>This is a helper function that essentially just calls leave_context on the current context and enter_context on the new context provided.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_context</td><td>Context to switch to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">650</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00622">enter_context()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00610">leave_context()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00656">return_to_worker()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00824">worker_fiber_entry_point()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a8c2df77fa18d7b459408579671d5ec17">leave_context</a>(*<a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.active_job_context);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#ab7e3db0510cdfd55bcf9b0169ed69495">enter_context</a>(new_context);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a8c2df77fa18d7b459408579671d5ec17"><div class="ttname"><a href="classjobs_1_1scheduler.html#a8c2df77fa18d7b459408579671d5ec17">jobs::scheduler::leave_context</a></div><div class="ttdeci">void leave_context(internal::job_context &amp;old_context)</div><div class="ttdoc">Leaves the given job execution context in preperation for entering another. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00610">jobs_scheduler.cpp:610</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab7e3db0510cdfd55bcf9b0169ed69495"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab7e3db0510cdfd55bcf9b0169ed69495">jobs::scheduler::enter_context</a></div><div class="ttdeci">void enter_context(internal::job_context &amp;new_context)</div><div class="ttdoc">Enters the given job execution context. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00622">jobs_scheduler.cpp:622</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51aeb6bd30bfffce5f2dfc1deeb91d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51aeb6bd30bfffce5f2dfc1deeb91d47">&#9670;&nbsp;</a></span>wait_for_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::wait_for_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classjobs_1_1job__handle.html">job_handle</a>&#160;</td>
          <td class="paramname"><em>job_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structjobs_1_1timeout.html">timeout</a>&#160;</td>
          <td class="paramname"><em>wait_timeout</em> = <code><a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Waits for a job to complete. </p>
<p>If called from a job this is non-blocking, and will queue the job for execution after the given job completes. If called from any other place, it will block.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="classjobs_1_1job__handle.html" title="Represents an instance of a job that has been created by the scheduler. ">job_handle</a></td><td>Job to wait for completion of. </td></tr>
    <tr><td class="paramname">wait_timeout</td><td>If provided, this function will wait a maximum of this time. If the function returns due to a timeout the result provided will be <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">1364</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__callback__scheduler_8cpp_source.html#l00164">jobs::internal::callback_scheduler::cancel()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::completed</a>, <a class="el" href="jobs__utils_8h_source.html#l01088">jobs::timeout::duration</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01601">get_active_job_context()</a>, <a class="el" href="jobs__utils_8cpp_source.html#l00062">jobs::internal::stopwatch::get_elapsed_ms()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00423">get_job_definition()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01615">get_worker_job_context()</a>, <a class="el" href="jobs__job_8h_source.html#l00405">jobs::internal::job_definition::index</a>, <a class="el" href="jobs__job_8cpp_source.html#l00425">jobs::job_handle::is_complete()</a>, <a class="el" href="jobs__utils_8h_source.html#l01113">jobs::timeout::is_infinite()</a>, <a class="el" href="jobs__job_8h_source.html#l00100">jobs::internal::job_context::job_def</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00409">job_handle</a>, <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00845">m_callback_scheduler</a>, <a class="el" href="jobs__job_8h_source.html#l00378">jobs::job_handle::m_index</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00830">m_task_complete_cvar</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00827">m_task_complete_mutex</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::pending</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::running</a>, <a class="el" href="jobs__callback__scheduler_8cpp_source.html#l00138">jobs::internal::callback_scheduler::schedule()</a>, <a class="el" href="jobs__utils_8cpp_source.html#l00050">jobs::internal::stopwatch::start()</a>, <a class="el" href="jobs__job_8h_source.html#l00423">jobs::internal::job_definition::status</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::timeout</a>, <a class="el" href="jobs__job_8h_source.html#l00447">jobs::internal::job_definition::wait_job</a>, <a class="el" href="jobs__job_8h_source.html#l00453">jobs::internal::job_definition::wait_list</a>, <a class="el" href="jobs__job_8h_source.html#l00450">jobs::internal::job_definition::wait_list_link</a>, <a class="el" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::waiting_on_job</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__job_8cpp_source.html#l00454">jobs::job_handle::wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;{</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::wait_for_job&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a2d95542317e215cbea1d7b5018bf6011">internal::job_context</a>* context = <a class="code" href="classjobs_1_1scheduler.html#a372a2b2959f720c99d75acd96918fb9f">get_active_job_context</a>();</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a2d95542317e215cbea1d7b5018bf6011">internal::job_context</a>* worker_context = <a class="code" href="classjobs_1_1scheduler.html#ad7755d91fb9ecf77a3860d86727af920">get_worker_job_context</a>();</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="comment">// If we have a job context, adds this event to its dependencies and put it to sleep.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">if</span> (context != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        assert(worker_context != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <span class="keyword">volatile</span> <span class="keywordtype">bool</span> timeout_called = <span class="keyword">false</span>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="comment">// Put job to sleep.</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        context-&gt;job_def-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">internal::job_status::waiting_on_job</a>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        context-&gt;job_def-&gt;wait_job = job_handle_in;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="comment">// Queue a wakeup.</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordtype">size_t</span> schedule_handle;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">if</span> (!wait_timeout.is_infinite())</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;            <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> res = <a class="code" href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">m_callback_scheduler</a>.<a class="code" href="classjobs_1_1internal_1_1callback__scheduler.html#af59f1abdafedfb4d0810165d570f2ee4">schedule</a>(wait_timeout, schedule_handle, [&amp;]() {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                <span class="comment">// Do this atomatically to make sure we don&#39;t set it to pending after the scheduler </span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                <span class="comment">// has already done that due to this event being signalled.</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">internal::job_status</a> expected = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">internal::job_status::waiting_on_job</a>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                <span class="keywordflow">if</span> (context-&gt;job_def-&gt;status.compare_exchange_strong(expected, <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">internal::job_status::pending</a>))</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                    timeout_called = <span class="keyword">true</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                    <a class="code" href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">requeue_job</a>(context-&gt;job_def-&gt;index);</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            });</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="comment">// Failed to schedule a wakeup? Abort.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            <span class="keywordflow">if</span> (res != <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>)</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                context-&gt;job_def-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">internal::job_status::running</a>;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        }</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <span class="comment">// Attach this to wakeup queue for job.</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        <span class="keywordtype">bool</span> is_complete = <span class="keyword">false</span>;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            internal::job_definition&amp; other_job_def = <a class="code" href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">get_job_definition</a>(job_handle_in.m_index);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            internal::optional_shared_lock&lt;internal::spinwait_mutex&gt; lock(other_job_def.wait_list.get_mutex());</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            <span class="comment">// Check it hasn&#39;t completed while acquiring lock.</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;            <span class="keywordflow">if</span> (other_job_def.status == <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">internal::job_status::completed</a>)</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                context-&gt;job_def-&gt;status = <a class="code" href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">internal::job_status::running</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                is_complete = <span class="keyword">true</span>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            }</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                context-&gt;job_def-&gt;wait_list_link.value = context-&gt;job_def;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                other_job_def.wait_list.add(&amp;context-&gt;job_def-&gt;wait_list_link, <span class="keyword">false</span>);</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            }</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">if</span> (!is_complete)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <span class="comment">// Supress requeueing the job, we will do this when the callback returns.</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_supress_requeue = <span class="keyword">true</span>;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <span class="comment">// Switch back to worker which will requeue fiber for execution later.          </span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">switch_context</a>(*worker_context);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="comment">// Cleanup</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        context-&gt;job_def-&gt;wait_job = <a class="code" href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">job_handle</a>();</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="comment">// If we timed out, just escape here.</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keywordflow">if</span> (timeout_called &amp;&amp; !is_complete)</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="comment">// Cancel callback and clear our job handle.</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">if</span> (!wait_timeout.is_infinite())</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <a class="code" href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">m_callback_scheduler</a>.<a class="code" href="classjobs_1_1internal_1_1callback__scheduler.html#a4d8f6a2f815d12c8fcc25bedfde5189c">cancel</a>(schedule_handle);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="comment">// If we have no job context, we just have to do a blocking wait.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        internal::stopwatch timer;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        timer.start();</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        <span class="keywordflow">while</span> (!job_handle_in.is_complete())</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <span class="keywordflow">if</span> (timer.get_elapsed_ms() &gt; wait_timeout.duration)</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            }</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="preprocessor">    #if 0 // Not supported right now as helper thread must be converted to a fiber.</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">execute_next_job</a>(assist_on_tasks, <span class="keyword">false</span>))</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    #endif</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            {</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classjobs_1_1scheduler.html#a84b65d121529aeb09d63cc13eb7e2a5e">m_task_complete_mutex</a>);</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                <span class="keywordflow">if</span> (job_handle_in.is_complete())</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                    <span class="keywordflow">if</span> (wait_timeout.is_infinite())</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                    {</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                        <a class="code" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a>.wait(lock);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                    }</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                    {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                        <span class="keywordtype">size_t</span> ms_remaining = wait_timeout.duration - timer.get_elapsed_ms();</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                        <span class="keywordflow">if</span> (ms_remaining &gt; 0)</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                        {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                            <a class="code" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a>.wait_for(lock, std::chrono::milliseconds(ms_remaining));</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                        }</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                    }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            }</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a7cbce0967cbfde909d7fe58945eed62c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">jobs::scheduler::m_task_complete_cvar</a></div><div class="ttdeci">std::condition_variable m_task_complete_cvar</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00830">jobs_scheduler.h:830</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a28b6da662ffe7c4ad231f2d7f3828aa9"><div class="ttname"><a href="classjobs_1_1scheduler.html#a28b6da662ffe7c4ad231f2d7f3828aa9">jobs::scheduler::m_callback_scheduler</a></div><div class="ttdeci">internal::callback_scheduler m_callback_scheduler</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00845">jobs_scheduler.h:845</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aed591baef6580ec5c3c1e0ba9901b278"><div class="ttname"><a href="classjobs_1_1scheduler.html#aed591baef6580ec5c3c1e0ba9901b278">jobs::scheduler::requeue_job</a></div><div class="ttdeci">result requeue_job(size_t index)</div><div class="ttdoc">Requeues a job that has previously been picked up for execution. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01016">jobs_scheduler.cpp:1016</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a896ca20cc0db225552c82ee665e16884"><div class="ttname"><a href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">jobs::scheduler::execute_next_job</a></div><div class="ttdeci">bool execute_next_job(priority job_priorities, bool can_block)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01206">jobs_scheduler.cpp:1206</a></div></div>
<div class="ttc" id="classjobs_1_1internal_1_1callback__scheduler_html_af59f1abdafedfb4d0810165d570f2ee4"><div class="ttname"><a href="classjobs_1_1internal_1_1callback__scheduler.html#af59f1abdafedfb4d0810165d570f2ee4">jobs::internal::callback_scheduler::schedule</a></div><div class="ttdeci">result schedule(timeout duration, size_t &amp;handle, const callback_scheduler_function &amp;callback)</div><div class="ttdoc">Schedules a new callback after the given timeout. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__callback__scheduler_8cpp_source.html#l00138">jobs_callback_scheduler.cpp:138</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a2d95542317e215cbea1d7b5018bf6011"><div class="ttname"><a href="classjobs_1_1scheduler.html#a2d95542317e215cbea1d7b5018bf6011">jobs::scheduler::job_context</a></div><div class="ttdeci">friend class internal::job_context</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00412">jobs_scheduler.h:412</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8">jobs::internal::job_status</a></div><div class="ttdeci">job_status</div><div class="ttdoc">Current status of a job. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__job_8h_source.html#l00133">jobs_job.h:133</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a75101dcdfc88455bcafc9e53e0b06689">jobs::internal::job_status::running</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a372a2b2959f720c99d75acd96918fb9f"><div class="ttname"><a href="classjobs_1_1scheduler.html#a372a2b2959f720c99d75acd96918fb9f">jobs::scheduler::get_active_job_context</a></div><div class="ttdeci">static internal::job_context * get_active_job_context()</div><div class="ttdoc">Gets the context of the job currently running on calling thread. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01601">jobs_scheduler.cpp:1601</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="classjobs_1_1internal_1_1callback__scheduler_html_a4d8f6a2f815d12c8fcc25bedfde5189c"><div class="ttname"><a href="classjobs_1_1internal_1_1callback__scheduler.html#a4d8f6a2f815d12c8fcc25bedfde5189c">jobs::internal::callback_scheduler::cancel</a></div><div class="ttdeci">result cancel(size_t handle)</div><div class="ttdoc">Cancels a previously scheduled callback. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__callback__scheduler_8cpp_source.html#l00164">jobs_callback_scheduler.cpp:164</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8aaa8fb77e57d1ca18d593e909729871fe">jobs::internal::job_status::completed</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a2ba6febaeba7d4975f66ef202d36f317">jobs::internal::job_status::waiting_on_job</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">jobs::result</a></div><div class="ttdeci">result</div><div class="ttdoc">Result of an operation. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8h_source.html#l00043">jobs_enums.h:43</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a72b273ff16629eac984650db03af8314"><div class="ttname"><a href="classjobs_1_1scheduler.html#a72b273ff16629eac984650db03af8314">jobs::scheduler::get_job_definition</a></div><div class="ttdeci">internal::job_definition &amp; get_job_definition(size_t index)</div><div class="ttdoc">Gets a job definition by its pool index. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00423">jobs_scheduler.h:423</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a84b65d121529aeb09d63cc13eb7e2a5e"><div class="ttname"><a href="classjobs_1_1scheduler.html#a84b65d121529aeb09d63cc13eb7e2a5e">jobs::scheduler::m_task_complete_mutex</a></div><div class="ttdeci">std::mutex m_task_complete_mutex</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00827">jobs_scheduler.h:827</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab2abca9d802342d2f25b08cdb7072b5b"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab2abca9d802342d2f25b08cdb7072b5b">jobs::scheduler::job_handle</a></div><div class="ttdeci">friend class job_handle</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00409">jobs_scheduler.h:409</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a74f392116598e66d59d254ab5557591a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">jobs::scheduler::switch_context</a></div><div class="ttdeci">void switch_context(internal::job_context &amp;new_context)</div><div class="ttdoc">Switches from current job execution context to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00650">jobs_scheduler.cpp:650</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4"><div class="ttname"><a href="namespacejobs_1_1internal.html#affa587321e99cccfac52fe94992b95d8a7c6c2e5d48ab37a007cbf70d3ea25fa4">jobs::internal::job_status::pending</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::result::timeout</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ad7755d91fb9ecf77a3860d86727af920"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad7755d91fb9ecf77a3860d86727af920">jobs::scheduler::get_worker_job_context</a></div><div class="ttdeci">static internal::job_context * get_worker_job_context()</div><div class="ttdoc">Gets the context of the worker management fiber running individual jobs. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01615">jobs_scheduler.cpp:1615</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf9665ce530ee3e20e3c14c5419df588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf9665ce530ee3e20e3c14c5419df588">&#9670;&nbsp;</a></span>wait_for_job_available()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::wait_for_job_available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Blocks until a new job has been singled as being available by <a class="el" href="classjobs_1_1scheduler.html#a39cd8441c302062ec01b617cfadb1770">notify_job_available</a>. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">1666</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__defines_8h_source.html#l00102">jobs_profile_scope</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00836">m_available_jobs</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00791">m_destroying</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00824">m_task_available_cvar</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00821">m_task_available_mutex</a>, and <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">get_next_job()</a>.</p>
<div class="fragment"><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;{</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a>(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="stringliteral">&quot;scheduler::wait_for_job_available&quot;</span>, <span class="keyword">this</span>);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classjobs_1_1scheduler.html#ae370400b5cfc326c5463042cdefb8c0d">m_task_available_mutex</a>);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a> || <a class="code" href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">m_available_jobs</a> &gt; 0)</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    {</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">m_task_available_cvar</a>.wait(lock);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_abb3c08cc7b40bdbdb1a7e179b13f739e"><div class="ttname"><a href="classjobs_1_1scheduler.html#abb3c08cc7b40bdbdb1a7e179b13f739e">jobs::scheduler::m_task_available_cvar</a></div><div class="ttdeci">std::condition_variable m_task_available_cvar</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00824">jobs_scheduler.h:824</a></div></div>
<div class="ttc" id="jobs__defines_8h_html_a2289b2340519371853dd26316d7240b2"><div class="ttname"><a href="jobs__defines_8h.html#a2289b2340519371853dd26316d7240b2">jobs_profile_scope</a></div><div class="ttdeci">#define jobs_profile_scope(...)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__defines_8h_source.html#l00102">jobs_defines.h:102</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab259d6c0c4495c7a69668ee0e7233b60"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">jobs::scheduler::m_destroying</a></div><div class="ttdeci">bool m_destroying</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00791">jobs_scheduler.h:791</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ae370400b5cfc326c5463042cdefb8c0d"><div class="ttname"><a href="classjobs_1_1scheduler.html#ae370400b5cfc326c5463042cdefb8c0d">jobs::scheduler::m_task_available_mutex</a></div><div class="ttdeci">std::mutex m_task_available_mutex</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00821">jobs_scheduler.h:821</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a8ed066fd392f486a19b49d066b5c569b"><div class="ttname"><a href="classjobs_1_1scheduler.html#a8ed066fd392f486a19b49d066b5c569b">jobs::scheduler::m_available_jobs</a></div><div class="ttdeci">std::atomic&lt; size_t &gt; m_available_jobs</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00836">jobs_scheduler.h:836</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02d4eabd757213f9f3ec4c190ef2257d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d4eabd757213f9f3ec4c190ef2257d">&#9670;&nbsp;</a></span>wait_until_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076">result</a> jobs::scheduler::wait_until_idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structjobs_1_1timeout.html">timeout</a>&#160;</td>
          <td class="paramname"><em>wait_timeout</em> = <code><a class="el" href="structjobs_1_1timeout.html#aa9aa3cdebb3dd5f66e95029b6179144f">timeout::infinite</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits until all jobs are complete and the schedulers workers are idle. </p>
<p>This call is blocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wait_timeout</td><td>If provided, this function will wait a maximum of this time. If the function returns due to a timeout the result provided will be <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value indicating the success of this function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">1321</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__utils_8h_source.html#l01088">jobs::timeout::duration</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__utils_8cpp_source.html#l00062">jobs::internal::stopwatch::get_elapsed_ms()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01499">is_idle()</a>, <a class="el" href="jobs__utils_8h_source.html#l01113">jobs::timeout::is_infinite()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00791">m_destroying</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00830">m_task_complete_cvar</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00827">m_task_complete_mutex</a>, <a class="el" href="jobs__utils_8cpp_source.html#l00050">jobs::internal::stopwatch::start()</a>, <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::success</a>, and <a class="el" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::timeout</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    internal::stopwatch timer;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    timer.start();</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classjobs_1_1scheduler.html#ad858672d43d286d43fca605c051cb47a">is_idle</a>() || <a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a>)</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">if</span> (timer.get_elapsed_ms() &gt; wait_timeout.duration)</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">result::timeout</a>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        }</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="preprocessor">#if 0 // Not supported right now as helper thread must be converted to a fiber.</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">execute_next_job</a>(assist_on_tasks, <span class="keyword">false</span>))</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;#endif</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classjobs_1_1scheduler.html#a84b65d121529aeb09d63cc13eb7e2a5e">m_task_complete_mutex</a>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            </div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#ad858672d43d286d43fca605c051cb47a">is_idle</a>() || <a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a>)</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                <span class="keywordflow">if</span> (wait_timeout.is_infinite())</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    <a class="code" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a>.wait(lock);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                    <span class="keywordtype">size_t</span> ms_remaining = wait_timeout.duration - timer.get_elapsed_ms();</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                    <span class="keywordflow">if</span> (ms_remaining &gt; 0)</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                    {</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                        <a class="code" href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">m_task_complete_cvar</a>.wait_for(lock, std::chrono::milliseconds(ms_remaining));</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                    }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">result::success</a>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a7cbce0967cbfde909d7fe58945eed62c"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7cbce0967cbfde909d7fe58945eed62c">jobs::scheduler::m_task_complete_cvar</a></div><div class="ttdeci">std::condition_variable m_task_complete_cvar</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00830">jobs_scheduler.h:830</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a896ca20cc0db225552c82ee665e16884"><div class="ttname"><a href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">jobs::scheduler::execute_next_job</a></div><div class="ttdeci">bool execute_next_job(priority job_priorities, bool can_block)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01206">jobs_scheduler.cpp:1206</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab259d6c0c4495c7a69668ee0e7233b60"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">jobs::scheduler::m_destroying</a></div><div class="ttdeci">bool m_destroying</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00791">jobs_scheduler.h:791</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ad858672d43d286d43fca605c051cb47a"><div class="ttname"><a href="classjobs_1_1scheduler.html#ad858672d43d286d43fca605c051cb47a">jobs::scheduler::is_idle</a></div><div class="ttdeci">bool is_idle() const</div><div class="ttdoc">Returns true if all jobs are complete and the scheduler and it&amp;#39;s workers are idle. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01499">jobs_scheduler.cpp:1499</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a260ca9dd8a4577fc00b7bd5810298076">jobs::result::success</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a84b65d121529aeb09d63cc13eb7e2a5e"><div class="ttname"><a href="classjobs_1_1scheduler.html#a84b65d121529aeb09d63cc13eb7e2a5e">jobs::scheduler::m_task_complete_mutex</a></div><div class="ttdeci">std::mutex m_task_complete_mutex</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00827">jobs_scheduler.h:827</a></div></div>
<div class="ttc" id="namespacejobs_html_a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc"><div class="ttname"><a href="namespacejobs.html#a59f65361c05d5ce084b1d2dac2926076a90272dda245ae1fb3cf197e91a8689dc">jobs::result::timeout</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a063d0a773bb784fd0d9f819af7fd3007"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a063d0a773bb784fd0d9f819af7fd3007">&#9670;&nbsp;</a></span>worker_entry_point()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::worker_entry_point </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pool_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>worker_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classjobs_1_1internal_1_1thread.html">internal::thread</a> &amp;&#160;</td>
          <td class="paramname"><em>this_thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a> &amp;&#160;</td>
          <td class="paramname"><em>thread_pool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Entry point for all worker threads. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00793">793</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__fiber_8cpp_source.html#l00167">jobs::internal::fiber::convert_fiber_to_thread()</a>, <a class="el" href="jobs__fiber_8cpp_source.html#l00143">jobs::internal::fiber::convert_thread_to_fiber()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00378">jobs::scheduler::thread_pool::job_priorities</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00791">m_destroying</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;{</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keyword">auto</span>&amp; thread_state = <a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    thread_state.job_index = 0;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    thread_state.cloned_job_index = 0;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    thread_state.job_context.reset();</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    thread_state.job_context.scheduler = <span class="keyword">this</span>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    thread_state.job_context.has_fiber = <span class="keyword">true</span>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    thread_state.job_context.is_fiber_raw = <span class="keyword">true</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="classjobs_1_1internal_1_1fiber.html#a060d30f56f64b3eed50cbc5270981a67">internal::fiber::convert_thread_to_fiber</a>(thread_state.job_context.raw_fiber);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    thread_state.job_context.job_def = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    thread_state.active_job_context = &amp;thread_state.job_context;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">debug_log_group::worker</a>, <span class="stringliteral">&quot;worker started, pool=%zi worker=%zi priorities=0x%08x&quot;</span>, pool_index, worker_index, thread_pool.job_priorities);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    thread_state.active_job_context-&gt;enter_scope(<a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">profile_scope_type::worker</a>, <span class="keyword">false</span>, <span class="stringliteral">&quot;Worker (pool=%zi, index=%zi)&quot;</span>, pool_index, worker_index);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">m_destroying</a>)</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">execute_next_job</a>(thread_pool.job_priorities, <span class="keyword">true</span>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    thread_state.active_job_context-&gt;leave_scope();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">debug_log_group::worker</a>, <span class="stringliteral">&quot;worker terminated, pool=%zi worker=%zi&quot;</span>, pool_index, worker_index);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="classjobs_1_1internal_1_1fiber.html#ac36b8d88ad38ac36d0b08613b8317988">internal::fiber::convert_fiber_to_thread</a>();</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;}</div><div class="ttc" id="classjobs_1_1scheduler_html_a896ca20cc0db225552c82ee665e16884"><div class="ttname"><a href="classjobs_1_1scheduler.html#a896ca20cc0db225552c82ee665e16884">jobs::scheduler::execute_next_job</a></div><div class="ttdeci">bool execute_next_job(priority job_priorities, bool can_block)</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l01206">jobs_scheduler.cpp:1206</a></div></div>
<div class="ttc" id="classjobs_1_1internal_1_1fiber_html_a060d30f56f64b3eed50cbc5270981a67"><div class="ttname"><a href="classjobs_1_1internal_1_1fiber.html#a060d30f56f64b3eed50cbc5270981a67">jobs::internal::fiber::convert_thread_to_fiber</a></div><div class="ttdeci">static void convert_thread_to_fiber(fiber &amp;result)</div><div class="ttdoc">Converts the current thread to a fiber. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__fiber_8cpp_source.html#l00143">jobs_fiber.cpp:143</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_ab259d6c0c4495c7a69668ee0e7233b60"><div class="ttname"><a href="classjobs_1_1scheduler.html#ab259d6c0c4495c7a69668ee0e7233b60">jobs::scheduler::m_destroying</a></div><div class="ttdeci">bool m_destroying</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00791">jobs_scheduler.h:791</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="classjobs_1_1internal_1_1fiber_html_ac36b8d88ad38ac36d0b08613b8317988"><div class="ttname"><a href="classjobs_1_1internal_1_1fiber.html#ac36b8d88ad38ac36d0b08613b8317988">jobs::internal::fiber::convert_fiber_to_thread</a></div><div class="ttdeci">static void convert_fiber_to_thread()</div><div class="ttdoc">Converts the current fiber to a thread. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__fiber_8cpp_source.html#l00167">jobs_fiber.cpp:167</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea0eaf65b9cc9ea8891c4181d73a9bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea0eaf65b9cc9ea8891c4181d73a9bb8">&#9670;&nbsp;</a></span>worker_fiber_entry_point()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::worker_fiber_entry_point </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pool_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>worker_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Entry point for all worker job fibers. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00824">824</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__scheduler_8cpp_source.html#l00840">execute_fiber_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00650">switch_context()</a>, <a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::verbose</a>, <a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::worker</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00045">WorkerThreadState</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">debug_log_group::worker</a>, <span class="stringliteral">&quot;fiber started, pool=%zi worker=%zi&quot;</span>, pool_index, worker_index);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment">// Execute the job we have been provided.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#aeacf23cc37e1d0f7612942dd63b192ba">execute_fiber_job</a>();</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="comment">// Switch back to the main worker thread fiber.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">switch_context</a>(<a class="code" href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a>.job_context);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">write_log</a>(<a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">debug_log_verbosity::verbose</a>, <a class="code" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">debug_log_group::worker</a>, <span class="stringliteral">&quot;fiber terminated, pool=%zi worker=%zi&quot;</span>, pool_index, worker_index);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div><div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa2c7aea4237e25b4f8ee3b0bf77d6fed0">jobs::debug_log_verbosity::verbose</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aeacf23cc37e1d0f7612942dd63b192ba"><div class="ttname"><a href="classjobs_1_1scheduler.html#aeacf23cc37e1d0f7612942dd63b192ba">jobs::scheduler::execute_fiber_job</a></div><div class="ttdeci">void execute_fiber_job()</div><div class="ttdoc">Executes the job assinged to the fiber we are running within. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00840">jobs_scheduler.cpp:840</a></div></div>
<div class="ttc" id="jobs__scheduler_8cpp_html_ae80a6d90cdbc25fde66f0e5444d2e1d3"><div class="ttname"><a href="jobs__scheduler_8cpp.html#ae80a6d90cdbc25fde66f0e5444d2e1d3">WorkerThreadState</a></div><div class="ttdeci">#define WorkerThreadState</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00045">jobs_scheduler.cpp:45</a></div></div>
<div class="ttc" id="namespacejobs_html_ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134"><div class="ttname"><a href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7ab61822e8357dcaff77eaaccf348d9134">jobs::debug_log_group::worker</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a74f392116598e66d59d254ab5557591a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a74f392116598e66d59d254ab5557591a">jobs::scheduler::switch_context</a></div><div class="ttdeci">void switch_context(internal::job_context &amp;new_context)</div><div class="ttdoc">Switches from current job execution context to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00650">jobs_scheduler.cpp:650</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a4e02624b4ad96ccd0fa251fa8f865d97"><div class="ttname"><a href="classjobs_1_1scheduler.html#a4e02624b4ad96ccd0fa251fa8f865d97">jobs::scheduler::write_log</a></div><div class="ttdeci">void write_log(debug_log_verbosity level, debug_log_group group, const char *message,...)</div><div class="ttdoc">Writes a log message to sink provided by set_debug_output. </div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8cpp_source.html#l00750">jobs_scheduler.cpp:750</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e02624b4ad96ccd0fa251fa8f865d97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e02624b4ad96ccd0fa251fa8f865d97">&#9670;&nbsp;</a></span>write_log()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jobs::scheduler::write_log </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacejobs.html#ab8cd038ddce7c48eabbed1d0a3428ad7">debug_log_group</a>&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes a log message to sink provided by set_debug_output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Verbosity level of log message. </td></tr>
    <tr><td class="paramname">group</td><td>Semantic group this message belongs to. </td></tr>
    <tr><td class="paramname">message</td><td>Printf style format for this log. </td></tr>
    <tr><td class="paramname">...</td><td>Arguments for printf formatting of message. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">750</a> of file <a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="jobs__enums_8cpp_source.html#l00035">jobs::internal::debug_log_group_strings</a>, <a class="el" href="jobs__enums_8cpp_source.html#l00027">jobs::internal::debug_log_verbosity_strings</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00800">m_debug_output_function</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00803">m_debug_output_max_verbosity</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00809">m_log_buffer</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00806">m_log_format_buffer</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00812">m_log_mutex</a>, <a class="el" href="jobs__scheduler_8h_source.html#l00866">m_worker_thread_state</a>, and <a class="el" href="jobs__scheduler_8h_source.html#l00741">max_log_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00717">add_job_dependency()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01278">allocate_fiber()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">create_counter()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00524">create_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">dispatch_batch()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">dispatch_job()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00051">jobs::internal::job_context::enter_scope()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00840">execute_fiber_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01051">get_next_job_from_queue()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, <a class="el" href="jobs__callback__scheduler_8cpp_source.html#l00138">jobs::internal::callback_scheduler::schedule()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00793">worker_entry_point()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00824">worker_fiber_entry_point()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">m_debug_output_function</a> == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)level &gt; (<span class="keywordtype">int</span>)<a class="code" href="classjobs_1_1scheduler.html#aab6af0e4252b5a99b5172d9123f56bed">m_debug_output_max_verbosity</a>)</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classjobs_1_1scheduler.html#a1b22587499159b2b807251fc508c26bf">m_log_mutex</a>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// Format message.</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    va_list list;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    va_start(list, <a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">message</a>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    vsnprintf(<a class="code" href="classjobs_1_1scheduler.html#a7ce557ba6b6073d06b60ee26bb72b38a">m_log_buffer</a>, <a class="code" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>, <a class="code" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">message</a>, list);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    va_end(list);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// Format log in format:</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">//  [verbose] warning: message</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="preprocessor">#if defined(JOBS_USE_VERBOSE_LOGGING)</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    snprintf(<a class="code" href="classjobs_1_1scheduler.html#aad813c5647668bc154072569fb777bd5">m_log_format_buffer</a>, <a class="code" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>, <span class="stringliteral">&quot;[%08x][%p][%s] %s: %s\n&quot;</span>, </div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        *reinterpret_cast&lt;unsigned int*&gt;(&amp;std::this_thread::get_id()),</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a90147019f7a194156fb559dd0e5fff0b">m_worker_thread_state</a>,</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#a178d15be584a4b5d0015cb3d3b06c4f9">internal::debug_log_group_strings</a>[(<span class="keywordtype">int</span>)group], </div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#a274e9517c76c6839c2abc135db0eca7c">internal::debug_log_verbosity_strings</a>[(<span class="keywordtype">int</span>)level], </div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a7ce557ba6b6073d06b60ee26bb72b38a">m_log_buffer</a>);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    snprintf(<a class="code" href="classjobs_1_1scheduler.html#aad813c5647668bc154072569fb777bd5">m_log_format_buffer</a>, <a class="code" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>, <span class="stringliteral">&quot;[%s] %s: %s\n&quot;</span>,</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#a178d15be584a4b5d0015cb3d3b06c4f9">internal::debug_log_group_strings</a>[(<span class="keywordtype">int</span>)group],</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="namespacejobs_1_1internal.html#a274e9517c76c6839c2abc135db0eca7c">internal::debug_log_verbosity_strings</a>[(<span class="keywordtype">int</span>)level],</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <a class="code" href="classjobs_1_1scheduler.html#a7ce557ba6b6073d06b60ee26bb72b38a">m_log_buffer</a>);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">m_debug_output_function</a>(level, group, <a class="code" href="classjobs_1_1scheduler.html#aad813c5647668bc154072569fb777bd5">m_log_format_buffer</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;}</div><div class="ttc" id="namespacejobs_1_1internal_html_a274e9517c76c6839c2abc135db0eca7c"><div class="ttname"><a href="namespacejobs_1_1internal.html#a274e9517c76c6839c2abc135db0eca7c">jobs::internal::debug_log_verbosity_strings</a></div><div class="ttdeci">const char * debug_log_verbosity_strings[(int) debug_log_verbosity::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8cpp_source.html#l00027">jobs_enums.cpp:27</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a1b22587499159b2b807251fc508c26bf"><div class="ttname"><a href="classjobs_1_1scheduler.html#a1b22587499159b2b807251fc508c26bf">jobs::scheduler::m_log_mutex</a></div><div class="ttdeci">std::mutex m_log_mutex</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00812">jobs_scheduler.h:812</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aab6af0e4252b5a99b5172d9123f56bed"><div class="ttname"><a href="classjobs_1_1scheduler.html#aab6af0e4252b5a99b5172d9123f56bed">jobs::scheduler::m_debug_output_max_verbosity</a></div><div class="ttdeci">debug_log_verbosity m_debug_output_max_verbosity</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00803">jobs_scheduler.h:803</a></div></div>
<div class="ttc" id="namespacejobs_html_a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3"><div class="ttname"><a href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6fa78e731027d8fd50ed642340b7c9a63b3">jobs::debug_log_verbosity::message</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a7ce557ba6b6073d06b60ee26bb72b38a"><div class="ttname"><a href="classjobs_1_1scheduler.html#a7ce557ba6b6073d06b60ee26bb72b38a">jobs::scheduler::m_log_buffer</a></div><div class="ttdeci">char m_log_buffer[max_log_size]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00809">jobs_scheduler.h:809</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_afc191da2d59a7551329f6d1b1f2ba32e"><div class="ttname"><a href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">jobs::scheduler::max_log_size</a></div><div class="ttdeci">static const int max_log_size</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00741">jobs_scheduler.h:741</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_a90147019f7a194156fb559dd0e5fff0b"><div class="ttname"><a href="classjobs_1_1scheduler.html#a90147019f7a194156fb559dd0e5fff0b">jobs::scheduler::m_worker_thread_state</a></div><div class="ttdeci">static thread_local worker_thread_state * m_worker_thread_state</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00866">jobs_scheduler.h:866</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aad813c5647668bc154072569fb777bd5"><div class="ttname"><a href="classjobs_1_1scheduler.html#aad813c5647668bc154072569fb777bd5">jobs::scheduler::m_log_format_buffer</a></div><div class="ttdeci">char m_log_format_buffer[max_log_size]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00806">jobs_scheduler.h:806</a></div></div>
<div class="ttc" id="namespacejobs_1_1internal_html_a178d15be584a4b5d0015cb3d3b06c4f9"><div class="ttname"><a href="namespacejobs_1_1internal.html#a178d15be584a4b5d0015cb3d3b06c4f9">jobs::internal::debug_log_group_strings</a></div><div class="ttdeci">const char * debug_log_group_strings[(int) debug_log_group::count]</div><div class="ttdef"><b>Definition:</b> <a href="jobs__enums_8cpp_source.html#l00035">jobs_enums.cpp:35</a></div></div>
<div class="ttc" id="classjobs_1_1scheduler_html_aa7909659437dc34269db59f247b05bb8"><div class="ttname"><a href="classjobs_1_1scheduler.html#aa7909659437dc34269db59f247b05bb8">jobs::scheduler::m_debug_output_function</a></div><div class="ttdeci">debug_output_function m_debug_output_function</div><div class="ttdef"><b>Definition:</b> <a href="jobs__scheduler_8h_source.html#l00800">jobs_scheduler.h:800</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a3b991fc8e13eaf018863c325802748de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b991fc8e13eaf018863c325802748de">&#9670;&nbsp;</a></span>counter_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1counter__handle.html">counter_handle</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00411">411</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">create_counter()</a>.</p>

</div>
</div>
<a id="adc8c75f067ddc5dcca903ffd376761ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8c75f067ddc5dcca903ffd376761ca">&#9670;&nbsp;</a></span>event_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1event__handle.html">event_handle</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00410">410</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00555">create_event()</a>.</p>

</div>
</div>
<a id="abb5ba96b6f4196a0b3e93dc0ec0ead37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5ba96b6f4196a0b3e93dc0ec0ead37">&#9670;&nbsp;</a></span>internal::callback_scheduler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1internal_1_1callback__scheduler.html">internal::callback_scheduler</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00413">413</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

</div>
</div>
<a id="a2d95542317e215cbea1d7b5018bf6011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d95542317e215cbea1d7b5018bf6011">&#9670;&nbsp;</a></span>internal::job_context</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1internal_1_1job__context.html">internal::job_context</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00412">412</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

</div>
</div>
<a id="a7f579c645adc3ffa0ba3dc97993de5f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f579c645adc3ffa0ba3dc97993de5f1">&#9670;&nbsp;</a></span>internal::profile_scope_internal</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1internal_1_1profile__scope__internal.html">internal::profile_scope_internal</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00414">414</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

</div>
</div>
<a id="ab2abca9d802342d2f25b08cdb7072b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2abca9d802342d2f25b08cdb7072b5b">&#9670;&nbsp;</a></span>job_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classjobs_1_1job__handle.html">job_handle</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00409">409</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00717">add_job_dependency()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00524">create_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="ae85dc67f000622f2d799f94bbaf4725f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae85dc67f000622f2d799f94bbaf4725f">&#9670;&nbsp;</a></span>m_active_job_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; jobs::scheduler::m_active_job_count { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of jobs that have been dispatched but not completed yet. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00833">833</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01129">complete_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00902">dispatch_batch()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00865">dispatch_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01499">is_idle()</a>.</p>

</div>
</div>
<a id="a8ed066fd392f486a19b49d066b5c569b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed066fd392f486a19b49d066b5c569b">&#9670;&nbsp;</a></span>m_available_jobs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; jobs::scheduler::m_available_jobs { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of jobs waiting in queues to be executed. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00836">836</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01051">get_next_job_from_queue()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">wait_for_job_available()</a>.</p>

</div>
</div>
<a id="a28b6da662ffe7c4ad231f2d7f3828aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28b6da662ffe7c4ad231f2d7f3828aa9">&#9670;&nbsp;</a></span>m_callback_scheduler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1internal_1_1callback__scheduler.html">internal::callback_scheduler</a> jobs::scheduler::m_callback_scheduler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Instance responsable for queueing and calling latent callbacks. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00845">845</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00232">jobs::counter_handle::remove()</a>, <a class="el" href="jobs__counter_8cpp_source.html#l00106">jobs::counter_handle::wait_for()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>.</p>

</div>
</div>
<a id="a982466ec5c08e893fad09dc717cfca08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a982466ec5c08e893fad09dc717cfca08">&#9670;&nbsp;</a></span>m_counter_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt;<a class="el" href="classjobs_1_1internal_1_1counter__definition.html">internal::counter_definition</a>&gt; jobs::scheduler::m_counter_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool of events that can be allocated. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00842">842</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00569">create_counter()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00586">free_counter()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="aa7909659437dc34269db59f247b05bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7909659437dc34269db59f247b05bb8">&#9670;&nbsp;</a></span>m_debug_output_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#ae733fd1ddde20a364fc1cc85de1c6e22">debug_output_function</a> jobs::scheduler::m_debug_output_function = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Function to pass all debug output </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00800">800</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00186">set_debug_output()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="aab6af0e4252b5a99b5172d9123f56bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6af0e4252b5a99b5172d9123f56bed">&#9670;&nbsp;</a></span>m_debug_output_max_verbosity</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejobs.html#a84a967deecc18ff078537991c3f49c6f">debug_log_verbosity</a> jobs::scheduler::m_debug_output_max_verbosity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Max output verbosity of log messages. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00803">803</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00186">set_debug_output()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="ab259d6c0c4495c7a69668ee0e7233b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab259d6c0c4495c7a69668ee0e7233b60">&#9670;&nbsp;</a></span>m_destroying</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::m_destroying = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if the scheduler is being torn down and threads need to exit. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00791">791</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">get_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">wait_for_job_available()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">wait_until_idle()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00793">worker_entry_point()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="a2e51d505239e5e75f648dec52f9d2270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e51d505239e5e75f648dec52f9d2270">&#9670;&nbsp;</a></span>m_fiber_pool_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_fiber_pool_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of fiber pools that have been added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00779">779</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00277">add_fiber_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01278">allocate_fiber()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="a13571318d1a560b9f531bbe974d17431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13571318d1a560b9f531bbe974d17431">&#9670;&nbsp;</a></span>m_fiber_pools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1scheduler_1_1fiber__pool.html">fiber_pool</a> jobs::scheduler::m_fiber_pools[<a class="el" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of fiber pools that have been added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00782">782</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00277">add_fiber_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="aa6a1251420c4885c16a08401f540132c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a1251420c4885c16a08401f540132c">&#9670;&nbsp;</a></span>m_fiber_pools_sorted_by_stack</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1scheduler_1_1fiber__pool.html">fiber_pool</a>* jobs::scheduler::m_fiber_pools_sorted_by_stack[<a class="el" href="classjobs_1_1scheduler.html#a110208ac83f679925bed37dd0f142588">max_fiber_pools</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of pointers to fiber pools, sorted by stack size </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00785">785</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01278">allocate_fiber()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00622">enter_context()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01206">execute_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01313">free_fiber()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="ace955128ea7c9136f4257283c07b8a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace955128ea7c9136f4257283c07b8a02">&#9670;&nbsp;</a></span>m_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::m_initialized = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if this scheduler has been initialized. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00788">788</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00277">add_fiber_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00259">add_thread_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00186">set_debug_output()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00247">set_max_callbacks()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00235">set_max_counters()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00211">set_max_dependencies()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00199">set_max_jobs()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00223">set_max_profile_scopes()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00161">set_memory_functions()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00173">set_profile_functions()</a>.</p>

</div>
</div>
<a id="a17aac31dcee25d3e85f8e27676fe6a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17aac31dcee25d3e85f8e27676fe6a29">&#9670;&nbsp;</a></span>m_job_dependency_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt;<a class="el" href="classjobs_1_1internal_1_1job__dependency.html">internal::job_dependency</a>&gt; jobs::scheduler::m_job_dependency_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool of dependencies to be allocated. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00839">839</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00717">add_job_dependency()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00678">clear_job_dependencies()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="a179f88401ebc4aaae6ae13e995af2c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179f88401ebc4aaae6ae13e995af2c2c">&#9670;&nbsp;</a></span>m_job_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt;<a class="el" href="classjobs_1_1internal_1_1job__definition.html">internal::job_definition</a>&gt; jobs::scheduler::m_job_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool of jobs that can be allocated. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00797">797</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00524">create_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00541">free_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="a7ce557ba6b6073d06b60ee26bb72b38a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce557ba6b6073d06b60ee26bb72b38a">&#9670;&nbsp;</a></span>m_log_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char jobs::scheduler::m_log_buffer[<a class="el" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Buffer used for creating log messages. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00809">809</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="aad813c5647668bc154072569fb777bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad813c5647668bc154072569fb777bd5">&#9670;&nbsp;</a></span>m_log_format_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char jobs::scheduler::m_log_format_buffer[<a class="el" href="classjobs_1_1scheduler.html#afc191da2d59a7551329f6d1b1f2ba32e">max_log_size</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Buffer used for creating log message formats. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00806">806</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="a1b22587499159b2b807251fc508c26bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b22587499159b2b807251fc508c26bf">&#9670;&nbsp;</a></span>m_log_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex jobs::scheduler::m_log_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutex for writing to the log </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00812">812</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="ab8bfc26e1fdfb2e65d55ce9cd000660c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bfc26e1fdfb2e65d55ce9cd000660c">&#9670;&nbsp;</a></span>m_max_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_max_callbacks = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of callbacks we can have. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00756">756</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00247">set_max_callbacks()</a>.</p>

</div>
</div>
<a id="ab5f8633baac99fbf9e7921bc43fcfcdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5f8633baac99fbf9e7921bc43fcfcdd">&#9670;&nbsp;</a></span>m_max_counters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_max_counters = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of counters we can have. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00753">753</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00235">set_max_counters()</a>.</p>

</div>
</div>
<a id="a872a3a68f1f0789b9d199339cf8fc316"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a872a3a68f1f0789b9d199339cf8fc316">&#9670;&nbsp;</a></span>m_max_dependencies</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_max_dependencies = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of dependencies jobs can have. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00747">747</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00211">set_max_dependencies()</a>.</p>

</div>
</div>
<a id="a81fcb4d5296cf957f04a0b6183aff355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81fcb4d5296cf957f04a0b6183aff355">&#9670;&nbsp;</a></span>m_max_jobs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_max_jobs = 100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of jobs this scheduler can handle concurrently. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00744">744</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00199">set_max_jobs()</a>.</p>

</div>
</div>
<a id="a330f25064c543a2f874279d944f9b86f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330f25064c543a2f874279d944f9b86f">&#9670;&nbsp;</a></span>m_max_profile_scopes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_max_profile_scopes = 1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of profile scopes we can have. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00750">750</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00223">set_max_profile_scopes()</a>.</p>

</div>
</div>
<a id="a0545f3e1f3cf2dddf58692e6c88d223f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0545f3e1f3cf2dddf58692e6c88d223f">&#9670;&nbsp;</a></span>m_memory_functions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a> jobs::scheduler::m_memory_functions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Trampolined memory functions that also log allocations. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00764">764</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="a2f46380b3692d3b684d4ca2307cf116f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f46380b3692d3b684d4ca2307cf116f">&#9670;&nbsp;</a></span>m_pending_job_queues</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1scheduler_1_1job__queue.html">job_queue</a> jobs::scheduler::m_pending_job_queues[(int) <a class="el" href="namespacejobs.html#a2116e27fa7d2a583aaaa7fcfe70f428dae2942a04780e223b215eb8b663cf5353">priority::count</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pending job queues, one for each priority. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00818">818</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01093">get_next_job()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01016">requeue_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00939">requeue_job_batch()</a>.</p>

</div>
</div>
<a id="acdc4e59afcd2021681b8d54e00af263b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdc4e59afcd2021681b8d54e00af263b">&#9670;&nbsp;</a></span>m_platform_fiber_aware</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::m_platform_fiber_aware = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>True if the platform is fiber-aware for profiling purposes. Means we don't have to push/pop profile stack when we switch fiber context. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00794">794</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00622">enter_context()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00610">leave_context()</a>.</p>

</div>
</div>
<a id="a5b6d26a6b0aac897cddb91a72b856ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6d26a6b0aac897cddb91a72b856ac7">&#9670;&nbsp;</a></span>m_profile_functions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1profile__functions.html">profile_functions</a> jobs::scheduler::m_profile_functions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>User-defined profiling functions. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00767">767</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00622">enter_context()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00051">jobs::internal::job_context::enter_scope()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00610">leave_context()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00101">jobs::internal::job_context::leave_scope()</a>, <a class="el" href="jobs__job_8cpp_source.html#l00157">jobs::internal::profile_scope_internal::profile_scope_internal()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00081">scheduler()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00173">set_profile_functions()</a>.</p>

</div>
</div>
<a id="ad3c7666016a7ea672c7dd7983fb7ac2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c7666016a7ea672c7dd7983fb7ac2b">&#9670;&nbsp;</a></span>m_profile_scope_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1internal_1_1fixed__pool.html">internal::fixed_pool</a>&lt;<a class="el" href="classjobs_1_1internal_1_1profile__scope__definition.html">internal::profile_scope_definition</a>&gt; jobs::scheduler::m_profile_scope_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Profiling values </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00848">848</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01504">alloc_scope()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01525">free_scope()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="ae49be458491da0ac65c72411aeae881f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae49be458491da0ac65c72411aeae881f">&#9670;&nbsp;</a></span>m_profiling_active</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jobs::scheduler::m_profiling_active = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determines if profiling is active or not. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00869">869</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01610">is_profiling_active()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00173">set_profile_functions()</a>.</p>

</div>
</div>
<a id="ac3a642e47b6aef2df10a788896907040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3a642e47b6aef2df10a788896907040">&#9670;&nbsp;</a></span>m_raw_memory_functions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1memory__functions.html">memory_functions</a> jobs::scheduler::m_raw_memory_functions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>User-defined memory allocation functions. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00761">761</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00081">scheduler()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00161">set_memory_functions()</a>.</p>

</div>
</div>
<a id="abb3c08cc7b40bdbdb1a7e179b13f739e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb3c08cc7b40bdbdb1a7e179b13f739e">&#9670;&nbsp;</a></span>m_task_available_cvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable jobs::scheduler::m_task_available_cvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task available condition variable </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00824">824</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">wait_for_job_available()</a>.</p>

</div>
</div>
<a id="ae370400b5cfc326c5463042cdefb8c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae370400b5cfc326c5463042cdefb8c0d">&#9670;&nbsp;</a></span>m_task_available_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex jobs::scheduler::m_task_available_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task available mutex </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00821">821</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01666">wait_for_job_available()</a>.</p>

</div>
</div>
<a id="a7cbce0967cbfde909d7fe58945eed62c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cbce0967cbfde909d7fe58945eed62c">&#9670;&nbsp;</a></span>m_task_complete_cvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable jobs::scheduler::m_task_complete_cvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task complete condition variable </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00830">830</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01659">notify_job_complete()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">wait_until_idle()</a>.</p>

</div>
</div>
<a id="a84b65d121529aeb09d63cc13eb7e2a5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b65d121529aeb09d63cc13eb7e2a5e">&#9670;&nbsp;</a></span>m_task_complete_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex jobs::scheduler::m_task_complete_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Task complete mutex </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00827">827</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01364">wait_for_job()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01321">wait_until_idle()</a>.</p>

</div>
</div>
<a id="a22a50fc4288defd2978190d9fb134d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a50fc4288defd2978190d9fb134d96">&#9670;&nbsp;</a></span>m_thread_pool_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_thread_pool_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of thread pools that have been added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00770">770</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00259">add_thread_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="a181c426f090c60646c62b8b5e17bcaed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a181c426f090c60646c62b8b5e17bcaed">&#9670;&nbsp;</a></span>m_thread_pools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structjobs_1_1scheduler_1_1thread__pool.html">thread_pool</a> jobs::scheduler::m_thread_pools[<a class="el" href="classjobs_1_1scheduler.html#a76c9405d41a3db64ee77ae8a984a5b07">max_thread_pools</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of thread pools that have been added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00773">773</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00259">add_thread_pool()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="ace011926f543b0610e0de12bb5990f32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace011926f543b0610e0de12bb5990f32">&#9670;&nbsp;</a></span>m_total_memory_allocated</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;size_t&gt; jobs::scheduler::m_total_memory_allocated { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total memory alloacted </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00815">815</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>.</p>

</div>
</div>
<a id="af37f417d1a0a5b55e83a9c7013b32d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37f417d1a0a5b55e83a9c7013b32d5e">&#9670;&nbsp;</a></span>m_worker_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t jobs::scheduler::m_worker_count = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Total number of worker threads. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00776">776</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01640">notify_job_available()</a>.</p>

</div>
</div>
<a id="a13cff32415ff21626fb1892045591923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13cff32415ff21626fb1892045591923">&#9670;&nbsp;</a></span>m_worker_thread_scheduler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">thread_local <a class="el" href="classjobs_1_1scheduler.html">scheduler</a> * jobs::scheduler::m_worker_thread_scheduler {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Scheduler that owns the current worker thread </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00863">863</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l01601">get_active_job_context()</a>, <a class="el" href="jobs__scheduler_8cpp_source.html#l01624">get_active_job_definition()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l01615">get_worker_job_context()</a>.</p>

</div>
</div>
<a id="a90147019f7a194156fb559dd0e5fff0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90147019f7a194156fb559dd0e5fff0b">&#9670;&nbsp;</a></span>m_worker_thread_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">thread_local <a class="el" href="classjobs_1_1scheduler_1_1worker__thread__state.html">scheduler::worker_thread_state</a> * jobs::scheduler::m_worker_thread_state {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Index of the current worker thread. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00866">866</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="aacea70ee5e77f2bd04f0339e8e07f129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacea70ee5e77f2bd04f0339e8e07f129">&#9670;&nbsp;</a></span>m_worker_thread_states</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classjobs_1_1scheduler_1_1worker__thread__state.html">worker_thread_state</a>* jobs::scheduler::m_worker_thread_states = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Array of worker threads indexed by m_worker_job_index. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00860">860</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00295">init()</a>, and <a class="el" href="jobs__scheduler_8cpp_source.html#l00090">~scheduler()</a>.</p>

</div>
</div>
<a id="a110208ac83f679925bed37dd0f142588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110208ac83f679925bed37dd0f142588">&#9670;&nbsp;</a></span>max_fiber_pools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t jobs::scheduler::max_fiber_pools = 16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of fiber pools that can be added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00738">738</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00277">add_fiber_pool()</a>.</p>

</div>
</div>
<a id="afc191da2d59a7551329f6d1b1f2ba32e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc191da2d59a7551329f6d1b1f2ba32e">&#9670;&nbsp;</a></span>max_log_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int jobs::scheduler::max_log_size = 256</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum size of each log message. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00741">741</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00750">write_log()</a>.</p>

</div>
</div>
<a id="a76c9405d41a3db64ee77ae8a984a5b07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76c9405d41a3db64ee77ae8a984a5b07">&#9670;&nbsp;</a></span>max_thread_pools</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t jobs::scheduler::max_thread_pools = 16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Maximum number of threads pools that can be added. </p>

<p class="definition">Definition at line <a class="el" href="jobs__scheduler_8h_source.html#l00735">735</a> of file <a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="jobs__scheduler_8cpp_source.html#l00259">add_thread_pool()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Projects/libjobs/inc/<a class="el" href="jobs__scheduler_8h_source.html">jobs_scheduler.h</a></li>
<li>C:/Projects/libjobs/src/<a class="el" href="jobs__scheduler_8cpp_source.html">jobs_scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 15 2019 13:00:15 for libjobs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
